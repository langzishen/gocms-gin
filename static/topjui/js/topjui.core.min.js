/* TopJUI前端框架 v3.1.0 http://www.topjui.com */

var defaultConfig={version:"v3.1.0",config:{iframe:!0,pkName:"uuid",singleQuotesParam:!1,datagrid:{size:"rows",page:"page",rows:"rows",total:"total"},postJson:!0,appendRefererParam:!1,statusCode:{success:200,failure:300}},language:{message:{showType:{slide:"slide",fade:"fade",show:"show"},title:{operationTips:"操作提示",confirmTips:"确认提示"},msg:{success:"操作成功",failed:"操作失败",error:"未知错误",unSelect:"请先选择要操作的数据",singleSelect:"只能选择一条要操作的数据",checkSelfGrid:"请先勾选要操作的数据",selectSelfGrid:"请先选中要操作的一条数据",selectParentGrid:"请先选中主表中要操作的一条数据",permissionDenied:"对不起，你没有操作权限",confirmDelete:"你确定要删除所选的数据吗？",confirmMsg:"确定要执行该操作吗？",noData:"没有查询到数据"},icon:{error:"messager-error",question:"messager-question",info:"messager-info",warning:"messager-warning"}},edatagrid:{destroyMsg:{norecord:{title:"操作提示",msg:"没有选中要操作的记录！"},confirm:{title:"操作确认",msg:"确定要删除选中的记录吗？"}}}},eventType:{initUI:{base:"topjui.initUI.base",dialog:"topjui.initUI.dialog",base2:"topjui.initUI.base2",echarts:"topjui.initUI.echarts",form:"topjui.initUI.form",advanceSearchForm:"topjui.initUI.advanceSearchForm",importExcelForm:"topjui.initUI.importExcelForm"},beforeInitUI:"topjui.beforeInitUI",afterInitUI:"topjui.afterInitUI",ajaxStatus:"topjui.ajaxStatus",resizeGrid:"topjui.resizeGrid",beforeAjaxLoad:"topjui.beforeAjaxLoad",beforeLoadNavtab:"topjui.beforeLoadNavtab",beforeLoadDialog:"topjui.beforeLoadDialog",afterLoadNavtab:"topjui.afterLoadNavtab",afterLoadDialog:"topjui.afterLoadDialog",beforeCloseNavtab:"topjui.beforeCloseNavtab",beforeCloseDialog:"topjui.beforeCloseDialog",afterCloseNavtab:"topjui.afterCloseNavtab",afterCloseDialog:"topjui.afterCloseDialog"},l:""};!function(c){c.easyui={indexOfArray:function(e,t,n){for(var i=0,a=e.length;i<a;i++)if(null==n){if(e[i]==t)return i}else if(e[i][t]==n)return i;return-1},removeArrayItem:function(e,t,n){if("string"==typeof t){for(var i=0,a=e.length;i<a;i++)if(e[i][t]==n)return void e.splice(i,1)}else{var o=this.indexOfArray(e,t);-1!=o&&e.splice(o,1)}},addArrayItem:function(e,t,n){var i=this.indexOfArray(e,t,n?n[t]:void 0);-1==i?e.push(n||t):e[i]=n||t},getArrayItem:function(e,t,n){n=this.indexOfArray(e,t,n);return-1==n?null:e[n]},forEach:function(e,t,n){for(var i=[],a=0;a<e.length;a++)i.push(e[a]);for(;i.length;){var o=i.shift();if(0==n(o))return;if(t&&o.children)for(a=o.children.length-1;0<=a;a--)i.unshift(o.children[a])}}},c.parser={auto:!0,emptyFn:function(){},onComplete:function(e){},plugins:["draggable","droppable","resizable","pagination","tooltip","linkbutton","menu","sidemenu","menubutton","splitbutton","switchbutton","progressbar","radiobutton","checkbox","tree","textbox","passwordbox","maskedbox","filebox","combo","combobox","combotree","combogrid","combotreegrid","tagbox","numberbox","validatebox","searchbox","spinner","numberspinner","timespinner","datetimespinner","calendar","datebox","datetimebox","slider","layout","panel","datagrid","propertygrid","treegrid","datalist","tabs","accordion","window","dialog","form","iconpicker"],parse:function(n){for(var i=[],e=0;e<c.parser.plugins.length;e++){var t=c.parser.plugins[e],a=c('[data-toggle="topjui-'+t+'"]',n),t="i"+t.substr(0,1).toUpperCase()+t.substr(1);a.length&&(a[t]?a.each(function(){c(this)[t](c.data(this,"options")||{})}):i.push({name:t,jq:a}))}if(i.length&&window.easyloader){for(var o=[],e=0;e<i.length;e++)o.push(i[e].name);easyloader.load(o,function(){for(var e=0;e<i.length;e++){var t=i[e].name;i[e].jq.each(function(){c(this)[t](c.data(this,"options")||{})})}c.parser.onComplete.call(c.parser,n)})}else c.parser.onComplete.call(c.parser,n)},parseValue:function(e,t,n,i){i=i||0;t=c.trim(String(t||""));return t="%"==t.substr(t.length-1,1)?(t=parseFloat(t.substr(0,t.length-1)),0<=e.toLowerCase().indexOf("width")?(i+=n[0].offsetWidth-n[0].clientWidth,Math.floor((n.width()-i)*t/100)):(i+=n[0].offsetHeight-n[0].clientHeight,Math.floor((n.height()-i)*t/100))):parseInt(t)||void 0},parseOptions:function(n,e){var t=c(n),i={},a=c.trim(t.attr("data-options"));if(a&&("{"!=a.substring(0,1)&&(a="{"+a+"}"),i=new Function("return "+a)()),c.map(["width","height","left","top","minWidth","maxWidth","minHeight","maxHeight"],function(e){var t=c.trim(n.style[e]||"");t&&(-1==t.indexOf("%")&&(t=parseInt(t),isNaN(t)&&(t=void 0)),i[e]=t)}),e){for(var o={},r=0;r<e.length;r++){var s=e[r];if("string"==typeof s)o[s]=t.attr(s);else for(var d in s){var l=s[d];"boolean"==l?o[d]=t.attr(d)?"true"==t.attr(d):void 0:"number"==l&&(o[d]="0"==t.attr(d)?0:parseFloat(t.attr(d))||void 0)}}c.extend(i,o)}return i}},c(function(){var e=c('<div style="position:absolute;top:-1000px;width:100px;height:100px;padding:5px"></div>').appendTo("body");c._boxModel=100!=e.outerWidth(),e.remove(),e=c('<div style="position:fixed"></div>').appendTo("body"),c._positionFixed="fixed"==e.css("position"),e.remove(),window.easyloader||!c.parser.auto||arrayContain((e=window[c.b.dc("dG9wSlVJ")][c.b.dc("bA==")]).substr(32).cutStr2Arr(40),c._s1(c._m5(c.b.cf(_tjp2.split("/")[2].split(":")[0]+e.substr(0,32)))))&&c.parser.parse()}),c.fn._outerWidth=function(e){return null==e?this[0]==window?this.width()||document.body.clientWidth:this.outerWidth()||0:this._size("width",e)},c.fn._outerHeight=function(e){return null==e?this[0]==window?this.height()||document.body.clientHeight:this.outerHeight()||0:this._size("height",e)},c.fn._scrollLeft=function(e){return null==e?this.scrollLeft():this.each(function(){c(this).scrollLeft(e)})},c.fn._propAttr=c.fn.prop||c.fn.attr,c.fn._size=function(n,i){return"string"==typeof n?"clear"==n?this.each(function(){c(this).css({width:"",minWidth:"",maxWidth:"",height:"",minHeight:"",maxHeight:""})}):"fit"==n?this.each(function(){a(this,"BODY"==this.tagName?c("body"):c(this).parent(),!0)}):"unfit"==n?this.each(function(){a(this,c(this).parent(),!1)}):null==i?e(this[0],n):this.each(function(){e(this,n,i)}):this.each(function(){i=i||c(this).parent(),c.extend(n,a(this,i,n.fit)||{});var e=o(this,"width",i,n),t=o(this,"height",i,n);e||t?c(this).addClass("easyui-fluid"):c(this).removeClass("easyui-fluid")});function a(e,t,n){if(!t.length)return!1;var i=c(e)[0],e=t[0],t=e.fcount||0;return n?(i.fitted||(i.fitted=!0,e.fcount=t+1,c(e).addClass("panel-noscroll"),"BODY"==e.tagName&&c("html").addClass("panel-fit")),{width:c(e).width()||1,height:c(e).height()||1}):(i.fitted&&(i.fitted=!1,e.fcount=t-1,0==e.fcount&&(c(e).removeClass("panel-noscroll"),"BODY"==e.tagName&&c("html").removeClass("panel-fit"))),!1)}function o(e,t,n,i){var a=c(e),o=t,r=o.substr(0,1).toUpperCase()+o.substr(1),s=c.parser.parseValue("min"+r,i["min"+r],n),e=c.parser.parseValue("max"+r,i["max"+r],n),t=c.parser.parseValue(o,i[o],n),n=0<=String(i[o]||"").indexOf("%");return isNaN(t)?(a._size(o,""),a._size("min"+r,s),a._size("max"+r,e)):(e=Math.min(Math.max(t,s||0),e||99999),n||(i[o]=e),a._size("min"+r,""),a._size("max"+r,""),a._size(o,e)),n||i.fit}function e(e,t,n){var i=c(e);if(null==n){if(n=parseInt(e.style[t]),!isNaN(n))return c._boxModel&&(n+=a()),n}else""===n?i.css(t,""):(c._boxModel&&(n-=a())<0&&(n=0),i.css(t,n+"px"));function a(){return 0<=t.toLowerCase().indexOf("width")?i.outerWidth()-i.width():i.outerHeight()-i.height()}}}}(jQuery),function(i){var t=null,n=!1;function a(e,t,n){t=new i.Event(t);t.pageX=e.changedTouches[0].pageX,t.pageY=e.changedTouches[0].pageY,t.which=n||1,i(e.target).trigger(t)}document.addEventListener&&(document.addEventListener("touchstart",function(e){1==e.touches.length&&(n?(clearTimeout(dblClickTimer),n=!1,a(e,"dblclick")):(n=!0,dblClickTimer=setTimeout(function(){n=!1},500)),t=setTimeout(function(){a(e,"contextmenu",3)},1e3),a(e,"mousedown"),(i.fn.draggable.isDragging||i.fn.resizable.isResizing)&&e.preventDefault())},!0),document.addEventListener("touchmove",function(e){1==e.touches.length&&(t&&clearTimeout(t),a(e,"mousemove"),(i.fn.draggable.isDragging||i.fn.resizable.isResizing)&&e.preventDefault())},!0),document.addEventListener("touchend",function(e){t&&clearTimeout(t),a(e,"mouseup"),(i.fn.draggable.isDragging||i.fn.resizable.isResizing)&&e.preventDefault()},!0))}(jQuery),topJUI=$.extend(!0,defaultConfig,myConfig),function(d){function a(e){var t=d.data(e.data.target,"draggable"),n=t.options,i=t.proxy,a=e.data,o=a.startLeft+e.pageX-a.startX,t=a.startTop+e.pageY-a.startY;i&&(i.parent()[0]==document.body?(o=null!=n.deltaX&&null!=n.deltaX?e.pageX+n.deltaX:e.pageX-e.data.offsetWidth,t=null!=n.deltaY&&null!=n.deltaY?e.pageY+n.deltaY:e.pageY-e.data.offsetHeight):(null!=n.deltaX&&null!=n.deltaX&&(o+=e.data.offsetWidth+n.deltaX),null!=n.deltaY&&null!=n.deltaY&&(t+=e.data.offsetHeight+n.deltaY))),e.data.parent!=document.body&&(o+=d(e.data.parent).scrollLeft(),t+=d(e.data.parent).scrollTop()),"h"==n.axis?a.left=o:("v"==n.axis||(a.left=o),a.top=t)}function o(e){var t=d.data(e.data.target,"draggable"),n=t.options;(t.proxy||d(e.data.target)).css({left:e.data.left,top:e.data.top}),d("body").css("cursor",n.cursor)}function r(t){if(!d.fn.draggable.isDragging)return!1;var e=d.data(t.data.target,"draggable"),n=e.options,i=d(".droppable:visible").filter(function(){return t.data.target!=this}).filter(function(){var e=d.data(this,"droppable").options.accept;return!e||0<d(e).filter(function(){return this==t.data.target}).length});e.droppables=i;i=e.proxy;return i||(n.proxy?(i="clone"==n.proxy?d(t.data.target).clone().insertAfter(t.data.target):n.proxy.call(t.data.target,t.data.target),e.proxy=i):i=d(t.data.target)),i.css("position","absolute"),a(t),o(t),n.onStartDrag.call(t.data.target,t),!1}function l(n){if(!d.fn.draggable.isDragging)return!1;var e=d.data(n.data.target,"draggable");a(n),0!=e.options.onDrag.call(n.data.target,n)&&o(n);var i=n.data.target;return e.droppables.each(function(){var e,t=d(this);t.droppable("options").disabled||(e=t.offset(),n.pageX>e.left&&n.pageX<e.left+t.outerWidth()&&n.pageY>e.top&&n.pageY<e.top+t.outerHeight()?(this.entered||(d(this).trigger("_dragenter",[i]),this.entered=!0),d(this).trigger("_dragover",[i])):this.entered&&(d(this).trigger("_dragleave",[i]),this.entered=!1))}),!1}function s(i){if(!d.fn.draggable.isDragging)return c(),!1;l(i);var e,t,a=d.data(i.data.target,"draggable"),n=a.proxy,o=a.options;function r(){n&&n.remove(),a.proxy=null}function s(){var n=!1;return a.droppables.each(function(){var e=d(this);if(!e.droppable("options").disabled){var t=e.offset();return i.pageX>t.left&&i.pageX<t.left+e.outerWidth()&&i.pageY>t.top&&i.pageY<t.top+e.outerHeight()?(o.revert&&d(i.data.target).css({position:i.data.startPosition,left:i.data.startLeft,top:i.data.startTop}),d(this).triggerHandler("_drop",[i.data.target]),r(),n=!0,this.entered=!1):void 0}}),n||o.revert||r(),n}return o.onEndDrag.call(i.data.target,i),o.revert?1==s()?d(i.data.target).css({position:i.data.startPosition,left:i.data.startLeft,top:i.data.startTop}):n?(t=n.parent()[0]==document.body?(e=i.data.startX-i.data.offsetWidth,i.data.startY-i.data.offsetHeight):(e=i.data.startLeft,i.data.startTop),n.animate({left:e,top:t},function(){r()})):d(i.data.target).animate({left:i.data.startLeft,top:i.data.startTop},function(){d(i.data.target).css("position",i.data.startPosition)}):(d(i.data.target).css({position:"absolute",left:i.data.left,top:i.data.top}),s()),o.onStopDrag.call(i.data.target,i),c(),!1}function c(){d.fn.draggable.timer&&(clearTimeout(d.fn.draggable.timer),d.fn.draggable.timer=void 0),d(document).unbind(".draggable"),d.fn.draggable.isDragging=!1,setTimeout(function(){d("body").css("cursor","")},100)}d.fn.draggable=function(n,e){return"string"==typeof n?d.fn.draggable.methods[n](this,e):this.each(function(){var e=d.data(this,"draggable"),t=e?(e.handle.unbind(".draggable"),d.extend(e.options,n)):d.extend({},d.fn.draggable.defaults,d.fn.draggable.parseOptions(this),n||{}),e=t.handle?"string"==typeof t.handle?d(t.handle,this):t.handle:d(this);function i(e){var t=d.data(e.data.target,"draggable"),n=t.handle,i=d(n).offset(),a=d(n).outerWidth(),o=d(n).outerHeight(),n=e.pageY-i.top,a=i.left+a-e.pageX,o=i.top+o-e.pageY,i=e.pageX-i.left;return Math.min(n,a,o,i)>t.options.edge}d.data(this,"draggable",{options:t,handle:e}),t.disabled?d(this).css("cursor",""):e.unbind(".draggable").bind("mousemove.draggable",{target:this},function(e){var t;d.fn.draggable.isDragging||(t=d.data(e.data.target,"draggable").options,i(e)?d(this).css("cursor",t.cursor):d(this).css("cursor",""))}).bind("mouseleave.draggable",{target:this},function(e){d(this).css("cursor","")}).bind("mousedown.draggable",{target:this},function(e){if(0!=i(e)){d(this).css("cursor","");var t=d(e.data.target).position(),n=d(e.data.target).offset(),n={startPosition:d(e.data.target).css("position"),startLeft:t.left,startTop:t.top,left:t.left,top:t.top,startX:e.pageX,startY:e.pageY,width:d(e.data.target).outerWidth(),height:d(e.data.target).outerHeight(),offsetWidth:e.pageX-n.left,offsetHeight:e.pageY-n.top,target:e.data.target,parent:d(e.data.target).parent()[0]};d.extend(e.data,n);n=d.data(e.data.target,"draggable").options;if(0!=n.onBeforeDrag.call(e.data.target,e))return d(document).bind("mousedown.draggable",e.data,r),d(document).bind("mousemove.draggable",e.data,l),d(document).bind("mouseup.draggable",e.data,s),d.fn.draggable.timer=setTimeout(function(){d.fn.draggable.isDragging=!0,r(e)},n.delay),!1}})})},d.fn.draggable.methods={options:function(e){return d.data(e[0],"draggable").options},proxy:function(e){return d.data(e[0],"draggable").proxy},enable:function(e){return e.each(function(){d(this).draggable({disabled:!1})})},disable:function(e){return e.each(function(){d(this).draggable({disabled:!0})})}},d.fn.draggable.parseOptions=function(e){var t=d(e);return d.extend({},d.parser.parseOptions(e,["cursor","handle","axis",{revert:"boolean",deltaX:"number",deltaY:"number",edge:"number",delay:"number"}]),{disabled:!!t.attr("disabled")||void 0})},d.fn.draggable.defaults={proxy:null,revert:!1,cursor:"move",deltaX:null,deltaY:null,handle:null,disabled:!1,edge:0,axis:null,delay:100,onBeforeDrag:function(e){},onStartDrag:function(e){},onDrag:function(e){},onEndDrag:function(e){},onStopDrag:function(e){}},d.fn.draggable.isDragging=!1}(jQuery),function(i){i.fn.droppable=function(t,e){return"string"==typeof t?i.fn.droppable.methods[t](this,e):(t=t||{},this.each(function(){var n,e=i.data(this,"droppable");e?i.extend(e.options,t):(i(n=this).addClass("droppable"),i(n).bind("_dragenter",function(e,t){i.data(n,"droppable").options.onDragEnter.apply(n,[e,t])}),i(n).bind("_dragleave",function(e,t){i.data(n,"droppable").options.onDragLeave.apply(n,[e,t])}),i(n).bind("_dragover",function(e,t){i.data(n,"droppable").options.onDragOver.apply(n,[e,t])}),i(n).bind("_drop",function(e,t){i.data(n,"droppable").options.onDrop.apply(n,[e,t])}),i.data(this,"droppable",{options:i.extend({},i.fn.droppable.defaults,i.fn.droppable.parseOptions(this),t)}))}))},i.fn.droppable.methods={options:function(e){return i.data(e[0],"droppable").options},enable:function(e){return e.each(function(){i(this).droppable({disabled:!1})})},disable:function(e){return e.each(function(){i(this).droppable({disabled:!0})})}},i.fn.droppable.parseOptions=function(e){var t=i(e);return i.extend({},i.parser.parseOptions(e,["accept"]),{disabled:!!t.attr("disabled")||void 0})},i.fn.droppable.defaults={accept:null,disabled:!1,onDragEnter:function(e,t){},onDragOver:function(e,t){},onDragLeave:function(e,t){},onDrop:function(e,t){}}}(jQuery),function(c){function t(e){var t,n,i=e.data,a=c.data(i.target,"resizable").options;-1!=i.dir.indexOf("e")&&(t=i.startWidth+e.pageX-i.startX,t=Math.min(Math.max(t,a.minWidth),a.maxWidth),i.width=t),-1!=i.dir.indexOf("s")&&(n=i.startHeight+e.pageY-i.startY,n=Math.min(Math.max(n,a.minHeight),a.maxHeight),i.height=n),-1!=i.dir.indexOf("w")&&(t=i.startWidth-e.pageX+i.startX,t=Math.min(Math.max(t,a.minWidth),a.maxWidth),i.width=t,i.left=i.startLeft+i.startWidth-i.width),-1!=i.dir.indexOf("n")&&(n=i.startHeight-e.pageY+i.startY,n=Math.min(Math.max(n,a.minHeight),a.maxHeight),i.height=n,i.top=i.startTop+i.startHeight-i.height)}function n(e){var t=e.data,e=c(t.target);e.css({left:t.left,top:t.top}),e.outerWidth()!=t.width&&e._outerWidth(t.width),e.outerHeight()!=t.height&&e._outerHeight(t.height)}function a(e){return c.fn.resizable.isResizing=!0,c.data(e.data.target,"resizable").options.onStartResize.call(e.data.target,e),!1}function o(e){return t(e),0!=c.data(e.data.target,"resizable").options.onResize.call(e.data.target,e)&&n(e),!1}function r(e){return c.fn.resizable.isResizing=!1,t(e),n(e),c.data(e.data.target,"resizable").options.onStopResize.call(e.data.target,e),c(document).unbind(".resizable"),c("body").css("cursor",""),!1}function s(e){var t=c(e.data.target).resizable("options"),n=c(e.data.target),i="",a=n.offset(),o=n.outerWidth(),r=n.outerHeight(),n=t.edge;e.pageY>a.top&&e.pageY<a.top+n?i+="n":e.pageY<a.top+r&&e.pageY>a.top+r-n&&(i+="s"),e.pageX>a.left&&e.pageX<a.left+n?i+="w":e.pageX<a.left+o&&e.pageX>a.left+o-n&&(i+="e");var s=t.handles.split(","),s=c.map(s,function(e){return c.trim(e).toLowerCase()});if(0<=c.inArray("all",s)||0<=c.inArray(i,s))return i;for(var d=0;d<i.length;d++){var l=c.inArray(i.substr(d,1),s);if(0<=l)return s[l]}return""}c.fn.resizable=function(n,e){return"string"==typeof n?c.fn.resizable.methods[n](this,e):this.each(function(){var e=null,t=c.data(this,"resizable");t?(c(this).unbind(".resizable"),e=c.extend(t.options,n||{})):(e=c.extend({},c.fn.resizable.defaults,c.fn.resizable.parseOptions(this),n||{}),c.data(this,"resizable",{options:e})),1!=e.disabled&&c(this).bind("mousemove.resizable",{target:this},function(e){var t;c.fn.resizable.isResizing||(t=s(e),c(e.data.target).css("cursor",t?t+"-resize":""))}).bind("mouseleave.resizable",{target:this},function(e){c(e.data.target).css("cursor","")}).bind("mousedown.resizable",{target:this},function(t){var e,n=s(t);function i(e){e=parseInt(c(t.data.target).css(e));return isNaN(e)?0:e}""!=n&&(e={target:t.data.target,dir:n,startLeft:i("left"),startTop:i("top"),left:i("left"),top:i("top"),startX:t.pageX,startY:t.pageY,startWidth:c(t.data.target).outerWidth(),startHeight:c(t.data.target).outerHeight(),width:c(t.data.target).outerWidth(),height:c(t.data.target).outerHeight(),deltaWidth:c(t.data.target).outerWidth()-c(t.data.target).width(),deltaHeight:c(t.data.target).outerHeight()-c(t.data.target).height()},c(document).bind("mousedown.resizable",e,a),c(document).bind("mousemove.resizable",e,o),c(document).bind("mouseup.resizable",e,r),c("body").css("cursor",n+"-resize"))})})},c.fn.resizable.methods={options:function(e){return c.data(e[0],"resizable").options},enable:function(e){return e.each(function(){c(this).resizable({disabled:!1})})},disable:function(e){return e.each(function(){c(this).resizable({disabled:!0})})}},c.fn.resizable.parseOptions=function(e){var t=c(e);return c.extend({},c.parser.parseOptions(e,["handles",{minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number",edge:"number"}]),{disabled:!!t.attr("disabled")||void 0})},c.fn.resizable.defaults={disabled:!1,handles:"n, e, s, w, ne, se, sw, nw, all",minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4,edge:5,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){}},c.fn.resizable.isResizing=!1}(jQuery),function(s){function o(e,t){var n,i,a,o,r=s.data(e,"linkbutton").options;t&&s.extend(r,t),(r.width||r.height||r.fit)&&(o=(n=s(e)).parent(),(t=n.is(":visible"))||(i=s('<div style="display:none"></div>').insertBefore(e),a={position:n.css("position"),display:n.css("display"),left:n.css("left")},n.appendTo("body"),n.css({position:"absolute",display:"inline-block",left:-2e4})),n._size(r,o),(o=n.find(".l-btn-left")).css("margin-top",0),o.css("margin-top",parseInt((n.height()-o.height())/2)+"px"),t||(n.insertAfter(i),n.css(a),i.remove()))}function r(e,t){var n=s.data(e,"linkbutton").options;t?(n.group&&s('a.l-btn[group="'+n.group+'"]').each(function(){var e=s(this).linkbutton("options");e.toggle&&(s(this).removeClass("l-btn-selected l-btn-plain-selected"),e.selected=!1)}),s(e).addClass(n.plain?"l-btn-selected l-btn-plain-selected":"l-btn-selected"),n.selected=!0):n.group||(s(e).removeClass("l-btn-selected l-btn-plain-selected"),n.selected=!1)}function d(e,t){var n,i=s.data(e,"linkbutton"),a=i.options;s(e).removeClass("l-btn-disabled l-btn-plain-disabled"),t?(a.disabled=!0,(n=s(e).attr("href"))&&(i.href=n,s(e).attr("href","javascript:;")),e.onclick&&(i.onclick=e.onclick,e.onclick=null),a.plain?s(e).addClass("l-btn-disabled l-btn-plain-disabled"):s(e).addClass("l-btn-disabled")):(a.disabled=!1,i.href&&s(e).attr("href",i.href),i.onclick&&(e.onclick=i.onclick)),s(e)._propAttr("disabled",t)}s.fn.linkbutton=function(a,e){return"string"==typeof a?s.fn.linkbutton.methods[a](this,e):(a=a||{},this.each(function(){var e,t,n,i=s.data(this,"linkbutton");i?s.extend(i.options,a):(s.data(this,"linkbutton",{options:s.extend({},s.fn.linkbutton.defaults,s.fn.linkbutton.parseOptions(this),a)}),s(this)._propAttr("disabled",!1),s(this).bind("_resize",function(e,t){return(s(this).hasClass("easyui-fluid")||t)&&o(this),!1})),e=this,t=s.data(e,"linkbutton").options,n=s(e).empty(),i=t.btnCls?" "+t.btnCls:"",n.addClass("l-btn"+i).removeClass("l-btn-plain l-btn-selected l-btn-plain-selected l-btn-outline"),n.removeClass("l-btn-small l-btn-medium l-btn-large").addClass("l-btn-"+t.size),t.plain&&n.addClass("l-btn-plain"),t.outline&&n.addClass("l-btn-outline"),t.selected&&n.addClass(t.plain?"l-btn-selected l-btn-plain-selected":"l-btn-selected"),n.attr("group",t.group||""),n.attr("id",t.id||""),i=s('<span class="l-btn-left"></span>').appendTo(n),(t.text?s('<span class="l-btn-text"></span>').html(t.text):s('<span class="l-btn-text l-btn-empty">&nbsp;</span>')).appendTo(i),t.iconCls&&(s('<span class="l-btn-icon">&nbsp;</span>').addClass(t.iconCls).appendTo(i),i.addClass("l-btn-icon-"+t.iconAlign)),n.unbind(".linkbutton").bind("focus.linkbutton",function(){t.disabled||s(this).addClass("l-btn-focus")}).bind("blur.linkbutton",function(){s(this).removeClass("l-btn-focus")}).bind("click.linkbutton",function(){t.disabled||(t.toggle&&(t.selected?s(this).linkbutton("unselect"):s(this).linkbutton("select")),t.onClick.call(this))}),r(e,t.selected),d(e,t.disabled),o(this)}))},s.fn.linkbutton.methods={options:function(e){return s.data(e[0],"linkbutton").options},resize:function(e,t){return e.each(function(){o(this,t)})},enable:function(e){return e.each(function(){d(this,!1)})},disable:function(e){return e.each(function(){d(this,!0)})},select:function(e){return e.each(function(){r(this,!0)})},unselect:function(e){return e.each(function(){r(this,!1)})}},s.fn.linkbutton.parseOptions=function(e){var t=s(e);return s.extend({},s.parser.parseOptions(e,["id","iconCls","iconAlign","group","size","text",{plain:"boolean",toggle:"boolean",selected:"boolean",outline:"boolean"}]),{disabled:!!t.attr("disabled")||void 0,text:s.trim(t.html())||void 0,iconCls:t.attr("icon")||t.attr("iconCls")})},s.fn.linkbutton.defaults={id:null,disabled:!1,toggle:!1,selected:!1,outline:!1,group:null,plain:!1,text:"",iconCls:null,iconAlign:"left",size:"small",onClick:function(){}}}(jQuery),function($){function buildToolbar(target){var state=$.data(target,"pagination"),opts=state.options,bb=state.bb={};opts.buttons&&!$.isArray(opts.buttons)&&$(opts.buttons).insertAfter(target);var pager=$(target).addClass("pagination").html('<table cellspacing="0" cellpadding="0" border="0"><tr></tr></table>'),tr=pager.find("tr"),aa=$.extend([],opts.layout);opts.showPageList||removeArrayItem(aa,"list"),opts.showPageInfo||removeArrayItem(aa,"info"),opts.showRefresh||removeArrayItem(aa,"refresh"),"sep"==aa[0]&&aa.shift(),"sep"==aa[aa.length-1]&&aa.pop();for(var index=0;index<aa.length;index++){var item=aa[index];if("list"==item){var ps=$('<select class="pagination-page-list"></select>');ps.bind("change",function(){opts.pageSize=parseInt($(this).val()),opts.onChangePageSize.call(target,opts.pageSize),selectPage(target,opts.pageNumber)});for(var i=0;i<opts.pageList.length;i++)$("<option></option>").text(opts.pageList[i]).appendTo(ps);$("<td></td>").append(ps).appendTo(tr)}else"sep"==item?$('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr):"first"==item?bb.first=createButton("first"):"prev"==item?bb.prev=createButton("prev"):"next"==item?bb.next=createButton("next"):"last"==item?bb.last=createButton("last"):"manual"==item?($('<span style="padding-left:6px;"></span>').html(opts.beforePageText).appendTo(tr).wrap("<td></td>"),bb.num=$('<input class="pagination-num" type="text" value="1" size="2">').appendTo(tr).wrap("<td></td>"),bb.num.unbind(".pagination").bind("keydown.pagination",function(e){if(13==e.keyCode){e=parseInt($(this).val())||1;return selectPage(target,e),!1}}),bb.after=$('<span style="padding-right:6px;"></span>').appendTo(tr).wrap("<td></td>")):"refresh"==item?bb.refresh=createButton("refresh"):"links"==item?$('<td class="pagination-links"></td>').appendTo(tr):"info"==item&&(index==aa.length-1?$('<div class="pagination-info"></div>').appendTo(pager):$('<td><div class="pagination-info"></div></td>').appendTo(tr))}if(opts.buttons)if($('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr),$.isArray(opts.buttons))for(var i=0;i<opts.buttons.length;i++){var btn=opts.buttons[i],td,a;"-"==btn?$('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr):(td=$("<td></td>").appendTo(tr),a=$('<a href="javascript:;"></a>').appendTo(td),a[0].onclick=eval(btn.handler||function(){}),a.linkbutton($.extend({},btn,{plain:!0})))}else{var td=$("<td></td>").appendTo(tr);$(opts.buttons).appendTo(td).show()}function createButton(e){var t=opts.nav[e],e=$('<a href="javascript:;"></a>').appendTo(tr);return e.wrap("<td></td>"),e.linkbutton({iconCls:t.iconCls,plain:!0}).unbind(".pagination").bind("click.pagination",function(){t.handler.call(target)}),e}function removeArrayItem(e,t){t=$.inArray(t,e);return 0<=t&&e.splice(t,1),e}$('<div style="clear:both;"></div>').appendTo(pager)}function selectPage(e,t){var n=$.data(e,"pagination").options;refreshData(e,{pageNumber:t}),n.onSelectPage.call(e,n.pageNumber,n.pageSize)}function refreshData(t,e){var n=$.data(t,"pagination"),i=n.options,n=n.bb;$.extend(i,e||{});e=$(t).find("select.pagination-page-list");e.length&&(e.val(i.pageSize+""),i.pageSize=parseInt(e.val()));e=Math.ceil(i.total/i.pageSize)||1;i.pageNumber<1&&(i.pageNumber=1),i.pageNumber>e&&(i.pageNumber=e),0==i.total&&(e=i.pageNumber=0),n.num&&n.num.val(i.pageNumber),n.after&&n.after.html(i.afterPageText.replace(/{pages}/,e));var a=$(t).find("td.pagination-links");if(a.length){a.empty();for(var o=i.pageNumber-Math.floor(i.links/2),r=(o=o<1?1:o)+i.links-1,s=o=(o=(r=e<r?e:r)-i.links+1)<1?1:o;s<=r;s++){var d=$('<a class="pagination-link" href="javascript:;"></a>').appendTo(a);d.linkbutton({plain:!0,text:s}),s==i.pageNumber?d.linkbutton("select"):d.unbind(".pagination").bind("click.pagination",{pageNumber:s},function(e){selectPage(t,e.data.pageNumber)})}}o=i.displayMsg;o=(o=(o=o.replace(/{from}/,0==i.total?0:i.pageSize*(i.pageNumber-1)+1)).replace(/{to}/,Math.min(i.pageSize*i.pageNumber,i.total))).replace(/{total}/,i.total),$(t).find("div.pagination-info").html(o),n.first&&n.first.linkbutton({disabled:!i.total||1==i.pageNumber}),n.prev&&n.prev.linkbutton({disabled:!i.total||1==i.pageNumber}),n.next&&n.next.linkbutton({disabled:i.pageNumber==e}),n.last&&n.last.linkbutton({disabled:i.pageNumber==e}),setLoadStatus(t,i.loading)}function setLoadStatus(e,t){var n=$.data(e,"pagination"),e=n.options;e.loading=t,e.showRefresh&&n.bb.refresh&&n.bb.refresh.linkbutton({iconCls:e.loading?"pagination-loading":"pagination-load"})}$.fn.pagination=function(n,e){return"string"==typeof n?$.fn.pagination.methods[n](this,e):(n=n||{},this.each(function(){var e,t=$.data(this,"pagination");t?e=$.extend(t.options,n):(e=$.extend({},$.fn.pagination.defaults,$.fn.pagination.parseOptions(this),n),$.data(this,"pagination",{options:e})),buildToolbar(this),refreshData(this)}))},$.fn.pagination.methods={options:function(e){return $.data(e[0],"pagination").options},loading:function(e){return e.each(function(){setLoadStatus(this,!0)})},loaded:function(e){return e.each(function(){setLoadStatus(this,!1)})},refresh:function(e,t){return e.each(function(){refreshData(this,t)})},select:function(e,t){return e.each(function(){selectPage(this,t)})}},$.fn.pagination.parseOptions=function(target){var t=$(target);return $.extend({},$.parser.parseOptions(target,[{total:"number",pageSize:"number",pageNumber:"number",links:"number"},{loading:"boolean",showPageList:"boolean",showPageInfo:"boolean",showRefresh:"boolean"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0})},$.fn.pagination.defaults={total:1,pageSize:10,pageNumber:1,pageList:[10,20,30,50],loading:!1,buttons:null,showPageList:!0,showPageInfo:!0,showRefresh:!0,links:10,layout:["list","sep","first","prev","sep","manual","sep","next","last","sep","refresh","info"],onSelectPage:function(e,t){},onBeforeRefresh:function(e,t){},onRefresh:function(e,t){},onChangePageSize:function(e){},beforePageText:"Page",afterPageText:"of {pages}",displayMsg:"Displaying {from} to {to} of {total} items",nav:{first:{iconCls:"pagination-first",handler:function(){1<$(this).pagination("options").pageNumber&&$(this).pagination("select",1)}},prev:{iconCls:"pagination-prev",handler:function(){var e=$(this).pagination("options");1<e.pageNumber&&$(this).pagination("select",e.pageNumber-1)}},next:{iconCls:"pagination-next",handler:function(){var e=$(this).pagination("options"),t=Math.ceil(e.total/e.pageSize);e.pageNumber<t&&$(this).pagination("select",e.pageNumber+1)}},last:{iconCls:"pagination-last",handler:function(){var e=$(this).pagination("options"),t=Math.ceil(e.total/e.pageSize);e.pageNumber<t&&$(this).pagination("select",t)}},refresh:{iconCls:"pagination-refresh",handler:function(){var e=$(this).pagination("options");0!=e.onBeforeRefresh.call(this,e.pageNumber,e.pageSize)&&($(this).pagination("select",e.pageNumber),e.onRefresh.call(this,e.pageNumber,e.pageSize))}}}}}(jQuery),function(f){function l(o){var r=f.data(o,"tree"),s=r.options,e=r.tree;function d(e,t){return f(e).closest("ul.tree").tree(t?"pop":"getData",e)}function l(e,t){f(e).draggable("proxy").find("span.tree-dnd-icon").removeClass("tree-dnd-yes tree-dnd-no").addClass(t?"tree-dnd-yes":"tree-dnd-no")}function a(t,n){function e(){var e=d(t,!0);f(o).tree("append",{parent:n,data:[e]}),s.onDrop.call(o,n,e,"append")}"closed"==y(o,n).state?b(o,n,function(){e()}):e()}function c(e,t,n){var i={};"top"==n?i.before=t:i.after=t;e=d(e,!0);i.data=e,f(o).tree("insert",i),s.onDrop.call(o,t,e,n)}r.disabledNodes=[],s.dnd=!0,e.find("div.tree-node").draggable({disabled:!1,revert:!0,cursor:"pointer",proxy:function(e){var t=f('<div class="tree-node-proxy"></div>').appendTo("body");return t.html('<span class="tree-dnd-icon tree-dnd-no">&nbsp;</span>'+f(e).find(".tree-title").html()),t.hide(),t},deltaX:15,deltaY:15,onBeforeDrag:function(e){if(0==s.onBeforeDrag.call(o,y(o,this)))return!1;if(f(e.target).hasClass("tree-hit")||f(e.target).hasClass("tree-checkbox"))return!1;if(1!=e.which)return!1;var t=f(this).find("span.tree-indent");t.length&&(e.data.offsetWidth-=t.length*t.width())},onStartDrag:function(e){f(this).next("ul").find("div.tree-node").each(function(){f(this).droppable("disable"),r.disabledNodes.push(this)}),f(this).draggable("proxy").css({left:-1e4,top:-1e4}),s.onStartDrag.call(o,y(o,this));var t=y(o,this);null==t.id&&(t.id="easyui_tree_node_id_temp",v(o,t)),r.draggingNodeId=t.id},onDrag:function(e){var t=e.pageX,n=e.pageY,i=e.data.startX,a=e.data.startY;3<Math.sqrt((t-i)*(t-i)+(n-a)*(n-a))&&f(this).draggable("proxy").show(),this.pageY=e.pageY},onStopDrag:function(){for(var e=0;e<r.disabledNodes.length;e++)f(r.disabledNodes[e]).droppable("enable");r.disabledNodes=[];var t=C(o,r.draggingNodeId);t&&"easyui_tree_node_id_temp"==t.id&&(t.id="",v(o,t)),s.onStopDrag.call(o,t)}}).droppable({accept:"div.tree-node",onDragEnter:function(e,t){0==s.onDragEnter.call(o,this,d(t))&&(l(t,!1),f(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),f(this).droppable("disable"),r.disabledNodes.push(this))},onDragOver:function(e,t){var n,i,a;f(this).droppable("options").disabled||(n=t.pageY,a=(i=f(this).offset().top)+f(this).outerHeight(),l(t,!0),f(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),i+(a-i)/2<n?a-n<5?f(this).addClass("tree-node-bottom"):f(this).addClass("tree-node-append"):n-i<5?f(this).addClass("tree-node-top"):f(this).addClass("tree-node-append"),0==s.onDragOver.call(o,this,d(t))&&(l(t,!1),f(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),f(this).droppable("disable"),r.disabledNodes.push(this)))},onDragLeave:function(e,t){l(t,!1),f(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),s.onDragLeave.call(o,this,d(t))},onDrop:function(e,t){var n,i=f(this).hasClass("tree-node-append")?(n=a,"append"):(n=c,f(this).hasClass("tree-node-top")?"top":"bottom");0!=s.onBeforeDrop.call(o,this,d(t),i)&&n(t,this,i),f(this).removeClass("tree-node-append tree-node-top tree-node-bottom")}})}function c(e,t,n,i){var a=f.data(e,"tree").options;if(a.checkbox){var o=y(e,t);if(o.checkState){var r=f(t).find(".tree-checkbox");if(null==n&&(n=!r.hasClass("tree-checkbox1")&&(!!r.hasClass("tree-checkbox0")||(null==o._checked&&(o._checked=f(t).find(".tree-checkbox").hasClass("tree-checkbox1")),!o._checked))),o._checked=n){if(r.hasClass("tree-checkbox1"))return}else if(r.hasClass("tree-checkbox0"))return;!i&&0==a.onBeforeCheck.call(e,o,n)||(a.cascadeCheck?(function(t,e,n){var i=f.data(t,"tree").options,a=n?1:0;if(d(t,e,a),i.deepCheck)f.easyui.forEach(e.children||[],!0,function(e){d(t,e,a)});else{var o=[];e.children&&e.children.length&&o.push(e),f.easyui.forEach(e.children||[],!0,function(e){e.hidden||(d(t,e,a),e.children&&e.children.length&&o.push(e))});for(var r=o.length-1;0<=r;r--){var s=o[r];d(t,s,u(s))}}}(e,o,n),s(e,o)):d(e,o,n?"1":"0"),i||a.onCheck.call(e,o,n))}}}function d(e,t,n){e=f.data(e,"tree").options;t.checkState&&null!=n&&(t.hidden&&!e.deepCheck||(e=f("#"+t.domId).find(".tree-checkbox"),t.checkState=["unchecked","checked","indeterminate"][n],t.checked="checked"==t.checkState,e.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),e.addClass("tree-checkbox"+n)))}function s(e,t){t=w(e,f("#"+t.domId)[0]);t&&(d(e,t,u(t)),s(e,t))}function u(e){var t=0,n=0,i=0;if(f.easyui.forEach(e.children||[],!1,function(e){e.checkState&&(i++,"checked"==e.checkState?n++:"unchecked"==e.checkState&&t++)}),0!=i)return t==i?0:n==i?1:2}function p(e,t,n,i,a){var o=f.data(e,"tree"),r=o.options,s=f(t).prevAll("div.tree-node:first");n=r.loadFilter.call(e,n,s[0]);s=$(e,"domId",s.attr("id"));i?s?s.children?s.children=s.children.concat(n):s.children=n:o.data=o.data.concat(n):(s?s.children=n:o.data=n,f(t).empty()),r.view.render.call(r.view,e,t,n),r.dnd&&l(e),s&&v(e,s);for(var d=0;d<o.tmpIds.length;d++)c(e,f("#"+o.tmpIds[d])[0],!0,!0);o.tmpIds=[],setTimeout(function(){h(e,e)},0),a||r.onLoadSuccess.call(e,s,n)}function h(a,e,o){var t;f.data(a,"tree").options.lines?(f(a).addClass("tree-lines"),o||(o=!0,f(a).find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom"),f(a).find("div.tree-node").removeClass("tree-node-last tree-root-first tree-root-one"),1<(t=f(a).tree("getRoots")).length?f(t[0].target).addClass("tree-root-first"):1==t.length&&f(t[0].target).addClass("tree-root-one")),f(e).children("li").each(function(){var e,t,n=f(this).children("div.tree-node"),i=n.next("ul");i.length?(f(this).next().length&&(t=(e=n).find("span.tree-indent, span.tree-hit").length,e.next().find("div.tree-node").each(function(){f(this).children("span:eq("+(t-1)+")").addClass("tree-line")})),h(a,i,o)):n.find("span.tree-icon").prev("span.tree-indent").addClass("tree-join")}),f(e).children("li:last").children("div.tree-node").addClass("tree-node-last").children("span.tree-join").removeClass("tree-join").addClass("tree-joinbottom")):f(a).removeClass("tree-lines")}function g(t,n,e,i){var a=f.data(t,"tree").options;e=f.extend({},a.queryParams,e||{});var o,r,s=null;t!=n&&(o=f(n).prev(),s=y(t,o[0])),0!=a.onBeforeLoad.call(t,s,e)&&((r=f(n).prev().children("span.tree-folder")).addClass("tree-loading"),0==a.loader.call(t,e,function(e){r.removeClass("tree-loading"),p(t,n,e),i&&i()},function(){r.removeClass("tree-loading"),a.onLoadError.apply(t,arguments),i&&i()})&&r.removeClass("tree-loading"))}function b(e,t,n){var i,a,o=f.data(e,"tree").options,r=f(t).children("span.tree-hit");0!=r.length&&(r.hasClass("tree-expanded")||(i=y(e,t),0!=o.onBeforeExpand.call(e,i)&&(r.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),r.next().addClass("tree-folder-open"),(r=f(t).next()).length?o.animate?r.slideDown("normal",function(){i.state="open",o.onExpand.call(e,i),n&&n()}):(r.css("display","block"),i.state="open",o.onExpand.call(e,i),n&&n()):(a=f('<ul style="display:none"></ul>').insertAfter(t),g(e,a[0],{id:i.id},function(){a.is(":empty")&&a.remove(),o.animate?a.slideDown("normal",function(){i.state="open",o.onExpand.call(e,i),n&&n()}):(a.css("display","block"),i.state="open",o.onExpand.call(e,i),n&&n())})))))}function a(e,t){var n,i=f.data(e,"tree").options,a=f(t).children("span.tree-hit");0!=a.length&&(a.hasClass("tree-collapsed")||(n=y(e,t),0!=i.onBeforeCollapse.call(e,n)&&(a.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),a.next().removeClass("tree-folder-open"),t=f(t).next(),i.animate?t.slideUp("normal",function(){n.state="closed",i.onCollapse.call(e,n)}):(t.css("display","none"),n.state="closed",i.onCollapse.call(e,n)))))}function o(e,t){var n=f(t).children("span.tree-hit");0!=n.length&&(n.hasClass("tree-expanded")?a:b)(e,t)}function m(e,t){var n,i=f(t.parent),a=t.data;a&&(a=f.isArray(a)?a:[a]).length&&(0==i.length?n=f(e):(S(0,i[0])&&((t=i.find("span.tree-icon")).removeClass("tree-file").addClass("tree-folder tree-folder-open"),(t=f('<span class="tree-hit tree-expanded"></span>').insertBefore(t)).prev().length&&t.prev().remove()),(n=i.next()).length||(n=f("<ul></ul>").insertAfter(i))),p(e,n[0],a,!0,!0))}function n(a,e){var t=function(e){for(var t=f(e).attr("id"),e=w(a,e),n=e?e.children:f.data(a,"tree").data,i=0;i<n.length;i++)if(n[i].domId==t){n.splice(i,1);break}return e}(e);f(e).parent().remove(),t&&(t.children&&t.children.length||((e=f(t.target)).find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),e.find(".tree-hit").remove(),f('<span class="tree-indent"></span>').prependTo(e),e.next().remove()),v(a,t)),h(a,a)}function v(e,t){var n,i,a=f.data(e,"tree").options,o=f(t.target),r=y(e,t.target);r.iconCls&&o.find(".tree-icon").removeClass(r.iconCls),f.extend(r,t),o.find(".tree-title").html(a.formatter.call(e,r)),r.iconCls&&o.find(".tree-icon").addClass(r.iconCls),n=e,a=t.target,(o=f.data(n,"tree").options).checkbox&&(e=(r=f(a)).find(".tree-checkbox"),t=y(n,a),o.view.hasCheckbox(n,t)?(e.length||(t.checkState=t.checkState||"unchecked",f('<span class="tree-checkbox"></span>').insertBefore(r.find(".tree-title"))),"checked"==t.checkState?c(n,a,!0,!0):"unchecked"==t.checkState||0===(i=u(t))?c(n,a,!1,!0):1===i&&c(n,a,!0,!0)):(e.remove(),t.checkState=void 0,t.checked=void 0,s(n,t)))}function r(e){for(var t=f.data(e,"tree").data,n=0;n<t.length;n++)k(t[n]);return t}function x(e,t){var n=[],t=y(e,t),e=t?t.children||[]:f.data(e,"tree").data;return f.easyui.forEach(e,!0,function(e){n.push(k(e))}),n}function w(e,t){return y(e,f(t).closest("ul").prevAll("div.tree-node:first")[0])}function y(e,t){return $(e,"domId",f(t).attr("id"))}function C(t,n){var i;i=f.isFunction(n)?n:(n="object"==typeof n?n:{id:n},function(e){for(var t in n)if(e[t]!=n[t])return!1;return!0});var a=null,e=f.data(t,"tree").data;return f.easyui.forEach(e,!0,function(e){if(1==i.call(t,e))return a=k(e),!1}),a}function $(e,t,n){var i={};return i[t]=n,C(e,i)}function k(e){return e.target=f("#"+e.domId)[0],e}function T(e,t){var n=f.data(e,"tree").options,i=y(e,t);0!=n.onBeforeSelect.call(e,i)&&(f(e).find("div.tree-node-selected").removeClass("tree-node-selected"),f(t).addClass("tree-node-selected"),n.onSelect.call(e,i))}function S(e,t){return 0==f(t).children("span.tree-hit").length}function _(e,t){var n=f.data(e,"tree").options;f(t).css("position","");var i=f(t).find("input.tree-editor"),a=i.val();i.remove();t=y(e,t);t.text=a,v(e,t),n.onAfterEdit.call(e,t)}function F(e,t){var n=f.data(e,"tree").options;f(t).css("position",""),f(t).find("input.tree-editor").remove();t=y(e,t);v(e,t),n.onCancelEdit.call(e,t)}function i(n,t){var e,i=f.data(n,"tree"),a=i.options,o={};for(e in f.easyui.forEach(i.data,!0,function(e){a.filter.call(n,t,e)?(f("#"+e.domId).removeClass("tree-node-hidden"),o[e.domId]=1,e.hidden=!1):(f("#"+e.domId).addClass("tree-node-hidden"),e.hidden=!0)}),o)!function(e){var t=f(n).tree("getParent",f("#"+e)[0]);for(;t;)f(t.target).removeClass("tree-node-hidden"),t.hidden=!1,t=f(n).tree("getParent",t.target)}(e)}f.fn.tree=function(n,e){if("string"==typeof n)return f.fn.tree.methods[n](this,e);n=n||{};return this.each(function(){var e,i,a,t=f.data(this,"tree");t?(e=f.extend(t.options,n),t.options=e):(e=f.extend({},f.fn.tree.defaults,f.fn.tree.parseOptions(this),n),f.data(this,"tree",{options:e,tree:((t=f(t=this)).addClass("tree"),t),data:[],tmpIds:[]}),(t=f.fn.tree.parseData(this)).length&&p(this,this,t)),i=this,a=f.data(i,"tree").options,f(i).unbind().bind("mouseover",function(e){var t=f(e.target),n=t.closest("div.tree-node");n.length&&(n.addClass("tree-node-hover"),t.hasClass("tree-hit")&&(t.hasClass("tree-expanded")?t.addClass("tree-expanded-hover"):t.addClass("tree-collapsed-hover")),e.stopPropagation())}).bind("mouseout",function(e){var t=f(e.target),n=t.closest("div.tree-node");n.length&&(n.removeClass("tree-node-hover"),t.hasClass("tree-hit")&&(t.hasClass("tree-expanded")?t.removeClass("tree-expanded-hover"):t.removeClass("tree-collapsed-hover")),e.stopPropagation())}).bind("click",function(e){var t=f(e.target),n=t.closest("div.tree-node");if(n.length)return t.hasClass("tree-hit")?(o(i,n[0]),!1):t.hasClass("tree-checkbox")?(c(i,n[0]),!1):(T(i,n[0]),a.onClick.call(i,y(i,n[0])),void e.stopPropagation())}).bind("dblclick",function(e){var t=f(e.target).closest("div.tree-node");t.length&&(T(i,t[0]),a.onDblClick.call(i,y(i,t[0])),e.stopPropagation())}).bind("contextmenu",function(e){var t=f(e.target).closest("div.tree-node");t.length&&(a.onContextMenu.call(i,e,y(i,t[0])),e.stopPropagation())}),e.data&&p(this,this,f.extend(!0,[],e.data)),g(this,this)})},f.fn.tree.methods={options:function(e){return f.data(e[0],"tree").options},loadData:function(e,t){return e.each(function(){p(this,this,t)})},getNode:function(e,t){return y(e[0],t)},getData:function(e,t){return e=e[0],(t=y(e,t=t))&&t.children&&f.easyui.forEach(t.children,!0,function(e){k(e)}),t},reload:function(e,t){return e.each(function(){var e;t?((e=f(t)).children("span.tree-hit").removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),e.next().remove(),b(this,t)):(f(this).empty(),g(this,this))})},getRoot:function(e,t){return function(e,t){if(t){for(var n=w(e,t);n;)n=w(e,t=n.target);return y(e,t)}var i=r(e);return i.length?i[0]:null}(e[0],t)},getRoots:function(e){return r(e[0])},getParent:function(e,t){return w(e[0],t)},getChildren:function(e,t){return x(e[0],t)},getChecked:function(e,t){return function(e,t){f.isArray(t=t||"checked")||(t=[t]);var n=[];return f.easyui.forEach(f.data(e,"tree").data,!0,function(e){e.checkState&&-1!=f.easyui.indexOfArray(t,e.checkState)&&n.push(k(e))}),n}(e[0],t)},getSelected:function(e){return t=e[0],(e=f(t).find("div.tree-node-selected")).length?y(t,e[0]):null;var t},isLeaf:function(e,t){return S(e[0],t)},find:function(e,t){return C(e[0],t)},findBy:function(e,t){return $(e[0],t.field,t.value)},select:function(e,t){return e.each(function(){T(this,t)})},check:function(e,t){return e.each(function(){c(this,t,!0)})},uncheck:function(e,t){return e.each(function(){c(this,t,!1)})},collapse:function(e,t){return e.each(function(){a(this,t)})},expand:function(e,t){return e.each(function(){b(this,t)})},collapseAll:function(e,t){return e.each(function(){!function(e,t){var n=x(e,t);t&&n.unshift(y(e,t));for(var i=0;i<n.length;i++)a(e,n[i].target)}(this,t)})},expandAll:function(e,t){return e.each(function(){!function(e,t){var n=x(e,t);t&&n.unshift(y(e,t));for(var i=0;i<n.length;i++)b(e,n[i].target)}(this,t)})},expandTo:function(e,t){return e.each(function(){!function(e,t){for(var n=[],i=w(e,t);i;)n.unshift(i),i=w(e,i.target);for(var a=0;a<n.length;a++)b(e,n[a].target)}(this,t)})},scrollTo:function(e,t){return e.each(function(){!function(e,t){for(var n=f(e).parent();"BODY"!=n[0].tagName&&"auto"!=n.css("overflow-y");)n=n.parent();var i=f(t),e=i.offset().top;"BODY"!=n[0].tagName?e<(t=n.offset().top)?n.scrollTop(n.scrollTop()+e-t):e+i.outerHeight()>t+n.outerHeight()-18&&n.scrollTop(n.scrollTop()+e+i.outerHeight()-t-n.outerHeight()+18):n.scrollTop(e)}(this,t)})},toggle:function(e,t){return e.each(function(){o(this,t)})},append:function(e,t){return e.each(function(){m(this,t)})},insert:function(e,t){return e.each(function(){!function(e,t){var n=t.before||t.after,i=w(e,n),a=t.data;if(a&&(a=f.isArray(a)?a:[a]).length){m(e,{parent:i?i.target:null,data:a});for(var o=i?i.children:f(e).tree("getRoots"),r=0;r<o.length;r++)if(o[r].domId==f(n).attr("id")){for(var s=a.length-1;0<=s;s--)o.splice(t.before?r:r+1,0,a[s]);o.splice(o.length-a.length,a.length);break}for(var d=f(),r=0;r<a.length;r++)d=d.add(f("#"+a[r].domId).parent());t.before?d.insertBefore(f(n).parent()):d.insertAfter(f(n).parent())}}(this,t)})},remove:function(e,t){return e.each(function(){n(this,t)})},pop:function(e,t){var n=e.tree("getData",t);return e.tree("remove",t),n},update:function(e,t){return e.each(function(){v(this,f.extend({},t,{checkState:t.checked?"checked":!1===t.checked?"unchecked":void 0}))})},enableDnd:function(e){return e.each(function(){l(this)})},disableDnd:function(e){return e.each(function(){var e;e=this,f.data(e,"tree").options.dnd=!1,(e=f(e).find("div.tree-node")).draggable("disable"),e.css("cursor","pointer")})},beginEdit:function(e,r){return e.each(function(){var t,n,e,i,a,o;t=this,n=r,a=f.data(t,"tree").options,o=y(t,n),0!=a.onBeforeEdit.call(t,o)&&(f(n).css("position","relative"),e=(i=f(n).find(".tree-title")).outerWidth(),i.empty(),(i=f('<input class="tree-editor">').appendTo(i)).val(o.text).focus(),i.width(e+20),i._outerHeight(a.editorHeight),i.bind("click",function(e){return!1}).bind("mousedown",function(e){e.stopPropagation()}).bind("mousemove",function(e){e.stopPropagation()}).bind("keydown",function(e){return 13==e.keyCode?(_(t,n),!1):27==e.keyCode?(F(t,n),!1):void 0}).bind("blur",function(e){e.stopPropagation(),_(t,n)}))})},endEdit:function(e,t){return e.each(function(){_(this,t)})},cancelEdit:function(e,t){return e.each(function(){F(this,t)})},doFilter:function(e,t){return e.each(function(){i(this,t)})}},f.fn.tree.parseOptions=function(e){f(e);return f.extend({},f.parser.parseOptions(e,["url","method",{checkbox:"boolean",cascadeCheck:"boolean",onlyLeafCheck:"boolean"},{animate:"boolean",lines:"boolean",dnd:"boolean"}]))},f.fn.tree.parseData=function(e){var t=[];return function n(i,e){e.children("li").each(function(){var e=f(this),t=f.extend({},f.parser.parseOptions(this,["id","iconCls","state"]),{checked:!!e.attr("checked")||void 0});t.text=e.children("span").html(),t.text||(t.text=e.html());var e=e.children("ul");e.length&&(t.children=[],n(t.children,e)),i.push(t)})}(t,f(e)),t};var O=1,e={render:function(s,e,t){var d=f.data(s,"tree"),l=d.options,n=f(e).prev(".tree-node"),c=n.length?f(s).tree("getNode",n[0]):null,n=n.find("span.tree-indent, span.tree-hit").length,u=f(s).attr("id")||"",t=p.call(this,n,t);function p(e,t){for(var n=[],i=0;i<t.length;i++){var a=t[i];"open"!=a.state&&"closed"!=a.state&&(a.state="open"),a.domId=u+"_easyui_tree_"+O++,n.push("<li>"),n.push('<div id="'+a.domId+'" class="tree-node'+(a.nodeCls?" "+a.nodeCls:"")+'">');for(var o,r=0;r<e;r++)n.push('<span class="tree-indent"></span>');"closed"==a.state?(n.push('<span class="tree-hit tree-collapsed"></span>'),n.push('<span class="tree-icon tree-folder '+(a.iconCls||"")+'"></span>')):a.children&&a.children.length?(n.push('<span class="tree-hit tree-expanded"></span>'),n.push('<span class="tree-icon tree-folder tree-folder-open '+(a.iconCls||"")+'"></span>')):(n.push('<span class="tree-indent"></span>'),n.push('<span class="tree-icon tree-file '+(a.iconCls||"")+'"></span>')),this.hasCheckbox(s,a)?(o=0,c&&"checked"==c.checkState&&l.cascadeCheck?(o=1,a.checked=!0):a.checked&&f.easyui.addArrayItem(d.tmpIds,a.domId),a.checkState=o?"checked":"unchecked",n.push('<span class="tree-checkbox tree-checkbox'+o+'"></span>')):(a.checkState=void 0,a.checked=void 0),n.push('<span class="tree-title">'+l.formatter.call(s,a)+"</span>"),n.push("</div>"),a.children&&a.children.length&&(o=p.call(this,e+1,a.children),n.push('<ul style="display:'+("closed"==a.state?"none":"block")+'">'),(n=n.concat(o)).push("</ul>")),n.push("</li>")}return n}f(e).append(t.join(""))},hasCheckbox:function(e,t){var n=f.data(e,"tree").options;if(n.checkbox){if(f.isFunction(n.checkbox))return!!n.checkbox.call(e,t);if(!n.onlyLeafCheck)return!0;if(!("open"!=t.state||t.children&&t.children.length))return!0}return!1}};f.fn.tree.defaults={url:null,method:"post",animate:!1,checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,lines:!1,dnd:!1,editorHeight:26,data:null,queryParams:{},formatter:function(e){return e.text},filter:function(e,t){var n=[];f.map(f.isArray(e)?e:[e],function(e){(e=f.trim(e))&&n.push(e)});for(var i=0;i<n.length;i++)if(0<=t.text.toLowerCase().indexOf(n[i].toLowerCase()))return!0;return!n.length},loader:function(e,t,n){var i=f(this).tree("options");if(!i.url)return!1;f.ajax({type:i.method,url:i.url,data:e,dataType:"json",success:function(e){t(e)},error:function(){n.apply(this,arguments)}})},loadFilter:function(e,t){return e},view:e,onBeforeLoad:function(e,t){},onLoadSuccess:function(e,t){},onLoadError:function(){},onClick:function(e){},onDblClick:function(e){},onBeforeExpand:function(e){},onExpand:function(e){},onBeforeCollapse:function(e){},onCollapse:function(e){},onBeforeCheck:function(e,t){},onCheck:function(e,t){},onBeforeSelect:function(e){},onSelect:function(e){},onContextMenu:function(e,t){},onBeforeDrag:function(e){},onStartDrag:function(e){},onStopDrag:function(e){},onDragEnter:function(e,t){},onDragOver:function(e,t){},onDragLeave:function(e,t){},onBeforeDrop:function(e,t,n){},onDrop:function(e,t,n){},onBeforeEdit:function(e){},onAfterEdit:function(e){},onCancelEdit:function(e){}}}(jQuery),function(a){function i(e,t){var n=a.data(e,"progressbar").options,e=a.data(e,"progressbar").bar;t&&(n.width=t),e._size(n),e.find("div.progressbar-text").css("width",e.width()),e.find("div.progressbar-text,div.progressbar-value").css({height:e.height()+"px",lineHeight:e.height()+"px"})}a.fn.progressbar=function(t,e){if("string"==typeof t){var n=a.fn.progressbar.methods[t];if(n)return n(this,e)}return t=t||{},this.each(function(){var n,e=a.data(this,"progressbar");e?a.extend(e.options,t):e=a.data(this,"progressbar",{options:a.extend({},a.fn.progressbar.defaults,a.fn.progressbar.parseOptions(this),t),bar:(a(n=this).addClass("progressbar"),a(n).html('<div class="progressbar-text"></div><div class="progressbar-value"><div class="progressbar-text"></div></div>'),a(n).bind("_resize",function(e,t){return(a(this).hasClass("easyui-fluid")||t)&&i(n),!1}),a(n))}),a(this).progressbar("setValue",e.options.value),i(this)})},a.fn.progressbar.methods={options:function(e){return a.data(e[0],"progressbar").options},resize:function(e,t){return e.each(function(){i(this,t)})},getValue:function(e){return a.data(e[0],"progressbar").options.value},setValue:function(e,i){return 100<(i=i<0?0:i)&&(i=100),e.each(function(){var e=a.data(this,"progressbar").options,t=e.text.replace(/{value}/,i),n=e.value;e.value=i,a(this).find("div.progressbar-value").width(i+"%"),a(this).find("div.progressbar-text").html(t),n!=i&&e.onChange.call(this,i,n)})}},a.fn.progressbar.parseOptions=function(e){return a.extend({},a.parser.parseOptions(e,["width","height","text",{value:"number"}]))},a.fn.progressbar.defaults={width:"auto",height:22,value:0,text:"{value}%",onChange:function(e,t){}}}(jQuery),function(d){function s(e){e=d.data(e,"tooltip");e.showTimer&&(clearTimeout(e.showTimer),e.showTimer=null),e.hideTimer&&(clearTimeout(e.hideTimer),e.hideTimer=null)}function l(e,t){var n=d.data(e,"tooltip"),i=n.options;t&&(i.content=t),n.tip&&(t="function"==typeof i.content?i.content.call(e):i.content,n.tip.children(".tooltip-content").html(t),i.onUpdate.call(e,t))}d.fn.tooltip=function(i,e){return"string"==typeof i?d.fn.tooltip.methods[i](this,e):(i=i||{},this.each(function(){var t,n,e=d.data(this,"tooltip");e?d.extend(e.options,i):(d.data(this,"tooltip",{options:d.extend({},d.fn.tooltip.defaults,d.fn.tooltip.parseOptions(this),i)}),d(this).addClass("tooltip-f")),t=this,n=d.data(t,"tooltip").options,d(t).unbind(".tooltip").bind(n.showEvent+".tooltip",function(e){d(t).tooltip("show",e)}).bind(n.hideEvent+".tooltip",function(e){d(t).tooltip("hide",e)}).bind("mousemove.tooltip",function(e){n.trackMouse&&(n.trackMouseX=e.pageX,n.trackMouseY=e.pageY,d(t).tooltip("reposition"))}),l(this)}))},d.fn.tooltip.methods={options:function(e){return d.data(e[0],"tooltip").options},tip:function(e){return d.data(e[0],"tooltip").tip},arrow:function(e){return e.tooltip("tip").children(".tooltip-arrow-outer,.tooltip-arrow")},show:function(e,t){return e.each(function(){var i,a,e,o,r;i=this,a=t,e=d.data(i,"tooltip"),o=e.options,(r=e.tip)||(r=d('<div tabindex="-1" class="tooltip"><div class="tooltip-content"></div><div class="tooltip-arrow-outer"></div><div class="tooltip-arrow"></div></div>').appendTo("body"),e.tip=r,l(i)),s(i),e.showTimer=setTimeout(function(){d(i).tooltip("reposition"),r.show(),o.onShow.call(i,a);var e=r.children(".tooltip-arrow-outer"),t=r.children(".tooltip-arrow"),n="border-"+o.position+"-color";e.add(t).css({borderTopColor:"",borderBottomColor:"",borderLeftColor:"",borderRightColor:""}),e.css(n,r.css(n)),t.css(n,r.css("backgroundColor"))},o.showDelay)})},hide:function(e,i){return e.each(function(){var e,t,n;e=this,t=i,(n=d.data(e,"tooltip"))&&n.tip&&(s(e),n.hideTimer=setTimeout(function(){n.tip.hide(),n.options.onHide.call(e,t)},n.options.hideDelay))})},update:function(e,t){return e.each(function(){l(this,t)})},reposition:function(e){return e.each(function(){function e(e){r.position=e||"bottom",s.removeClass("tooltip-top tooltip-bottom tooltip-left tooltip-right").addClass("tooltip-"+r.position);var t,n,i,a=d.isFunction(r.deltaX)?r.deltaX.call(o,r.position):r.deltaX,e=d.isFunction(r.deltaY)?r.deltaY.call(o,r.position):r.deltaY;switch(i=r.trackMouse?(t=d(),n=r.trackMouseX+a,r.trackMouseY+e):(n=(t=d(o)).offset().left+a,t.offset().top+e),r.position){case"right":n+=t._outerWidth()+12+(r.trackMouse?12:0),"middle"==r.valign&&(i-=(s._outerHeight()-t._outerHeight())/2);break;case"left":n-=s._outerWidth()+12+(r.trackMouse?12:0),"middle"==r.valign&&(i-=(s._outerHeight()-t._outerHeight())/2);break;case"top":n-=(s._outerWidth()-t._outerWidth())/2,i-=s._outerHeight()+12+(r.trackMouse?12:0);break;case"bottom":n-=(s._outerWidth()-t._outerWidth())/2,i+=t._outerHeight()+12+(r.trackMouse?12:0)}return{left:n,top:i}}var o,r,s,t,n;o=this,(n=d.data(o,"tooltip"))&&n.tip&&(r=n.options,s=n.tip,t={left:-1e5,top:-1e5},d(o).is(":visible")&&(t=e(r.position),"top"==r.position&&t.top<0?t=e("bottom"):"bottom"==r.position&&t.top+s._outerHeight()>d(window)._outerHeight()+d(document).scrollTop()&&(t=e("top")),t.left<0?"left"==r.position?t=e("right"):(d(o).tooltip("arrow").css("left",s._outerWidth()/2+t.left),t.left=0):t.left+s._outerWidth()>d(window)._outerWidth()+d(document)._scrollLeft()&&("right"==r.position?t=e("left"):(n=t.left,t.left=d(window)._outerWidth()+d(document)._scrollLeft()-s._outerWidth(),d(o).tooltip("arrow").css("left",s._outerWidth()/2-(t.left-n))))),s.css({left:t.left,top:t.top,zIndex:null!=r.zIndex?r.zIndex:d.fn.window?d.fn.window.defaults.zIndex++:""}),r.onPosition.call(o,t.left,t.top))})},destroy:function(e){return e.each(function(){var e,t,n;e=this,(n=d.data(e,"tooltip"))&&(s(e),t=n.options,n.tip&&n.tip.remove(),t._title&&d(e).attr("title",t._title),d.removeData(e,"tooltip"),d(e).unbind(".tooltip").removeClass("tooltip-f"),t.onDestroy.call(e))})}},d.fn.tooltip.parseOptions=function(e){var t=d(e),e=d.extend({},d.parser.parseOptions(e,["position","showEvent","hideEvent","content",{trackMouse:"boolean",deltaX:"number",deltaY:"number",showDelay:"number",hideDelay:"number"}]),{_title:t.attr("title")});return t.attr("title",""),e.content||(e.content=e._title),e},d.fn.tooltip.defaults={position:"bottom",valign:"middle",content:null,trackMouse:!1,deltaX:0,deltaY:0,showEvent:"mouseenter",hideEvent:"mouseleave",showDelay:200,hideDelay:100,onShow:function(e){},onHide:function(e){},onUpdate:function(e){},onPosition:function(e,t){},onDestroy:function(){}}}(jQuery),function($){function removeNode(e){e._remove()}function setSize(e,t){var n=$.data(e,"panel"),i=n.options,a=n.panel,o=a.children(".panel-header"),r=a.children(".panel-body"),s=a.children(".panel-footer"),d="left"==i.halign||"right"==i.halign;t&&($.extend(i,{width:t.width,height:t.height,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,left:t.left,top:t.top}),i.hasResized=!1);var l=a.outerWidth(),c=a.outerHeight();a._size(i);var u,p,f,n=a.outerWidth(),t=a.outerHeight();i.hasResized&&l==n&&c==t||(i.hasResized=!0,d||o._outerWidth(a.width()),r._outerWidth(a.width()),isNaN(parseInt(i.height))?(r.css("height",""),u=$.parser.parseValue("minHeight",i.minHeight,a.parent()),p=$.parser.parseValue("maxHeight",i.maxHeight,a.parent()),f=o._outerHeight()+s._outerHeight()+a._outerHeight()-a.height(),r._size("minHeight",u?u-f:""),r._size("maxHeight",p?p-f:"")):d?(u=i.header?$(i.header)._outerWidth():(o.css("width",""),o._outerWidth()),p=o.find(".panel-title"),u+=Math.min(p._outerWidth(),p._outerHeight()),f=a.height(),o._outerWidth(u)._outerHeight(f),p._outerWidth(o.height()),r._outerWidth(a.width()-u-s._outerWidth())._outerHeight(f),s._outerHeight(f),r.css({left:"",right:""}),o.length&&r.css(i.halign,o.position()[i.halign]+u+"px"),i.panelCssWidth=a.css("width"),i.collapsed&&a._outerWidth(u+s._outerWidth())):r._outerHeight(a.height()-o._outerHeight()-s._outerHeight()),a.css({height:d?void 0:"",minHeight:"",maxHeight:"",left:i.left,top:i.top}),i.onResize.apply(e,[i.width,i.height]),$(e).panel("doLayout"))}function movePanel(e,t){var n=$.data(e,"panel"),i=n.options,n=n.panel;t&&(null!=t.left&&(i.left=t.left),null!=t.top&&(i.top=t.top)),n.css({left:i.left,top:i.top}),n.find(".tooltip-f").each(function(){$(this).tooltip("reposition")}),i.onMove.apply(e,[i.left,i.top])}function wrapPanel(n){$(n).addClass("panel-body")._size("clear");var e=$('<div class="panel"></div>').insertBefore(n);return e[0].appendChild(n),e.bind("_resize",function(e,t){return($(this).hasClass("easyui-fluid")||t)&&setSize(n,{}),!1}),e}function createPanel(target){var state=$.data(target,"panel"),opts=state.options,panel=state.panel;panel.css(opts.style),panel.addClass(opts.cls),panel.removeClass("panel-hleft panel-hright").addClass("panel-h"+opts.halign),_addHeader(),_addFooter();var header=$(target).panel("header"),body=$(target).panel("body"),footer=$(target).siblings(".panel-footer");function _addHeader(){var header,htitle,tool;opts.noheader||!opts.title&&!opts.header?(removeNode(panel.children(".panel-header")),panel.children(".panel-body").addClass("panel-body-noheader")):(opts.header?$(opts.header).addClass("panel-header").prependTo(panel):(header=panel.children(".panel-header"),header.length||(header=$('<div class="panel-header"></div>').prependTo(panel)),$.isArray(opts.tools)||header.find("div.panel-tool .panel-tool-a").appendTo(opts.tools),header.empty(),htitle=$('<div class="panel-title"></div>').html(opts.title).appendTo(header),opts.iconCls&&(htitle.addClass("panel-with-icon"),$('<div class="panel-icon"></div>').addClass(opts.iconCls).appendTo(header)),"left"!=opts.halign&&"right"!=opts.halign||htitle.addClass("panel-title-"+opts.titleDirection),tool=$('<div class="panel-tool"></div>').appendTo(header),tool.bind("click",function(e){e.stopPropagation()}),opts.tools&&($.isArray(opts.tools)?$.map(opts.tools,function(t){_buildTool(tool,t.iconCls,eval(t.handler))}):$(opts.tools).children().each(function(){$(this).addClass($(this).attr("iconCls")).addClass("panel-tool-a").appendTo(tool)})),opts.collapsible&&_buildTool(tool,"panel-tool-collapse",function(){(1==opts.collapsed?expandPanel:collapsePanel)(target,!0)}),opts.minimizable&&_buildTool(tool,"panel-tool-min",function(){minimizePanel(target)}),opts.maximizable&&_buildTool(tool,"panel-tool-max",function(){(1==opts.maximized?restorePanel:maximizePanel)(target)}),opts.closable&&_buildTool(tool,"panel-tool-close",function(){closePanel(target)})),panel.children("div.panel-body").removeClass("panel-body-noheader"))}function _buildTool(e,t,n){$('<a href="javascript:;"></a>').addClass(t).appendTo(e).bind("click",n)}function _addFooter(){opts.footer?($(opts.footer).addClass("panel-footer").appendTo(panel),$(target).addClass("panel-body-nobottom")):(panel.children(".panel-footer").remove(),$(target).removeClass("panel-body-nobottom"))}opts.border?(header.removeClass("panel-header-noborder"),body.removeClass("panel-body-noborder"),footer.removeClass("panel-footer-noborder")):(header.addClass("panel-header-noborder"),body.addClass("panel-body-noborder"),footer.addClass("panel-footer-noborder")),header.addClass(opts.headerCls),body.addClass(opts.bodyCls),$(target).attr("id",opts.id||""),opts.content&&($(target).panel("clear"),$(target).html(opts.content),$.parser.parse($(target)))}function loadData(n,e){var t,i=$.data(n,"panel"),a=i.options;a.href&&(i.isLoaded&&a.cache||(t=$.extend({},a.queryParams),0!=a.onBeforeLoad.call(n,t)&&(i.isLoaded=!1,a.loadingMessage&&($(n).panel("clear"),$(n).html($('<div class="panel-loading"></div>').html(a.loadingMessage))),a.loader.call(n,t,function(e){var t=a.extractor.call(n,e);$(n).panel("clear"),$(n).html(t),$.parser.parse($(n)),a.onLoad.apply(n,arguments),i.isLoaded=!0},function(){a.onLoadError.apply(n,arguments)}))))}function clearPanel(e){e=$(e);e.find(".combo-f").each(function(){$(this).combo("destroy")}),e.find(".m-btn").each(function(){$(this).menubutton("destroy")}),e.find(".s-btn").each(function(){$(this).splitbutton("destroy")}),e.find(".tooltip-f").each(function(){$(this).tooltip("destroy")}),e.children("div").each(function(){$(this)._size("unfit")}),e.empty()}function doLayout(e){$(e).panel("doLayout",!0)}function openPanel(e,t){var n=$.data(e,"panel"),i=n.options,a=n.panel;if(1==t||0!=i.onBeforeOpen.call(e))if(a.stop(!0,!0),$.isFunction(i.openAnimation))i.openAnimation.call(e,o);else switch(i.openAnimation){case"slide":a.slideDown(i.openDuration,o);break;case"fade":a.fadeIn(i.openDuration,o);break;case"show":a.show(i.openDuration,o);break;default:a.show(),o()}function o(){i.closed=!1,i.minimized=!1,a.children(".panel-header").find("a.panel-tool-restore").length&&(i.maximized=!0),i.onOpen.call(e),1==i.maximized&&(i.maximized=!1,maximizePanel(e)),1==i.collapsed&&(i.collapsed=!1,collapsePanel(e)),i.collapsed||!i.href||n.isLoaded&&i.cache||(loadData(e),doLayout(e),i.doneLayout=!0),i.doneLayout||(i.doneLayout=!0,doLayout(e))}}function closePanel(e,t){var n=$.data(e,"panel"),i=n.options,a=n.panel;if(1==t||0!=i.onBeforeClose.call(e))if(a.find(".tooltip-f").each(function(){$(this).tooltip("hide")}),a.stop(!0,!0),a._size("unfit"),$.isFunction(i.closeAnimation))i.closeAnimation.call(e,o);else switch(i.closeAnimation){case"slide":a.slideUp(i.closeDuration,o);break;case"fade":a.fadeOut(i.closeDuration,o);break;case"hide":a.hide(i.closeDuration,o);break;default:a.hide(),o()}function o(){i.closed=!0,i.onClose.call(e)}}function destroyPanel(e,t){var n=$.data(e,"panel"),i=n.options,n=n.panel;1!=t&&0==i.onBeforeDestroy.call(e)||($(e).panel("clear").panel("clear","footer"),removeNode(n),i.onDestroy.call(e))}function collapsePanel(e,t){var n=$.data(e,"panel").options,i=$.data(e,"panel").panel,a=i.children(".panel-body"),o=i.children(".panel-header"),r=o.find("a.panel-tool-collapse");function s(){a.hide(),n.collapsed=!0,n.onCollapse.call(e)}1!=n.collapsed&&(a.stop(!0,!0),0!=n.onBeforeCollapse.call(e)&&(r.addClass("panel-tool-expand"),1==t?"left"==n.halign||"right"==n.halign?i.animate({width:o._outerWidth()+i.children(".panel-footer")._outerWidth()},function(){s()}):a.slideUp("normal",function(){s()}):("left"!=n.halign&&"right"!=n.halign||i._outerWidth(o._outerWidth()+i.children(".panel-footer")._outerWidth()),s())))}function expandPanel(e,t){var n=$.data(e,"panel").options,i=$.data(e,"panel").panel,a=i.children(".panel-body"),o=i.children(".panel-header").find("a.panel-tool-collapse");function r(){a.show(),n.collapsed=!1,n.onExpand.call(e),loadData(e),doLayout(e)}0!=n.collapsed&&(a.stop(!0,!0),0!=n.onBeforeExpand.call(e)&&(o.removeClass("panel-tool-expand"),1==t?"left"==n.halign||"right"==n.halign?(a.show(),i.animate({width:n.panelCssWidth},function(){r()})):a.slideDown("normal",function(){r()}):("left"!=n.halign&&"right"!=n.halign||i.css("width",n.panelCssWidth),r())))}function maximizePanel(e){var t=$.data(e,"panel").options,n=$.data(e,"panel").panel.children(".panel-header").find("a.panel-tool-max");1!=t.maximized&&(n.addClass("panel-tool-restore"),$.data(e,"panel").original||($.data(e,"panel").original={width:t.width,height:t.height,left:t.left,top:t.top,fit:t.fit}),t.left=0,t.top=0,t.fit=!0,setSize(e),t.minimized=!1,t.maximized=!0,t.onMaximize.call(e))}function minimizePanel(e){var t=$.data(e,"panel").options,n=$.data(e,"panel").panel;n._size("unfit"),n.hide(),t.minimized=!0,t.maximized=!1,t.onMinimize.call(e)}function restorePanel(e){var t=$.data(e,"panel").options,n=$.data(e,"panel").panel,i=n.children(".panel-header").find("a.panel-tool-max");0!=t.maximized&&(n.show(),i.removeClass("panel-tool-restore"),$.extend(t,$.data(e,"panel").original),setSize(e),t.minimized=!1,t.maximized=!1,$.data(e,"panel").original=null,t.onRestore.call(e))}function setTitle(e,t){$.data(e,"panel").options.title=t,$(e).panel("header").find("div.panel-title").html(t)}$.fn._remove=function(){return this.each(function(){$(this).remove();try{this.outerHTML=""}catch(e){}})};var resizeTimer=null;$(window).unbind(".panel").bind("resize.panel",function(){resizeTimer&&clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){var e=$("body.layout");e.length?(e.layout("resize"),$("body").children(".easyui-fluid:visible").each(function(){$(this).triggerHandler("_resize")})):$("body").panel("doLayout"),resizeTimer=null},100)}),$.fn.panel=function(n,e){return"string"==typeof n?$.fn.panel.methods[n](this,e):(n=n||{},this.each(function(){var e,t=$.data(this,"panel");t?(e=$.extend(t.options,n),t.isLoaded=!1):(e=$.extend({},$.fn.panel.defaults,$.fn.panel.parseOptions(this),n),$(this).attr("title",""),t=$.data(this,"panel",{options:e,panel:wrapPanel(this),isLoaded:!1})),createPanel(this),$(this).show(),1==e.doSize&&(t.panel.css("display","block"),setSize(this)),1==e.closed||1==e.minimized?t.panel.hide():openPanel(this)}))},$.fn.panel.methods={options:function(e){return $.data(e[0],"panel").options},panel:function(e){return $.data(e[0],"panel").panel},header:function(e){return $.data(e[0],"panel").panel.children(".panel-header")},footer:function(e){return e.panel("panel").children(".panel-footer")},body:function(e){return $.data(e[0],"panel").panel.children(".panel-body")},setTitle:function(e,t){return e.each(function(){setTitle(this,t)})},open:function(e,t){return e.each(function(){openPanel(this,t)})},close:function(e,t){return e.each(function(){closePanel(this,t)})},destroy:function(e,t){return e.each(function(){destroyPanel(this,t)})},clear:function(e,t){return e.each(function(){clearPanel("footer"==t?$(this).panel("footer"):this)})},refresh:function(e,t){return e.each(function(){var e=$.data(this,"panel");e.isLoaded=!1,t&&("string"==typeof t?e.options.href=t:e.options.queryParams=t),loadData(this)})},resize:function(e,t){return e.each(function(){setSize(this,t||{})})},doLayout:function(e,t){return e.each(function(){function e(n,i){var a;n&&(a=n==$("body")[0],$(n).find("div.panel:visible,div.accordion:visible,div.tabs-container:visible,div.layout:visible,.easyui-fluid:visible").filter(function(e,t){t=$(t).parents(".panel-"+i+":first");return a?0==t.length:t[0]==n}).each(function(){$(this).triggerHandler("_resize",[t||!1])}))}e(this,"body"),e($(this).siblings(".panel-footer")[0],"footer")})},move:function(e,t){return e.each(function(){movePanel(this,t)})},maximize:function(e){return e.each(function(){maximizePanel(this)})},minimize:function(e){return e.each(function(){minimizePanel(this)})},restore:function(e){return e.each(function(){restorePanel(this)})},collapse:function(e,t){return e.each(function(){collapsePanel(this,t)})},expand:function(e,t){return e.each(function(){expandPanel(this,t)})}},$.fn.panel.parseOptions=function(e){var t=$(e),n=t.children(".panel-header,header"),i=t.children(".panel-footer,footer");return $.extend({},$.parser.parseOptions(e,["id","width","height","left","top","title","iconCls","cls","headerCls","bodyCls","tools","href","method","header","footer","halign","titleDirection",{cache:"boolean",fit:"boolean",border:"boolean",noheader:"boolean"},{collapsible:"boolean",minimizable:"boolean",maximizable:"boolean"},{closable:"boolean",collapsed:"boolean",minimized:"boolean",maximized:"boolean",closed:"boolean"},"openAnimation","closeAnimation",{openDuration:"number",closeDuration:"number"}]),{loadingMessage:null!=t.attr("loadingMessage")?t.attr("loadingMessage"):void 0,header:n.length?n.removeClass("panel-header"):void 0,footer:i.length?i.removeClass("panel-footer"):void 0})},$.fn.panel.defaults={id:null,title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:!0,fit:!1,border:!0,doSize:!0,noheader:!1,content:null,halign:"top",titleDirection:"down",collapsible:!1,minimizable:!1,maximizable:!1,closable:!1,collapsed:!1,minimized:!1,maximized:!1,closed:!1,openAnimation:!1,openDuration:400,closeAnimation:!1,closeDuration:400,tools:null,footer:null,header:null,queryParams:{},method:"get",loadingMessage:"Loading...",loader:function(e,t,n){var i=$(this).panel("options");if(!i.href)return!1;$.ajax({type:i.method,url:i.href,cache:!1,data:e,dataType:"html",success:function(e){t(e)},error:function(){n.apply(this,arguments)}})},extractor:function(e){var t=/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(e);return t?t[1]:e},onBeforeLoad:function(e){},onLoad:function(){},onLoadError:function(){},onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeDestroy:function(){},onDestroy:function(){},onResize:function(e,t){},onMove:function(e,t){},onMaximize:function(){},onRestore:function(){},onMinimize:function(){},onBeforeCollapse:function(){},onBeforeExpand:function(){},onCollapse:function(){},onExpand:function(){}}}(jQuery),function(s){function d(e,t){var n=s.data(e,"window");t&&(null!=t.left&&(n.options.left=t.left),null!=t.top&&(n.options.top=t.top)),s(e).panel("move",n.options),n.shadow&&n.shadow.css({left:n.options.left,top:n.options.top})}function l(e,t){var n=s.data(e,"window").options,i=s(e).window("panel"),a=i._outerWidth();n.inline?(i=i.parent(),n.left=Math.ceil((i.width()-a)/2+i.scrollLeft())):n.left=Math.ceil((s(window)._outerWidth()-a)/2+s(document).scrollLeft()),t&&d(e)}function c(e,t){var n=s.data(e,"window").options,i=s(e).window("panel"),a=i._outerHeight();n.inline?(i=i.parent(),n.top=Math.ceil((i.height()-a)/2+i.scrollTop())):n.top=Math.ceil((s(window)._outerHeight()-a)/2+s(document).scrollTop()),t&&d(e)}function u(e,t,n,i){var a=s.data(this,"window").options;if(!a.constrain)return{};if(s.isFunction(a.constrain))return a.constrain.call(this,e,t,n,i);var o=s(this).window("window"),a=a.inline?o.parent():s(window);return e<0&&(e=0),t<a.scrollTop()&&(t=a.scrollTop()),e+n>a.width()&&(n==o.outerWidth()?e=a.width()-n:n=a.width()-e),t-a.scrollTop()+i>a.height()&&(i==o.outerHeight()?t=a.height()-i+a.scrollTop():i=a.height()-t+a.scrollTop()),{left:e,top:t,width:n,height:i}}s(function(){s._positionFixed||s(window).resize(function(){s("body>div.window-mask:visible").css({width:"",height:""}),setTimeout(function(){s("body>div.window-mask:visible").css(s.fn.window.getMaskSize())},50)})}),s.fn.window=function(r,e){if("string"!=typeof r)return r=r||{},this.each(function(){var n,i,e=s.data(this,"window");function t(e){i.pmask&&i.pmask.remove(),i.pmask=s('<div class="window-proxy-mask"></div>').insertAfter(i.window),i.pmask.css({display:"none",zIndex:s.fn.window.defaults.zIndex++,left:e.data.left,top:e.data.top,width:i.window._outerWidth(),height:i.window._outerHeight()}),i.proxy&&i.proxy.remove(),i.proxy=s('<div class="window-proxy"></div>').insertAfter(i.window),i.proxy.css({display:"none",zIndex:s.fn.window.defaults.zIndex++,left:e.data.left,top:e.data.top}),i.proxy._outerWidth(e.data.width)._outerHeight(e.data.height),i.proxy.hide(),setTimeout(function(){i.pmask&&i.pmask.show(),i.proxy&&i.proxy.show()},500)}function a(e){s.extend(e.data,u.call(n,e.data.left,e.data.top,e.data.width,e.data.height)),i.pmask.show(),i.proxy.css({display:"block",left:e.data.left,top:e.data.top}),i.proxy._outerWidth(e.data.width),i.proxy._outerHeight(e.data.height)}function o(e,t){s.extend(e.data,u.call(n,e.data.left,e.data.top,e.data.width+.1,e.data.height+.1)),s(n).window(t,e.data),i.pmask.remove(),i.pmask=null,i.proxy.remove(),i.proxy=null}e?s.extend(e.options,r):(e=s.data(this,"window",{options:s.extend({},s.fn.window.defaults,s.fn.window.parseOptions(this),r)})).options.inline||document.body.appendChild(this),function(i){var a=s.data(i,"window"),o=a.options,e=s(i).panel(s.extend({},a.options,{border:!1,doSize:!0,closed:!0,cls:"window "+(o.border?"thin"==o.border?"window-thinborder ":"":"window-thinborder window-noborder ")+(o.cls||""),headerCls:"window-header "+(o.headerCls||""),bodyCls:"window-body "+(o.noheader?"window-body-noheader ":" ")+(o.bodyCls||""),onBeforeDestroy:function(){if(0==o.onBeforeDestroy.call(i))return!1;a.shadow&&a.shadow.remove(),a.mask&&a.mask.remove()},onClose:function(){a.shadow&&a.shadow.hide(),a.mask&&a.mask.hide(),o.onClose.call(i)},onOpen:function(){a.mask&&a.mask.css(s.extend({display:"block",zIndex:s.fn.window.defaults.zIndex++},s.fn.window.getMaskSize(i))),a.shadow&&a.shadow.css({display:"block",zIndex:s.fn.window.defaults.zIndex++,left:o.left,top:o.top,width:a.window._outerWidth(),height:a.window._outerHeight()}),a.window.css("z-index",s.fn.window.defaults.zIndex++),o.onOpen.call(i)},onResize:function(e,t){var n=s(this).panel("options");s.extend(o,{width:n.width,height:n.height,left:n.left,top:n.top}),a.shadow&&a.shadow.css({left:o.left,top:o.top,width:a.window._outerWidth(),height:a.window._outerHeight()}),o.onResize.call(i,e,t)},onMinimize:function(){a.shadow&&a.shadow.hide(),a.mask&&a.mask.hide(),a.options.onMinimize.call(i)},onBeforeCollapse:function(){if(0==o.onBeforeCollapse.call(i))return!1;a.shadow&&a.shadow.hide()},onExpand:function(){a.shadow&&a.shadow.show(),o.onExpand.call(i)}}));a.window=e.panel("panel"),a.mask&&a.mask.remove(),o.modal&&(a.mask=s('<div class="window-mask" style="display:none"></div>').insertAfter(a.window)),a.shadow&&a.shadow.remove(),o.shadow&&(a.shadow=s('<div class="window-shadow" style="display:none"></div>').insertAfter(a.window));var t=o.closed;null==o.left&&l(i),null==o.top&&c(i),d(i),t||e.window("open")}(this),n=this,(i=s.data(n,"window")).window.draggable({handle:">div.panel-header>div.panel-title",disabled:0==i.options.draggable,onBeforeDrag:function(e){i.mask&&i.mask.css("z-index",s.fn.window.defaults.zIndex++),i.shadow&&i.shadow.css("z-index",s.fn.window.defaults.zIndex++),i.window.css("z-index",s.fn.window.defaults.zIndex++)},onStartDrag:function(e){t(e)},onDrag:function(e){return a(e),!1},onStopDrag:function(e){o(e,"move")}}),i.window.resizable({disabled:0==i.options.resizable,onStartResize:function(e){t(e)},onResize:function(e){return a(e),!1},onStopResize:function(e){o(e,"resize")}})});var t=s.fn.window.methods[r];return t?t(this,e):this.panel(r,e)},s.fn.window.methods={options:function(e){var t=e.panel("options"),e=s.data(e[0],"window").options;return s.extend(e,{closed:t.closed,collapsed:t.collapsed,minimized:t.minimized,maximized:t.maximized})},window:function(e){return s.data(e[0],"window").window},move:function(e,t){return e.each(function(){d(this,t)})},hcenter:function(e){return e.each(function(){l(this,!0)})},vcenter:function(e){return e.each(function(){c(this,!0)})},center:function(e){return e.each(function(){l(this),c(this),d(this)})}},s.fn.window.getMaskSize=function(e){e=s(e).data("window");return e&&e.options.inline?{}:s._positionFixed?{position:"fixed"}:{width:s(document).width(),height:s(document).height()}},s.fn.window.parseOptions=function(e){return s.extend({},s.fn.panel.parseOptions(e),s.parser.parseOptions(e,[{draggable:"boolean",resizable:"boolean",shadow:"boolean",modal:"boolean",inline:"boolean"}]))},s.fn.window.defaults=s.extend({},s.fn.panel.defaults,{zIndex:9e3,draggable:!0,resizable:!0,shadow:!0,modal:!1,border:!0,inline:!1,title:"New Window",collapsible:!0,minimizable:!0,maximizable:!0,closable:!0,closed:!1,constrain:!1})}(jQuery),function($){function buildDialog(target){var opts=$.data(target,"dialog").options;opts.inited=!1,$(target).window($.extend({},opts,{onResize:function(e,t){opts.inited&&(setContentSize(this),opts.onResize.call(this,e,t))}}));var win=$(target).window("window");if(opts.toolbar)if($.isArray(opts.toolbar)){$(target).siblings("div.dialog-toolbar").remove();for(var toolbar=$('<div class="dialog-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').appendTo(win),tr=toolbar.find("tr"),i=0;i<opts.toolbar.length;i++){var btn=opts.toolbar[i],td,tool;"-"==btn?$('<td><div class="dialog-tool-separator"></div></td>').appendTo(tr):(td=$("<td></td>").appendTo(tr),tool=$('<a href="javascript:;"></a>').appendTo(td),tool[0].onclick=eval(btn.handler||function(){}),tool.linkbutton($.extend({},btn,{plain:!0})))}}else $(opts.toolbar).addClass("dialog-toolbar").appendTo(win),$(opts.toolbar).show();else $(target).siblings("div.dialog-toolbar").remove();if(opts.buttons)if($.isArray(opts.buttons)){$(target).siblings("div.dialog-button").remove();for(var buttons=$('<div class="dialog-button"></div>').appendTo(win),i=0;i<opts.buttons.length;i++){var p=opts.buttons[i],button=$('<a href="javascript:;"></a>').appendTo(buttons);p.handler&&(button[0].onclick=p.handler),button.linkbutton(p)}}else $(opts.buttons).addClass("dialog-button").appendTo(win),$(opts.buttons).show();else $(target).siblings("div.dialog-button").remove();opts.inited=!0;var closed=opts.closed;win.show(),$(target).window("resize",{}),closed&&win.hide()}function setContentSize(e,t){var n=$(e),i=n.dialog("options"),a=i.noheader,o=n.siblings(".dialog-toolbar"),r=n.siblings(".dialog-button");o.insertBefore(e).css({borderTopWidth:a?1:0,top:a?o.length:0}),r.insertAfter(e),o.add(r)._outerWidth(n._outerWidth()).find(".easyui-fluid:visible").each(function(){$(this).triggerHandler("_resize")});r=o._outerHeight()+r._outerHeight();isNaN(parseInt(i.height))?((i=n._size("min-height"))&&n._size("min-height",i-r),(i=n._size("max-height"))&&n._size("max-height",i-r)):n._outerHeight(n._outerHeight()-r);e=$.data(e,"window").shadow;e&&(n=n.panel("panel"),e.css({width:n._outerWidth(),height:n._outerHeight()}))}$.fn.dialog=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=$.data(this,"dialog");e?$.extend(e.options,t):$.data(this,"dialog",{options:$.extend({},$.fn.dialog.defaults,$.fn.dialog.parseOptions(this),t)}),buildDialog(this)});var n=$.fn.dialog.methods[t];return n?n(this,e):this.window(t,e)},$.fn.dialog.methods={options:function(e){var t=$.data(e[0],"dialog").options,e=e.panel("options");return $.extend(t,{width:e.width,height:e.height,left:e.left,top:e.top,closed:e.closed,collapsed:e.collapsed,minimized:e.minimized,maximized:e.maximized}),t},dialog:function(e){return e.window("window")}},$.fn.dialog.parseOptions=function(e){var t=$(e);return $.extend({},$.fn.window.parseOptions(e),$.parser.parseOptions(e,["toolbar","buttons"]),{toolbar:t.children(".dialog-toolbar").length?t.children(".dialog-toolbar").removeClass("dialog-toolbar"):void 0,buttons:t.children(".dialog-button").length?t.children(".dialog-button").removeClass("dialog-button"):void 0})},$.fn.dialog.defaults=$.extend({},$.fn.window.defaults,{title:"New Dialog",collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,toolbar:null,buttons:null})}(jQuery),function(o){function r(e){o(document).unbind(".messager").bind("keydown.messager",function(e){if(27==e.keyCode)o("body").children("div.messager-window").children("div.messager-body").each(function(){o(this).dialog("close")});else if(9==e.keyCode){var t=o("body").children("div.messager-window");if(t.length)for(var n=t.find(".messager-input,.messager-button .l-btn"),i=0;i<n.length;i++)if(o(n[i]).is(":focus"))return o(n[i>=n.length-1?0:i+1]).focus(),!1}else 13!=e.keyCode||(e=o(e.target).closest("input.messager-input")).length&&s(e.closest(".messager-body"),e.val())});var t=o('<div class="messager-body"></div>').appendTo("body");t.dialog(o.extend({},e,{noheader:!e.title,onClose:function(){o(document).unbind(".messager"),e.onClose&&e.onClose.call(this),t.dialog("destroy")}}));var n=t.dialog("dialog").addClass("messager-window").find(".dialog-button").addClass("messager-button");return n.find("a:first").focus().addClass("topjui-btn-red").find(".l-btn-left").addClass("l-btn-icon-left").append('<span class="l-btn-icon fa fa-check-circle">&nbsp;</span>'),n.find("a:eq(1)").addClass("topjui-btn-blue").find(".l-btn-left").addClass("l-btn-icon-left").append('<span class="l-btn-icon fa fa-check-circle">&nbsp;</span>'),t}function s(e,t){var n=e.dialog("options");e.dialog("close"),n.fn(t)}o.messager={show:function(e){return t=e,n=o.extend({},o.messager.defaults,{modal:!1,shadow:!1,draggable:!1,resizable:!1,closed:!0,style:{left:"",top:"",right:0,zIndex:o.fn.window.defaults.zIndex++,bottom:-document.body.scrollTop-document.documentElement.scrollTop},title:"",width:300,height:150,minHeight:0,showType:"slide",showSpeed:600,content:t.msg,timeout:4e3},t),(i=o('<div class="messager-body"></div>').appendTo("body")).dialog(o.extend({},n,{noheader:!n.title,openAnimation:n.showType,closeAnimation:"show"==n.showType?"hide":n.showType,openDuration:n.showSpeed,closeDuration:n.showSpeed,onOpen:function(){function e(){0<n.timeout&&(n.timer=setTimeout(function(){i.length&&i.data("dialog")&&i.dialog("close")},n.timeout))}i.dialog("dialog").hover(function(){n.timer&&clearTimeout(n.timer)},function(){e()}),e(),(t.onOpen?t:n).onOpen.call(this)},onClose:function(){n.timer&&clearTimeout(n.timer),(t.onClose?t:n).onClose.call(this),i.dialog("destroy")}})),i.dialog("dialog").css(n.style),i.dialog("open"),i;var t,n,i},alert:function(e,t,n,i){n="object"==typeof e?e:{title:e,msg:t,icon:n,fn:i},i=n.icon?"messager-icon "+n.icon:"";(n=o.extend({},o.messager.defaults,{content:'<div class="'+i+'"></div><div>'+n.msg+'</div><div style="clear:both;"/>'},n)).buttons||(n.buttons=[{text:n.ok,onClick:function(){s(a)}}]);var a=r(n);return a},confirm:function(e,t,n){n="object"==typeof e?e:{title:e,msg:t,fn:n};(n=o.extend({},o.messager.defaults,{content:'<div class="messager-icon '+topJUI.language.message.icon.question+'"></div><div>'+n.msg+'</div><div style="clear:both;"/>'},n)).buttons||(n.buttons=[{text:n.ok,onClick:function(){s(i,!0)}},{text:n.cancel,onClick:function(){s(i,!1)}}]);var i=r(n);return i},prompt:function(e,t,n){n="object"==typeof e?e:{title:e,msg:t,fn:n};(n=o.extend({},o.messager.defaults,{content:'<div class="messager-icon '+topJUI.language.message.icon.question+'"></div><div>'+n.msg+'</div><br/><div style="clear:both;"/><div><input class="messager-input" type="text"/></div>'},n)).buttons||(n.buttons=[{text:n.ok,onClick:function(){s(i,i.find(".messager-input").val())}},{text:n.cancel,onClick:function(){s(i)}}]);var i=r(n);return i.find(".messager-input").focus(),i},progress:function(e){var t={bar:function(){return o("body>div.messager-window").find("div.messager-p-bar")},close:function(){var e=o("body>div.messager-window>div.messager-body:has(div.messager-progress)");e.length&&e.dialog("close")}};if("string"==typeof e)return(0,t[e])();var n=o.extend({},{title:"",minHeight:0,content:void 0,msg:"",text:void 0,interval:300},e=e||{}),t=r(o.extend({},o.messager.defaults,{content:'<div class="messager-progress"><div class="messager-p-msg">'+n.msg+'</div><div class="messager-p-bar"></div></div>',closable:!1,doSize:!1},n,{onClose:function(){this.timer&&clearInterval(this.timer),(e.onClose?e:o.messager.defaults).onClose.call(this)}})),i=t.find("div.messager-p-bar");return i.progressbar({text:n.text}),t.dialog("resize"),n.interval&&(t[0].timer=setInterval(function(){var e=i.progressbar("getValue");i.progressbar("setValue",e=100<(e+=10)?0:e)},n.interval)),t}},o.messager.defaults=o.extend({},o.fn.dialog.defaults,{ok:"Ok",cancel:"Cancel",width:300,height:"auto",minHeight:150,modal:!0,collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,fn:function(){}})}(jQuery),function(u){function r(e,t){var n=u.data(e,"accordion"),i=n.options,s=n.panels,d=u(e),l="left"==i.halign||"right"==i.halign;d.children(".panel-last").removeClass("panel-last"),d.children(".panel:last").addClass("panel-last"),t&&u.extend(i,{width:t.width,height:t.height}),d._size(i);var c=0,e="auto",t=d.find(">.panel>.accordion-header");function a(e,t){for(var n=0,i=0;i<s.length;i++){var a,o,r=s[i];a=l?r.panel("header")._outerWidth(c):r.panel("header")._outerHeight(c),r.panel("options").collapsible==e&&(o=isNaN(t)?void 0:t+c*a.length,l?(r.panel("resize",{height:d.height(),width:e?o:void 0}),n+=r.panel("panel")._outerWidth()-c*a.length):(r.panel("resize",{width:d.width(),height:e?o:void 0}),n+=r.panel("panel").outerHeight()-c*a.length))}return n}t.length&&(c=l?(u(t[0]).next().panel("resize",{width:d.width(),height:d.height()}),u(t[0])._outerWidth()):u(t[0]).css("height","")._outerHeight()),a(!0,(e=!isNaN(parseInt(i.height))?l?d.width()-c*t.length:d.height()-c*t.length:e)-a(!1))}function o(e,t,n,i){for(var a=u.data(e,"accordion").panels,o=[],r=0;r<a.length;r++){var s=a[r];if(t)s.panel("options")[t]==n&&o.push(s);else if(s[0]==u(n)[0])return r}return t?i?o:o.length?o[0]:null:-1}function s(e){return o(e,"collapsed",!1,!0)}function d(e){e=s(e);return e.length?e[0]:null}function l(e,t){return o(e,null,t)}function c(e,t){var n=u.data(e,"accordion").panels;return"number"==typeof t?t<0||t>=n.length?null:n[t]:o(e,"title",t)}function p(i,e,a){var o=u.data(i,"accordion").options;e.panel(u.extend({},{collapsible:!0,minimizable:!1,maximizable:!1,closable:!1,doSize:!1,collapsed:!0,headerCls:"accordion-header",bodyCls:"accordion-body",halign:o.halign},a,{onBeforeExpand:function(){if(a.onBeforeExpand&&0==a.onBeforeExpand.call(this))return!1;if(!o.multiple)for(var e=u.grep(s(i),function(e){return e.panel("options").collapsible}),t=0;t<e.length;t++)h(i,l(i,e[t]));var n=u(this).panel("header");n.addClass("accordion-header-selected"),n.find(".accordion-collapse").removeClass("accordion-expand")},onExpand:function(){u(i).find(">.panel-last>.accordion-header").removeClass("accordion-header-border"),a.onExpand&&a.onExpand.call(this),o.onSelect.call(i,u(this).panel("options").title,l(i,this))},onBeforeCollapse:function(){if(a.onBeforeCollapse&&0==a.onBeforeCollapse.call(this))return!1;u(i).find(">.panel-last>.accordion-header").addClass("accordion-header-border");var e=u(this).panel("header");e.removeClass("accordion-header-selected"),e.find(".accordion-collapse").addClass("accordion-expand")},onCollapse:function(){isNaN(parseInt(o.height))&&u(i).find(">.panel-last>.accordion-header").removeClass("accordion-header-border"),a.onCollapse&&a.onCollapse.call(this),o.onUnselect.call(i,u(this).panel("options").title,l(i,this))}}));var t=e.panel("header"),n=t.children("div.panel-tool");n.children("a.panel-tool-collapse").hide();n=u('<a href="javascript:;"></a>').addClass("accordion-collapse accordion-expand").appendTo(n);function r(e){var t=e.panel("options");t.collapsible&&(e=l(i,e),(t.collapsed?f:h)(i,e))}n.bind("click",function(){return r(e),!1}),e.panel("options").collapsible?n.show():n.hide(),"left"!=o.halign&&"right"!=o.halign||n.hide(),t.click(function(){return r(e),!1})}function f(e,t){t=c(e,t);t&&(g(e),e=u.data(e,"accordion").options,t.panel("expand",e.animate))}function h(e,t){t=c(e,t);t&&(g(e),e=u.data(e,"accordion").options,t.panel("collapse",e.animate))}function g(e){for(var t=u.data(e,"accordion").panels,n=0;n<t.length;n++)t[n].stop(!0,!0)}u.fn.accordion=function(a,e){return"string"==typeof a?u.fn.accordion.methods[a](this,e):(a=a||{},this.each(function(){var n,i,e,t=u.data(this,"accordion");t?u.extend(t.options,a):(u.data(this,"accordion",{options:u.extend({},u.fn.accordion.defaults,u.fn.accordion.parseOptions(this),a),accordion:u(this).addClass("accordion"),panels:[]}),n=this,i=u.data(n,"accordion"),(e=u(n)).addClass("accordion"),i.panels=[],e.children("div").each(function(){var e=u.extend({},u.parser.parseOptions(this),{selected:!!u(this).attr("selected")||void 0}),t=u(this);i.panels.push(t),p(n,t,e)}),e.bind("_resize",function(e,t){return(u(this).hasClass("easyui-fluid")||t)&&r(n),!1})),t=this,e=u.data(t,"accordion").options,t=u(t),e.border?t.removeClass("accordion-noborder"):t.addClass("accordion-noborder"),r(this),function(n){var i=u.data(n,"accordion").options;u(n).find(">.panel-last>.accordion-header").addClass("accordion-header-border");var e=o(n,"selected",!0);function t(e){var t=i.animate;i.animate=!1,f(n,e),i.animate=t}t(e?l(n,e):i.selected)}(this)}))},u.fn.accordion.methods={options:function(e){return u.data(e[0],"accordion").options},panels:function(e){return u.data(e[0],"accordion").panels},resize:function(e,t){return e.each(function(){r(this,t)})},getSelections:function(e){return s(e[0])},getSelected:function(e){return d(e[0])},getPanel:function(e,t){return c(e[0],t)},getPanelIndex:function(e,t){return l(e[0],t)},select:function(e,t){return e.each(function(){f(this,t)})},unselect:function(e,t){return e.each(function(){h(this,t)})},add:function(e,o){return e.each(function(){var e,t,n,i,a;e=this,t=o,n=u.data(e,"accordion"),i=n.options,a=n.panels,null==t.selected&&(t.selected=!0),g(e),n=u("<div></div>").appendTo(e),a.push(n),p(e,n,t),r(e),i.onAdd.call(e,t.title,a.length-1),t.selected&&f(e,a.length-1)})},remove:function(e,t){return e.each(function(){!function(e,t){var n=(o=u.data(e,"accordion")).options,i=o.panels;g(e);var a=c(e,t),o=a.panel("options").title,t=l(e,a);a&&0!=n.onBeforeRemove.call(e,o,t)&&(i.splice(t,1),a.panel("destroy"),i.length&&(r(e),d(e)||f(e,0)),n.onRemove.call(e,o,t))}(this,t)})}},u.fn.accordion.parseOptions=function(e){u(e);return u.extend({},u.parser.parseOptions(e,["width","height","halign",{fit:"boolean",border:"boolean",animate:"boolean",multiple:"boolean",selected:"number"}]))},u.fn.accordion.defaults={width:"auto",height:"auto",fit:!1,border:!0,animate:!0,multiple:!1,selected:0,halign:"top",onSelect:function(e,t){},onUnselect:function(e,t){},onAdd:function(e,t){},onBeforeRemove:function(e,t){},onRemove:function(e,t){}}}(jQuery),function($){function getContentWidth(e){var t=0;return $(e).children().each(function(){t+=$(this).outerWidth(!0)}),t}function setScrollers(e){var t=$.data(e,"tabs").options;if(t.showHeader){var n=$(e).children("div.tabs-header"),i=n.children("div.tabs-tool:not(.tabs-tool-hidden)"),a=n.children("div.tabs-scroller-left"),o=n.children("div.tabs-scroller-right"),e=n.children("div.tabs-wrap");if("left"==t.tabPosition||"right"==t.tabPosition){if(!i.length)return;i._outerWidth(n.width());var r={left:"left"==t.tabPosition?"auto":0,right:"left"==t.tabPosition?0:"auto",top:"top"==t.toolPosition?0:"auto",bottom:"top"==t.toolPosition?"auto":0},s={marginTop:"top"==t.toolPosition?i.outerHeight():0};return i.css(r),void e.css(s)}r=n.outerHeight();t.plain&&(r-=r-n.height()),i._outerHeight(r);s=getContentWidth(n.find("ul.tabs")),n=n.width()-i._outerWidth();n<s?(a.add(o).show()._outerHeight(r),"left"==t.toolPosition?(i.css({left:a.outerWidth(),right:""}),e.css({marginLeft:a.outerWidth()+i._outerWidth(),marginRight:o._outerWidth(),width:n-a.outerWidth()-o.outerWidth()})):(i.css({left:"",right:o.outerWidth()}),e.css({marginLeft:a.outerWidth(),marginRight:o.outerWidth()+i._outerWidth(),width:n-a.outerWidth()-o.outerWidth()}))):(a.add(o).hide(),"left"==t.toolPosition?(i.css({left:0,right:""}),e.css({marginLeft:i._outerWidth(),marginRight:0,width:n})):(i.css({left:"",right:0}),e.css({marginLeft:0,marginRight:i._outerWidth(),width:n})))}}function addTools(container){var opts=$.data(container,"tabs").options,header=$(container).children("div.tabs-header");if(opts.tools)if("string"==typeof opts.tools)$(opts.tools).addClass("tabs-tool").appendTo(header),$(opts.tools).show();else{header.children("div.tabs-tool").remove();for(var tools=$('<div class="tabs-tool"><table cellspacing="0" cellpadding="0" style="height:100%"><tr></tr></table></div>').appendTo(header),tr=tools.find("tr"),i=0;i<opts.tools.length;i++){var td=$("<td></td>").appendTo(tr),tool=$('<a href="javascript:;"></a>').appendTo(td);tool[0].onclick=eval(opts.tools[i].handler||function(){}),tool.linkbutton($.extend({},opts.tools[i],{plain:!0}))}}else header.children("div.tabs-tool").remove()}function setSize(e,t){var n,i,a,o,r=$.data(e,"tabs"),s=r.options,d=$(e);function l(e,t){var n=e.panel("options"),e=n.tab.find("a.tabs-inner");(t=t||parseInt(n.tabWidth||s.tabWidth||void 0))?e._outerWidth(t):e.css("width",""),e._outerHeight(s.tabHeight),e.css("lineHeight",e.height()+"px"),e.find(".easyui-fluid:visible").triggerHandler("_resize")}s.doSize&&(t&&$.extend(s,{width:t.width,height:t.height}),d._size(s),a=d.children("div.tabs-header"),i=d.children("div.tabs-panels"),(t=(n=a.find("div.tabs-wrap")).find(".tabs")).children("li").removeClass("tabs-first tabs-last"),t.children("li:first").addClass("tabs-first"),t.children("li:last").addClass("tabs-last"),"left"==s.tabPosition||"right"==s.tabPosition?(a._outerWidth(s.showHeader?s.headerWidth:0),i._outerWidth(d.width()-a.outerWidth()),a.add(i)._size("height",isNaN(parseInt(s.height))?"":d.height()),n._outerWidth(a.width()),t._outerWidth(n.width()).css("height","")):(a.children("div.tabs-scroller-left,div.tabs-scroller-right,div.tabs-tool:not(.tabs-tool-hidden)").css("display",s.showHeader?"block":"none"),a._outerWidth(d.width()).css("height",""),s.showHeader?(a.css("background-color",""),n.css("height","")):(a.css("background-color","transparent"),a._outerHeight(0),n._outerHeight(0)),t._outerHeight(s.tabHeight).css("width",""),t._outerHeight(t.outerHeight()-t.height()-1+s.tabHeight).css("width",""),i._size("height",isNaN(parseInt(s.height))?"":d.height()-a.outerHeight()),i._size("width",d.width())),r.tabs.length&&(i=t.outerWidth(!0)-t.width(),d=(d=t.children("li:first")).outerWidth(!0)-d.width(),a=a.width()-a.children(".tabs-tool:not(.tabs-tool-hidden)")._outerWidth(),o=Math.floor((a-i-d*r.tabs.length)/r.tabs.length),$.map(r.tabs,function(e){l(e,s.justified&&0<=$.inArray(s.tabPosition,["top","bottom"])?o:void 0)}),s.justified&&0<=$.inArray(s.tabPosition,["top","bottom"])&&(t=a-i-getContentWidth(t),l(r.tabs[r.tabs.length-1],o+t))),setScrollers(e))}function setSelectedSize(e){var t,n=$.data(e,"tabs").options,i=getSelectedTab(e);i&&(t=$(e).children("div.tabs-panels"),e="auto"==n.width?"auto":t.width(),t="auto"==n.height?"auto":t.height(),i.panel("resize",{width:e,height:t}))}function wrapTabs(n){$.data(n,"tabs").tabs;var e=$(n).addClass("tabs-container"),t=$('<div class="tabs-panels"></div>').insertBefore(e);e.children("div").each(function(){t[0].appendChild(this)}),e[0].appendChild(t[0]),$('<div class="tabs-header"><div class="tabs-scroller-left"></div><div class="tabs-scroller-right"></div><div class="tabs-wrap"><ul class="tabs"></ul></div></div>').prependTo(n),e.children("div.tabs-panels").children("div").each(function(e){var t=$.extend({},$.parser.parseOptions(this),{disabled:!!$(this).attr("disabled")||void 0,selected:!!$(this).attr("selected")||void 0});createTab(n,t,$(this))}),e.children("div.tabs-header").find(".tabs-scroller-left, .tabs-scroller-right").hover(function(){$(this).addClass("tabs-scroller-over")},function(){$(this).removeClass("tabs-scroller-over")}),e.bind("_resize",function(e,t){return($(this).hasClass("easyui-fluid")||t)&&(setSize(n),setSelectedSize(n)),!1})}function bindEvents(n){var i=$.data(n,"tabs"),a=i.options;function o(t){var n=0;return t.parent().children("li").each(function(e){if(t[0]==this)return n=e,!1}),n}$(n).children("div.tabs-header").unbind().bind("click",function(e){if($(e.target).hasClass("tabs-scroller-left"))$(n).tabs("scrollBy",-a.scrollIncrement);else{if(!$(e.target).hasClass("tabs-scroller-right")){var t=$(e.target).closest("li");return t.hasClass("tabs-disabled")?!1:($(e.target).closest("a.tabs-close").length?closeTab(n,o(t)):t.length&&(e=o(t),(!(t=i.tabs[e].panel("options")).collapsible||t.closed?selectTab:unselectTab)(n,e)),!1)}$(n).tabs("scrollBy",a.scrollIncrement)}}).bind("contextmenu",function(e){var t=$(e.target).closest("li");t.hasClass("tabs-disabled")||t.length&&a.onContextMenu.call(n,e,t.find("span.tabs-title").html(),o(t))})}function setProperties(e){var t=$.data(e,"tabs").options,n=$(e).children("div.tabs-header"),i=$(e).children("div.tabs-panels");n.removeClass("tabs-header-top tabs-header-bottom tabs-header-left tabs-header-right"),i.removeClass("tabs-panels-top tabs-panels-bottom tabs-panels-left tabs-panels-right"),"top"==t.tabPosition?n.insertBefore(i):"bottom"==t.tabPosition?(n.insertAfter(i),n.addClass("tabs-header-bottom"),i.addClass("tabs-panels-top")):"left"==t.tabPosition?(n.addClass("tabs-header-left"),i.addClass("tabs-panels-right")):"right"==t.tabPosition&&(n.addClass("tabs-header-right"),i.addClass("tabs-panels-left")),1==t.plain?n.addClass("tabs-header-plain"):n.removeClass("tabs-header-plain"),n.removeClass("tabs-header-narrow").addClass(t.narrow?"tabs-header-narrow":"");e=n.find(".tabs");e.removeClass("tabs-pill").addClass(t.pill?"tabs-pill":""),e.removeClass("tabs-narrow").addClass(t.narrow?"tabs-narrow":""),e.removeClass("tabs-justified").addClass(t.justified?"tabs-justified":""),1==t.border?(n.removeClass("tabs-header-noborder"),i.removeClass("tabs-panels-noborder")):(n.addClass("tabs-header-noborder"),i.addClass("tabs-panels-noborder")),t.doSize=!0}function createTab(o,r,e){r=r||{};var n=$.data(o,"tabs"),t=n.tabs;(null==r.index||r.index>t.length)&&(r.index=t.length),r.index<0&&(r.index=0);var i=$(o).children("div.tabs-header").find("ul.tabs"),a=$(o).children("div.tabs-panels"),s=$('<li><a href="javascript:;" class="tabs-inner"><span class="tabs-title"></span><span class="tabs-icon"></span></a></li>');e=e||$("<div></div>"),r.index>=t.length?(s.appendTo(i),e.appendTo(a),t.push(e)):(s.insertBefore(i.children("li:eq("+r.index+")")),e.insertBefore(a.children("div.panel:eq("+r.index+")")),t.splice(r.index,0,e)),e.panel($.extend({},r,{tab:s,border:!1,noheader:!0,closed:!0,doSize:!1,iconCls:r.icon||void 0,onLoad:function(){r.onLoad&&r.onLoad.apply(this,arguments),n.options.onLoad.call(o,$(this))},onBeforeOpen:function(){if(r.onBeforeOpen&&0==r.onBeforeOpen.call(this))return!1;var e=$(o).tabs("getSelected");if(e){if(e[0]==this)return setSelectedSize(o),!1;if($(o).tabs("unselect",getTabIndex(o,e)),e=$(o).tabs("getSelected"))return!1}var t=$(this).panel("options");t.tab.addClass("tabs-selected");var n=$(o).find(">div.tabs-header>div.tabs-wrap"),i=t.tab.position().left,e=i+t.tab.outerWidth();i<0||e>n.width()?(a=i-(n.width()-t.tab.width())/2,$(o).tabs("scrollBy",a)):$(o).tabs("scrollBy",0);var a=$(this).panel("panel");a.css("display","block"),setSelectedSize(o),a.css("display","none")},onOpen:function(){r.onOpen&&r.onOpen.call(this);var e=$(this).panel("options"),t=getTabIndex(o,this);n.selectHis.push(t),n.options.onSelect.call(o,e.title,t)},onBeforeClose:function(){if(r.onBeforeClose&&0==r.onBeforeClose.call(this))return!1;$(this).panel("options").tab.removeClass("tabs-selected")},onClose:function(){r.onClose&&r.onClose.call(this);var e=$(this).panel("options");n.options.onUnselect.call(o,e.title,getTabIndex(o,this))}})),$(o).tabs("update",{tab:e,options:e.panel("options"),type:"header"})}function addTab(e,t){var n=$.data(e,"tabs").options;null==t.selected&&(t.selected=!0),createTab(e,t),n.onAdd.call(e,t.title,t.index),t.selected&&selectTab(e,t.index)}function updateTab(e,t){t.type=t.type||"all";$.data(e,"tabs").selectHis;var n=t.tab,i=n.panel("options");i.title;if($.extend(i,t.options,{iconCls:t.options.icon||void 0}),"all"!=t.type&&"body"!=t.type||n.panel(),"all"==t.type||"header"==t.type){var a=i.tab;if(i.header)a.find(".tabs-inner").html($(i.header));else{var o=a.find("span.tabs-title"),t=a.find("span.tabs-icon");if(o.html(i.title),t.attr("class","tabs-icon"),a.find("a.tabs-close").remove(),i.closable?(o.addClass("tabs-closable"),$('<a href="javascript:;" class="tabs-close"></a>').appendTo(a)):o.removeClass("tabs-closable"),i.iconCls?(o.addClass("tabs-with-icon"),t.addClass(i.iconCls)):o.removeClass("tabs-with-icon"),i.tools){var r=a.find("span.tabs-p-tool");if(r.length||(r=$('<span class="tabs-p-tool"></span>').insertAfter(a.find("a.tabs-inner"))),$.isArray(i.tools)){r.empty();for(var s=0;s<i.tools.length;s++){var d=$('<a href="javascript:;"></a>').appendTo(r);d.addClass(i.tools[s].iconCls),i.tools[s].handler&&d.bind("click",{handler:i.tools[s].handler},function(e){$(this).parents("li").hasClass("tabs-disabled")||e.data.handler.call(this)})}}else $(i.tools).children().appendTo(r);t=12*r.children().length;i.closable?(t+=8,r.css("right","")):(t-=3,r.css("right","5px")),o.css("padding-right",t+"px")}else a.find("span.tabs-p-tool").remove(),o.css("padding-right","")}}i.disabled?i.tab.addClass("tabs-disabled"):i.tab.removeClass("tabs-disabled"),setSize(e),$.data(e,"tabs").options.onUpdate.call(e,i.title,getTabIndex(e,n))}function closeTab(e,t){var n=$.data(e,"tabs"),i=n.options,a=(n.tabs,n.selectHis);if(exists(e,t)){var o=getTab(e,t),r=o.panel("options").title,s=getTabIndex(e,o);if(0!=i.onBeforeClose.call(e,r,s)){(o=getTab(e,t,!0)).panel("options").tab.remove(),o.panel("destroy"),i.onClose.call(e,r,s),setSize(e);for(var d=[],l=0;l<a.length;l++){var c=a[l];c!=s&&d.push(s<c?c-1:c)}n.selectHis=d,!$(e).tabs("getSelected")&&d.length&&(s=n.selectHis.pop(),$(e).tabs("select",s))}}}function getTab(e,t,n){var i=$.data(e,"tabs").tabs,a=null;if("number"==typeof t)0<=t&&t<i.length&&(a=i[t],n&&i.splice(t,1));else{for(var o=$("<span></span>"),r=0;r<i.length;r++){var s=i[r];o.html(s.panel("options").title);var d=o.text();if(o.html(t),d==(t=o.text())){a=s,n&&i.splice(r,1);break}}o.remove()}return a}function getTabIndex(e,t){for(var n=$.data(e,"tabs").tabs,i=0;i<n.length;i++)if(n[i][0]==$(t)[0])return i;return-1}function getSelectedTab(e){for(var t=$.data(e,"tabs").tabs,n=0;n<t.length;n++){var i=t[n];if(i.panel("options").tab.hasClass("tabs-selected"))return i}return null}function doFirstSelect(e){for(var t=$.data(e,"tabs"),n=t.tabs,i=0;i<n.length;i++){var a=n[i].panel("options");if(a.selected&&!a.disabled)return void selectTab(e,i)}selectTab(e,t.options.selected)}function selectTab(e,t){t=getTab(e,t);t&&!t.is(":visible")&&(stopAnimate(e),t.panel("options").disabled||t.panel("open"))}function unselectTab(e,t){t=getTab(e,t);t&&t.is(":visible")&&(stopAnimate(e),t.panel("close"))}function stopAnimate(e){$(e).children("div.tabs-panels").each(function(){$(this).stop(!0,!0)})}function exists(e,t){return null!=getTab(e,t)}function showHeader(e,t){$.data(e,"tabs").options.showHeader=t,$(e).tabs("resize")}function showTool(e,t){var n=$(e).find(">.tabs-header>.tabs-tool");t?n.removeClass("tabs-tool-hidden").show():n.addClass("tabs-tool-hidden").hide(),$(e).tabs("resize").tabs("scrollBy",0)}$.fn.tabs=function(t,e){return"string"==typeof t?$.fn.tabs.methods[t](this,e):(t=t||{},this.each(function(){var e=$.data(this,"tabs");e?$.extend(e.options,t):($.data(this,"tabs",{options:$.extend({},$.fn.tabs.defaults,$.fn.tabs.parseOptions(this),t),tabs:[],selectHis:[]}),wrapTabs(this)),addTools(this),setProperties(this),setSize(this),bindEvents(this),doFirstSelect(this)}))},$.fn.tabs.methods={options:function(e){var t=e[0],n=$.data(t,"tabs").options,e=getSelectedTab(t);return n.selected=e?getTabIndex(t,e):-1,n},tabs:function(e){return $.data(e[0],"tabs").tabs},resize:function(e,t){return e.each(function(){setSize(this,t),setSelectedSize(this)})},add:function(e,t){return e.each(function(){addTab(this,t)})},close:function(e,t){return e.each(function(){closeTab(this,t)})},getTab:function(e,t){return getTab(e[0],t)},getTabIndex:function(e,t){return getTabIndex(e[0],t)},getSelected:function(e){return getSelectedTab(e[0])},select:function(e,t){return e.each(function(){selectTab(this,t)})},unselect:function(e,t){return e.each(function(){unselectTab(this,t)})},exists:function(e,t){return exists(e[0],t)},update:function(e,t){return e.each(function(){updateTab(this,t)})},enableTab:function(e,t){return e.each(function(){var e=$(this).tabs("getTab",t).panel("options");e.tab.removeClass("tabs-disabled"),e.disabled=!1})},disableTab:function(e,t){return e.each(function(){var e=$(this).tabs("getTab",t).panel("options");e.tab.addClass("tabs-disabled"),e.disabled=!0})},showHeader:function(e){return e.each(function(){showHeader(this,!0)})},hideHeader:function(e){return e.each(function(){showHeader(this,!1)})},showTool:function(e){return e.each(function(){showTool(this,!0)})},hideTool:function(e){return e.each(function(){showTool(this,!1)})},scrollBy:function(e,o){return e.each(function(){var e,t,n=$(this).tabs("options"),i=$(this).find(">div.tabs-header>div.tabs-wrap"),a=Math.min(i._scrollLeft()+o,(e=0,(t=i.children("ul")).children("li").each(function(){e+=$(this).outerWidth(!0)}),e-i.width()+(t.outerWidth()-t.width())));i.animate({scrollLeft:a},n.scrollDuration)})}},$.fn.tabs.parseOptions=function(e){return $.extend({},$.parser.parseOptions(e,["tools","toolPosition","tabPosition",{fit:"boolean",border:"boolean",plain:"boolean"},{headerWidth:"number",tabWidth:"number",tabHeight:"number",selected:"number"},{showHeader:"boolean",justified:"boolean",narrow:"boolean",pill:"boolean"}]))},$.fn.tabs.defaults={width:"auto",height:"auto",headerWidth:150,tabWidth:"auto",tabHeight:32,selected:0,showHeader:!0,plain:!1,fit:!1,border:!0,justified:!1,narrow:!1,pill:!1,tools:null,toolPosition:"right",tabPosition:"top",scrollIncrement:100,scrollDuration:400,onLoad:function(e){},onSelect:function(e,t){},onUnselect:function(e,t){},onBeforeClose:function(e,t){},onClose:function(e,t){},onAdd:function(e,t){},onUpdate:function(e,t){},onContextMenu:function(e,t,n){}}}(jQuery),function(p){var f=!1;function l(e,t){var n=p.data(e,"layout"),i=n.options,n=n.panels,a=p(e);t&&p.extend(i,{width:t.width,height:t.height}),"body"==e.tagName.toLowerCase()?a._size("fit"):a._size(i);var o={top:0,left:0,width:a.width(),height:a.height()};function r(e,t){var n,i;e.length&&g(e)&&(n=e.panel("options"),e.panel("resize",{width:a.width(),height:n.height}),i=e.panel("panel").outerHeight(),e.panel("move",{left:0,top:"n"==t?0:a.height()-i}),o.height-=i,"n"==t&&(o.top+=i,!n.split&&n.border&&o.top--),!n.split&&n.border&&o.height++)}function s(e,t){var n,i;e.length&&g(e)&&(n=e.panel("options"),e.panel("resize",{width:n.width,height:o.height}),i=e.panel("panel").outerWidth(),e.panel("move",{left:"e"==t?a.width()-i:0,top:o.top}),o.width-=i,"w"==t&&(o.left+=i,!n.split&&n.border&&o.left--),!n.split&&n.border&&o.width++)}r(g(n.expandNorth)?n.expandNorth:n.north,"n"),r(g(n.expandSouth)?n.expandSouth:n.south,"s"),s(g(n.expandEast)?n.expandEast:n.east,"e"),s(g(n.expandWest)?n.expandWest:n.west,"w"),n.center.panel("resize",o)}function r(n){var e=p(n);e.addClass("layout");var t=e.layout("options"),i=t.onAdd;t.onAdd=function(){},e.find(">div,>form>div").each(function(){var e,t;e=this,t=p.fn.layout.parsePanelOptions(e),0<="north,south,east,west,center".indexOf(t.region)&&a(n,t,e)}),t.onAdd=i,e.append('<div class="layout-split-proxy-h"></div><div class="layout-split-proxy-v"></div>'),e.bind("_resize",function(e,t){return(p(this).hasClass("easyui-fluid")||t)&&l(n),!1})}function a(r,e,t){e.region=e.region||"center";var n,i,s=p.data(r,"layout").panels,a=p(r),d=e.region;function o(e){var t="expand"+d.substring(0,1).toUpperCase()+d.substring(1),n=s.center,i="north"==d||"south"==d?"minHeight":"minWidth",a="north"==d||"south"==d?"maxHeight":"maxWidth",o="north"==d||"south"==d?"_outerHeight":"_outerWidth",a=p.parser.parseValue(a,s[d].panel("options")[a],p(r)),i=p.parser.parseValue(i,n.panel("options")[i],p(r)),i=n.panel("panel")[o]()-i;return g(s[t])?i+=s[t][o]()-1:i+=p(e)[o](),i=a<i?a:i}s[d].length||((n=p(t)).length||(n=p("<div></div>").appendTo(a)),t=p.extend({},p.fn.layout.paneldefaults,{width:n.length?parseInt(n[0].style.width)||n.outerWidth():"auto",height:n.length?parseInt(n[0].style.height)||n.outerHeight():"auto",doSize:!1,collapsible:!0,onOpen:function(){var e=p(this).panel("header").children("div.panel-tool");e.children("a.panel-tool-collapse").hide();var t,n={north:"up",south:"down",east:"right",west:"left"};n[d]&&((n=e.children("a."+(t="layout-button-"+n[d]))).length||(n=p('<a href="javascript:;"></a>').addClass(t).appendTo(e)).bind("click",{dir:d},function(e){return h(r,e.data.dir),!1}),p(this).panel("options").collapsible?n.show():n.hide())}},e,{cls:(e.cls||"")+" layout-panel layout-panel-"+d,bodyCls:(e.bodyCls||"")+" layout-body"}),n.panel(t),i=(s[d]=n).panel("panel"),n.panel("options").split&&i.addClass("layout-split-"+d),i.resizable(p.extend({},{handles:{north:"s",south:"n",east:"w",west:"e"}[d]||"",disabled:!n.panel("options").split,onStartResize:function(e){var t;f=!0,t=p("north"==d||"south"==d?">div.layout-split-proxy-v":">div.layout-split-proxy-h",r);var n={display:"block"};"north"==d?(n.top=parseInt(i.css("top"))+i.outerHeight()-t.height(),n.left=parseInt(i.css("left")),n.width=i.outerWidth(),n.height=t.height()):"south"==d?(n.top=parseInt(i.css("top")),n.left=parseInt(i.css("left")),n.width=i.outerWidth(),n.height=t.height()):"east"==d?(n.top=parseInt(i.css("top"))||0,n.left=parseInt(i.css("left"))||0,n.width=t.width(),n.height=i.outerHeight()):"west"==d&&(n.top=parseInt(i.css("top"))||0,n.left=i.outerWidth()-t.width(),n.width=t.width(),n.height=i.outerHeight()),t.css(n),p('<div class="layout-mask"></div>').css({left:0,top:0,width:a.width(),height:a.height()}).appendTo(a)},onResize:function(e){var t,n;return"north"==d||"south"==d?(t=o(this),p(this).resizable("options").maxHeight=t,n=p(">div.layout-split-proxy-v",r),t="north"==d?e.data.height-n.height():p(r).height()-e.data.height,n.css("top",t)):(t=o(this),p(this).resizable("options").maxWidth=t,n=p(">div.layout-split-proxy-h",r),e="west"==d?e.data.width-n.width():p(r).width()-e.data.width,n.css("left",e)),!1},onStopResize:function(e){a.children("div.layout-split-proxy-v,div.layout-split-proxy-h").hide(),n.panel("resize",e.data),l(r),f=!1,a.find(">div.layout-mask").remove()}},e)),a.layout("options").onAdd.call(r,d))}function h(s,d,e){null==e&&(e="normal");var t,n,i,l=p.data(s,"layout").panels,c=l[d],u=c.panel("options");function a(){var e=p(s),t=l.center.panel("options"),n=u.collapsedSize;if("east"==d){var i=c.panel("panel")._outerWidth(),a=t.width+i-n;return!u.split&&u.border||a++,{resizeC:{width:a},expand:{left:e.width()-i},expandP:{top:t.top,left:e.width()-n,width:n,height:t.height},collapse:{left:e.width(),top:t.top,height:t.height}}}if("west"==d){i=c.panel("panel")._outerWidth(),a=t.width+i-n;return!u.split&&u.border||a++,{resizeC:{width:a,left:n-1},expand:{left:0},expandP:{left:0,top:t.top,width:n,height:t.height},collapse:{left:-i,top:t.top,height:t.height}}}if("north"==d){var o=c.panel("panel")._outerHeight(),r=t.height;return g(l.expandNorth)||(r+=o-n+(u.split||!u.border?1:0)),l.east.add(l.west).add(l.expandEast).add(l.expandWest).panel("resize",{top:n-1,height:r}),{resizeC:{top:n-1,height:r},expand:{top:0},expandP:{top:0,left:0,width:e.width(),height:n},collapse:{top:-o,width:e.width()}}}if("south"==d){o=c.panel("panel")._outerHeight(),r=t.height;return g(l.expandSouth)||(r+=o-n+(u.split||!u.border?1:0)),l.east.add(l.west).add(l.expandEast).add(l.expandWest).panel("resize",{height:r}),{resizeC:{height:r},expand:{top:e.height()-o},expandP:{top:e.height()-n,left:0,width:e.width(),height:n},collapse:{top:e.height(),width:e.width()}}}}0!=u.onBeforeCollapse.call(c)&&(t="expand"+d.substring(0,1).toUpperCase()+d.substring(1),l[t]||(l[t]=function(e){var t="north"==u.region||"south"==u.region,n="layout-button-"+{east:"left",west:"right",north:"down",south:"up"}[e],i=p("<div></div>").appendTo(s);i.panel(p.extend({},p.fn.layout.paneldefaults,{cls:"layout-expand layout-expand-"+e,title:"&nbsp;",titleDirection:u.titleDirection,iconCls:u.hideCollapsedContent?null:u.iconCls,closed:!0,minWidth:0,minHeight:0,doSize:!1,region:u.region,collapsedSize:u.collapsedSize,noheader:!t&&u.hideExpandTool,tools:t&&u.hideExpandTool?null:[{iconCls:n,handler:function(){return o(s,d),!1}}],onResize:function(){var e,t,n=p(this).children(".layout-expand-title");n.length&&(n._outerWidth(p(this).height()),e=(p(this).width()-Math.min(n._outerWidth(),n._outerHeight()))/2,t=Math.max(n._outerWidth(),n._outerHeight()),n.hasClass("layout-expand-title-down")&&(e+=Math.min(n._outerWidth(),n._outerHeight()),t=0),n.css({left:e+"px",top:t+"px"}))}})),u.hideCollapsedContent||(n="function"==typeof u.collapsedContent?u.collapsedContent.call(i[0],u.title):u.collapsedContent,t?i.panel("setTitle",n):i.html(n));return i.panel("panel").hover(function(){p(this).addClass("layout-expand-over")},function(){p(this).removeClass("layout-expand-over")}),i}(d),n=l[t].panel("panel"),u.expandMode?n.bind("click",function(){var e;return"dock"==u.expandMode?o(s,d):(c.panel("expand",!1).panel("open"),e=a(),c.panel("resize",e.collapse),c.panel("panel").unbind(".layout").bind("mouseleave.layout",{region:d},function(e){p(this).stop(!0,!0),1!=f&&(p("body>div.combo-p>div.combo-panel:visible").length||h(s,e.data.region))}),c.panel("panel").animate(e.expand,function(){p(s).layout("options").onExpand.call(s,d)})),!1}):n.css("cursor","default")),i=a(),g(l[t])||l.center.panel("resize",i.resizeC),c.panel("panel").animate(i.collapse,e,function(){c.panel("collapse",!1).panel("close"),l[t].panel("open").panel("resize",i.expandP),p(this).unbind(".layout"),p(s).layout("options").onCollapse.call(s,d)}))}function o(e,t){var n,i,a,o=p.data(e,"layout").panels,r=o[t];0!=r.panel("options").onBeforeExpand.call(r)&&(n="expand"+t.substring(0,1).toUpperCase()+t.substring(1),o[n]&&(o[n].panel("close"),r.panel("panel").stop(!0,!0),r.panel("expand",!1).panel("open"),i=p(e),a=o.center.panel("options"),n="east"==t&&o.expandEast?{collapse:{left:i.width(),top:a.top,height:a.height},expand:{left:i.width()-r.panel("panel")._outerWidth()}}:"west"==t&&o.expandWest?{collapse:{left:-r.panel("panel")._outerWidth(),top:a.top,height:a.height},expand:{left:0}}:"north"==t&&o.expandNorth?{collapse:{top:-r.panel("panel")._outerHeight(),width:i.width()},expand:{top:0}}:"south"==t&&o.expandSouth?{collapse:{top:i.height(),width:i.width()},expand:{top:i.height()-r.panel("panel")._outerHeight()}}:void 0,r.panel("resize",n.collapse),r.panel("panel").animate(n.expand,function(){l(e),p(e).layout("options").onExpand.call(e,t)})))}function g(e){return e&&(e.length&&e.panel("panel").is(":visible"))}function n(e,t,n){var i=p(e).layout("panel",t);i.panel("options").split=n;t="layout-split-"+t,i=i.panel("panel").removeClass(t);n&&i.addClass(t),i.resizable({disabled:!n}),l(e)}p.fn.layout=function(o,e){return"string"==typeof o?p.fn.layout.methods[o](this,e):(o=o||{},this.each(function(){var n,e,i,t=p.data(this,"layout");function a(e){var t=i[e];t.length&&t.panel("options").collapsed&&h(n,e,0)}t?p.extend(t.options,o):(e=p.extend({},p.fn.layout.defaults,p.fn.layout.parseOptions(this),o),p.data(this,"layout",{options:e,panels:{center:p(),north:p(),south:p(),east:p(),west:p()}}),r(this)),l(this),n=this,e=(t=p.data(n,"layout")).options,i=t.panels,t=e.onCollapse,e.onCollapse=function(){},a("east"),a("west"),a("north"),a("south"),e.onCollapse=t}))},p.fn.layout.methods={options:function(e){return p.data(e[0],"layout").options},resize:function(e,t){return e.each(function(){l(this,t)})},panel:function(e,t){return p.data(e[0],"layout").panels[t]},collapse:function(e,t){return e.each(function(){h(this,t)})},expand:function(e,t){return e.each(function(){o(this,t)})},add:function(e,t){return e.each(function(){a(this,t),l(this),p(this).layout("panel",t.region).panel("options").collapsed&&h(this,t.region,0)})},remove:function(e,a){return e.each(function(){var e,t,n,i;e=this,t=a,(i=p.data(e,"layout").panels)[t].length&&(i[t].panel("destroy"),i[t]=p(),i[n="expand"+t.substring(0,1).toUpperCase()+t.substring(1)]&&(i[n].panel("destroy"),i[n]=void 0),p(e).layout("options").onRemove.call(e,t)),l(this)})},split:function(e,t){return e.each(function(){n(this,t,!0)})},unsplit:function(e,t){return e.each(function(){n(this,t,!1)})}},p.fn.layout.parseOptions=function(e){return p.extend({},p.parser.parseOptions(e,[{fit:"boolean"}]))},p.fn.layout.defaults={fit:!1,onExpand:function(e){},onCollapse:function(e){},onAdd:function(e){},onRemove:function(e){}},p.fn.layout.parsePanelOptions=function(e){p(e);return p.extend({},p.fn.panel.parseOptions(e),p.parser.parseOptions(e,["region",{split:"boolean",collpasedSize:"number",minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number"}]))},p.fn.layout.paneldefaults=p.extend({},p.fn.panel.defaults,{region:null,split:!1,collapsedSize:32,expandMode:"float",hideExpandTool:!1,hideCollapsedContent:!0,collapsedContent:function(e){var t=p(this).panel("options");if("north"==t.region||"south"==t.region)return e;var n=[];return t.iconCls&&n.push('<div class="panel-icon '+t.iconCls+'"></div>'),n.push('<div class="panel-title layout-expand-title'),n.push(" layout-expand-title-"+t.titleDirection),n.push(t.iconCls?" layout-expand-with-icon":""),n.push('">'),n.push(e),n.push("</div>"),n.join("")},minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4})}(jQuery),function($){function init(n){var e=$.data(n,"menu").options;$(n).addClass("menu-top"),e.inline?$(n).addClass("menu-inline"):$(n).appendTo("body"),$(n).bind("_resize",function(e,t){return($(this).hasClass("easyui-fluid")||t)&&$(n).menu("resize",n),!1});for(var t=function t(e){var n=[];e.addClass("menu");n.push(e);e.hasClass("menu-content")||e.children("div").each(function(){var e=$(this).children("div");e.length&&(e.appendTo("body"),this.submenu=e,e=t(e),n=n.concat(e))});return n}($(n)),i=0;i<t.length;i++)createMenu(n,t[i])}function createMenu(e,t){t=$(t).addClass("menu");t.data("menu")||t.data("menu",{options:$.parser.parseOptions(t[0],["width","height"])}),t.hasClass("menu-content")||(t.children("div").each(function(){createItem(e,this)}),$('<div class="menu-line"></div>').prependTo(t)),setMenuSize(e,t),t.hasClass("menu-inline")||t.hide(),bindMenuEvent(e,t)}function createItem(target,div,options){var item=$(div),itemOpts=$.extend({},$.parser.parseOptions(item[0],["id","name","iconCls","href",{separator:"boolean"}]),{disabled:!!item.attr("disabled")||void 0,text:$.trim(item.html()),onclick:item[0].onclick},options||{});itemOpts.onclick=itemOpts.onclick||itemOpts.handler||null,item.data("menuitem",{options:itemOpts}),itemOpts.separator&&item.addClass("menu-sep"),item.hasClass("menu-sep")||(item.addClass("menu-item"),item.empty().append($('<div class="menu-text"></div>').html(itemOpts.text)),itemOpts.iconCls&&$('<div class="menu-icon"></div>').addClass(itemOpts.iconCls).appendTo(item),itemOpts.id&&item.attr("id",itemOpts.id),itemOpts.onclick&&("string"==typeof itemOpts.onclick?item.attr("onclick",itemOpts.onclick):item[0].onclick=eval(itemOpts.onclick)),itemOpts.disabled&&setDisabled(target,item[0],!0),item[0].submenu&&$('<div class="menu-rightarrow"></div>').appendTo(item))}function setMenuSize(e,t){var n=$.data(e,"menu").options,i=t.attr("style")||"",a=t.is(":visible");t.css({display:"block",left:-1e4,height:"auto",overflow:"hidden"}),t.find(".menu-item").each(function(){$(this)._outerHeight(n.itemHeight),$(this).find(".menu-text").css({height:n.itemHeight-2+"px",lineHeight:n.itemHeight-2+"px"})}),t.removeClass("menu-noline").addClass(n.noline?"menu-noline":"");var o=t.data("menu").options,r=o.width,s=o.height;isNaN(parseInt(r))&&(r=0,t.find("div.menu-text").each(function(){r<$(this).outerWidth()&&(r=$(this).outerWidth())}),r=r?r+40:"");var d,l=t.outerHeight();isNaN(parseInt(s))&&(s=l,t.hasClass("menu-top")&&n.alignTo?(e=(d=$(n.alignTo)).offset().top-$(document).scrollTop(),d=$(window)._outerHeight()+$(document).scrollTop()-d.offset().top-d._outerHeight(),s=Math.min(s,Math.max(e,d))):s>$(window)._outerHeight()&&(s=$(window).height())),t.attr("style",i),t.show(),t._size($.extend({},o,{width:r,height:s,minWidth:o.minWidth||n.minWidth,maxWidth:o.maxWidth||n.maxWidth})),t.find(".easyui-fluid").triggerHandler("_resize",[!0]),t.css("overflow",t.outerHeight()<l?"auto":"hidden"),t.children("div.menu-line")._outerHeight(l-2),a||t.hide()}function bindMenuEvent(e,t){var n,i=$.data(e,"menu").options;for(n in t.unbind(".menu"),i.events)t.bind(n+".menu",{target:e},i.events[n])}function mouseenterHandler(e){e=e.data.target,e=$.data(e,"menu");e.timer&&(clearTimeout(e.timer),e.timer=null)}function mouseleaveHandler(e){var t=e.data.target,e=$.data(t,"menu");e.options.hideOnUnhover&&(e.timer=setTimeout(function(){hideAll(t,$(t).hasClass("menu-inline"))},e.options.duration))}function mouseoverHandler(e){var t=e.data.target,n=$(e.target).closest(".menu-item");n.length&&(n.siblings().each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}),n.addClass("menu-active"),n.hasClass("menu-item-disabled")?n.addClass("menu-active-disabled"):(e=n[0].submenu)&&$(t).menu("show",{menu:e,parent:n}))}function mouseoutHandler(e){var t,n=$(e.target).closest(".menu-item");n.length&&(n.removeClass("menu-active menu-active-disabled"),(t=n[0].submenu)?e.pageX>=parseInt(t.css("left"))?n.addClass("menu-active"):hideMenu(t):n.removeClass("menu-active"))}function clickHandler(e){var t,n=e.data.target,i=$(e.target).closest(".menu-item");i.length&&(t=$(n).data("menu").options,(e=i.data("menuitem").options).disabled||(i[0].submenu||(hideAll(n,t.inline),e.href&&(location.href=e.href)),i.trigger("mouseenter"),t.onClick.call(n,$(n).menu("getItem",i[0]))))}function hideAll(e,t){var n=$.data(e,"menu");n&&$(e).is(":visible")&&(hideMenu($(e)),t?$(e).show():n.options.onHide.call(e))}function showMenu(e,t){t=t||{};var n,i,a,o=$.data(e,"menu").options,r=$(t.menu||e);function s(e,t){return e=(e=e+r.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()?t?$(t).offset().top-r._outerHeight():$(window)._outerHeight()+$(document).scrollTop()-r.outerHeight():e)<0?0:e}$(e).menu("resize",r[0]),a=r.hasClass("menu-top")?($.extend(o,t),i=o.left,a=o.top,o.alignTo&&(i=(n=$(o.alignTo)).offset().left,a=n.offset().top+n._outerHeight(),"right"==o.align&&(i+=n.outerWidth()-r.outerWidth())),(i=i+r.outerWidth()>$(window)._outerWidth()+$(document)._scrollLeft()?$(window)._outerWidth()+$(document).scrollLeft()-r.outerWidth()-5:i)<0&&(i=0),s(a,o.alignTo)):((i=(t=t.parent).offset().left+t.outerWidth()-2)+r.outerWidth()+5>$(window)._outerWidth()+$(document).scrollLeft()&&(i=t.offset().left-r.outerWidth()+2),s(t.offset().top-3)),r.css(o.position.call(e,r[0],i,a)),r.show(0,function(){r[0].shadow||(r[0].shadow=$('<div class="menu-shadow"></div>').insertAfter(r)),r[0].shadow.css({display:r.hasClass("menu-inline")?"none":"block",zIndex:$.fn.menu.defaults.zIndex++,left:r.css("left"),top:r.css("top"),width:r.outerWidth(),height:r.outerHeight()}),r.css("z-index",$.fn.menu.defaults.zIndex++),r.hasClass("menu-top")&&o.onShow.call(e)})}function hideMenu(e){e&&e.length&&(function(e){e.stop(!0,!0),e[0].shadow&&e[0].shadow.hide();e.hide()}(e),e.find("div.menu-item").each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}))}function findItem(n,i){var a=null,o=$.isFunction(i)?i:function(e){for(var t in i)if(e[t]!=i[t])return!1;return!0};return function t(e){e.children("div.menu-item").each(function(){var e=$(this).data("menuitem").options;1==o.call(n,e)?a=$(n).menu("getItem",this):this.submenu&&!a&&t(this.submenu)})}($(n)),a}function setDisabled(e,t,n){var i=$(t);i.hasClass("menu-item")&&(((t=i.data("menuitem").options).disabled=n)?(i.addClass("menu-item-disabled"),i[0].onclick=null):(i.removeClass("menu-item-disabled"),i[0].onclick=t.onclick))}function appendItem(e,t){$.data(e,"menu").options;var n,i=$(e);t.parent&&(t.parent.submenu||(n=$("<div></div>").appendTo("body"),t.parent.submenu=n,$('<div class="menu-rightarrow"></div>').appendTo(t.parent),createMenu(e,n)),i=t.parent.submenu),createItem(e,$("<div></div>").appendTo(i),t)}function removeItem(e,t){!function e(t){var n;t.submenu&&(t.submenu.children("div.menu-item").each(function(){e(this)}),(n=t.submenu[0].shadow)&&n.remove(),t.submenu.remove()),$(t).remove()}(t)}function setVisible(e,t,n){var i=$(t).parent();n?$(t).show():$(t).hide(),setMenuSize(e,i)}function destroyMenu(e){$(e).children("div.menu-item").each(function(){removeItem(e,this)}),e.shadow&&e.shadow.remove(),$(e).remove()}$(function(){$(document).unbind(".menu").bind("mousedown.menu",function(e){$(e.target).closest("div.menu,div.combo-p").length||($("body>div.menu-top:visible").not(".menu-inline").menu("hide"),hideMenu($("body>div.menu:visible").not(".menu-inline")))})}),$.fn.menu=function(t,e){return"string"==typeof t?$.fn.menu.methods[t](this,e):(t=t||{},this.each(function(){var e=$.data(this,"menu");e?$.extend(e.options,t):(e=$.data(this,"menu",{options:$.extend({},$.fn.menu.defaults,$.fn.menu.parseOptions(this),t)}),init(this)),$(this).css({left:e.options.left,top:e.options.top})}))},$.fn.menu.methods={options:function(e){return $.data(e[0],"menu").options},show:function(e,t){return e.each(function(){showMenu(this,t)})},hide:function(e){return e.each(function(){hideAll(this)})},destroy:function(e){return e.each(function(){destroyMenu(this)})},setText:function(e,t){return e.each(function(){$(t.target).data("menuitem").options.text=t.text,$(t.target).children("div.menu-text").html(t.text)})},setIcon:function(e,t){return e.each(function(){$(t.target).data("menuitem").options.iconCls=t.iconCls,$(t.target).children("div.menu-icon").remove(),t.iconCls&&$('<div class="menu-icon"></div>').addClass(t.iconCls).appendTo(t.target)})},getItem:function(e,t){var n=$(t).data("menuitem").options;return $.extend({},n,{target:$(t)[0]})},findItem:function(e,t){return findItem(e[0],"string"==typeof t?function(e){return $("<div>"+e.text+"</div>").text()==t}:t)},appendItem:function(e,t){return e.each(function(){appendItem(this,t)})},removeItem:function(e,t){return e.each(function(){removeItem(this,t)})},enableItem:function(e,t){return e.each(function(){setDisabled(this,t,!1)})},disableItem:function(e,t){return e.each(function(){setDisabled(this,t,!0)})},showItem:function(e,t){return e.each(function(){setVisible(this,t,!0)})},hideItem:function(e,t){return e.each(function(){setVisible(this,t,!1)})},resize:function(e,t){return e.each(function(){setMenuSize(this,$(t||this))})}},$.fn.menu.parseOptions=function(e){return $.extend({},$.parser.parseOptions(e,[{minWidth:"number",itemHeight:"number",duration:"number",hideOnUnhover:"boolean"},{fit:"boolean",inline:"boolean",noline:"boolean"}]))},$.fn.menu.defaults={zIndex:11e4,left:0,top:0,alignTo:null,align:"left",minWidth:150,itemHeight:32,duration:100,hideOnUnhover:!0,inline:!1,fit:!1,noline:!1,events:{mouseenter:mouseenterHandler,mouseleave:mouseleaveHandler,mouseover:mouseoverHandler,mouseout:mouseoutHandler,click:clickHandler},position:function(e,t,n){return{left:t,top:n}},onShow:function(){},onHide:function(){},onClick:function(e){}}}(jQuery),function(d){var r=1;function n(e,t){var n=d(e).sidemenu("options");t&&d.extend(n,{width:t.width,height:t.height}),d(e)._size(n),d(e).find(".accordion").accordion("resize")}function s(t,e,n){var i=d(t).sidemenu("options"),a=d('<ul class="sidemenu-tree"></ul>').appendTo(e);a.tree({data:n,animate:i.animate,onBeforeSelect:function(e){if(e.children)return!1},onSelect:function(e){l(t,e.id,!0)},onExpand:function(e){c(t,e)},onCollapse:function(e){c(t,e)},onClick:function(e){e.children&&("open"==e.state?d(e.target).addClass("tree-node-nonleaf-collapsed"):d(e.target).removeClass("tree-node-nonleaf-collapsed"),d(this).tree("toggle",e.target))}}),a.unbind(".sidemenu").bind("mouseleave.sidemenu",function(){d(e).trigger("mouseleave")}),l(t,i.selectedItemId)}function o(e,t){d(e).find(".sidemenu-tree").each(function(){t(d(this))}),d(e).find(".tooltip-f").each(function(){var e=d(this).tooltip("tip");e&&(e.find(".sidemenu-tree").each(function(){t(d(this))}),d(this).tooltip("reposition"))})}function l(e,n,t){var i=null,a=d(e).sidemenu("options");o(e,function(e){e.find("div.tree-node-selected").removeClass("tree-node-selected");var t=e.tree("find",n);t&&(d(t.target).addClass("tree-node-selected"),a.selectedItemId=t.id,e.trigger("mouseleave.sidemenu"),i=t)}),t&&i&&a.onSelect.call(e,i)}function c(e,a){o(e,function(e){var t,n,i=e.tree("find",a.id);i&&(n=(t=e.tree("options")).animate,t.animate=!1,e.tree("open"==a.state?"expand":"collapse",i.target),t.animate=n)})}function i(e){var t=d(e).sidemenu("options");if(d(e).empty(),t.data){d.easyui.forEach(t.data,!0,function(e){e.id||(e.id="_easyui_sidemenu_"+r++),e.iconCls||(e.iconCls="sidemenu-default-icon"),e.children&&(e.nodeCls="tree-node-nonleaf",e.state||(e.state="closed"),"open"==e.state?e.nodeCls="tree-node-nonleaf":e.nodeCls="tree-node-nonleaf tree-node-nonleaf-collapsed")});var n=d("<div></div>").appendTo(e);n.accordion({fit:"auto"!=t.height,border:t.border,multiple:t.multiple});for(var i=t.data,a=0;a<i.length;a++){n.accordion("add",{title:i[a].text,selected:"open"==i[a].state,iconCls:i[a].iconCls,onBeforeExpand:function(){return!t.collapsed}});var o=n.accordion("panels")[a];s(e,o,i[a].children),function(n,e,t){var i=d(n).sidemenu("options");d(e).tooltip({content:d("<div></div>"),position:i.floatMenuPosition,valign:"top",data:t,onUpdate:function(e){var t=d(this).tooltip("options").data;e.accordion({width:i.floatMenuWidth,multiple:!1}).accordion("add",{title:t.text,collapsed:!1,collapsible:!1}),s(n,e.accordion("panels")[0],t.children)},onShow:function(){var e=d(this),t=e.tooltip("tip").addClass("sidemenu-tooltip");t.children(".tooltip-content").addClass("sidemenu"),t.find(".accordion").accordion("resize"),t.add(t.find("ul.tree")).unbind(".sidemenu").bind("mouseover.sidemenu",function(){e.tooltip("show")}).bind("mouseleave.sidemenu",function(){e.tooltip("hide")}),e.tooltip("reposition")},onPosition:function(e,t){var n=d(this).tooltip("tip");i.collapsed?t+n.outerHeight()>d(window)._outerHeight()+d(document).scrollTop()&&(t=d(window)._outerHeight()+d(document).scrollTop()-n.outerHeight(),n.css("top",t)):n.css({left:-999999})}})}(e,o.panel("header"),i[a])}}}function a(e,t){var n=d(e).sidemenu("options");n.collapsed=t;var i=d(e).find(".accordion"),a=i.accordion("panels");if(i.accordion("options").animate=!1,n.collapsed){d(e).addClass("sidemenu-collapsed");for(var o=0;o<a.length;o++)(s=a[o]).panel("options").collapsed?n.data[o].state="closed":(n.data[o].state="open",i.accordion("unselect",o)),(r=s.panel("header")).find(".panel-title").html(""),r.find(".panel-tool").hide()}else{d(e).removeClass("sidemenu-collapsed");for(o=0;o<a.length;o++){var r,s=a[o];"open"==n.data[o].state&&i.accordion("select",o),(r=s.panel("header")).find(".panel-title").html(s.panel("options").title),r.find(".panel-tool").show()}}i.accordion("options").animate=n.animate}d.fn.sidemenu=function(t,e){return"string"==typeof t?(0,d.fn.sidemenu.methods[t])(this,e):(t=t||{},this.each(function(){var e=d.data(this,"sidemenu");e?d.extend(e.options,t):(e=d.data(this,"sidemenu",{options:d.extend({},d.fn.sidemenu.defaults,d.fn.sidemenu.parseOptions(this),t)}),d(this).addClass("sidemenu")),n(this),i(this),a(this,e.options.collapsed)}))},d.fn.sidemenu.methods={options:function(e){return e.data("sidemenu").options},resize:function(e,t){return e.each(function(){n(this,t)})},collapse:function(e){return e.each(function(){a(this,!0)})},expand:function(e){return e.each(function(){a(this,!1)})},destroy:function(e){return e.each(function(){var e;d(e=this).find(".tooltip-f").each(function(){d(this).tooltip("destroy")}),d(e).remove()})}},d.fn.sidemenu.parseOptions=function(e){d(e);return d.extend({},d.parser.parseOptions(e,["width","height"]))},d.fn.sidemenu.defaults={width:200,height:"auto",border:!0,animate:!0,multiple:!0,collapsed:!1,data:null,floatMenuWidth:200,floatMenuPosition:"right",onSelect:function(e){}}}(jQuery),function(r){function s(i){var e=r.data(i,"menubutton").options,t=r(i),n=t.find("."+e.cls.trigger);(n=!n.length?t:n).unbind(".menubutton");var a=null;n.bind(e.showEvent+".menubutton",function(){if(!r(i).linkbutton("options").disabled)return a=setTimeout(function(){var e,t,n;!(n=r(e=i).menubutton("options")).disabled&&n.menu&&(r("body>div.menu-top").menu("hide"),t=r(e),(e=r(n.menu)).length&&(e.menu("options").alignTo=t,e.menu("show",{alignTo:t,align:n.menuAlign})),t.blur())},e.duration),!1}).bind(e.hideEvent+".menubutton",function(){a&&clearTimeout(a),r(e.menu).triggerHandler("mouseleave")})}r.fn.menubutton=function(o,e){if("string"!=typeof o)return o=o||{},this.each(function(){var e,n,i,t,a=r.data(this,"menubutton");a?r.extend(a.options,o):(r.data(this,"menubutton",{options:r.extend({},r.fn.menubutton.defaults,r.fn.menubutton.parseOptions(this),o)}),r(this)._propAttr("disabled",!1)),e=this,t=r.data(e,"menubutton").options,(a=r(e)).linkbutton(t),t.hasDownArrow&&(a.removeClass(t.cls.btn1+" "+t.cls.btn2).addClass("m-btn"),a.removeClass("m-btn-small m-btn-medium m-btn-large").addClass("m-btn-"+t.size),a=a.find(".l-btn-left"),r("<span></span>").addClass(t.cls.arrow).appendTo(a),r("<span></span>").addClass("m-btn-line").appendTo(a)),r(e).menubutton("resize"),t.menu&&(r(t.menu).menu({duration:t.duration}),t=r(t.menu).menu("options"),n=t.onShow,i=t.onHide,r.extend(t,{onShow:function(){var e=r(this).menu("options"),t=r(e.alignTo),e=t.menubutton("options");t.addClass(1==e.plain?e.cls.btn2:e.cls.btn1),n.call(this)},onHide:function(){var e=r(this).menu("options"),t=r(e.alignTo),e=t.menubutton("options");t.removeClass(1==e.plain?e.cls.btn2:e.cls.btn1),i.call(this)}})),s(this)});var t=r.fn.menubutton.methods[o];return t?t(this,e):this.linkbutton(o,e)},r.fn.menubutton.methods={options:function(e){var t=e.linkbutton("options");return r.extend(r.data(e[0],"menubutton").options,{toggle:t.toggle,selected:t.selected,disabled:t.disabled})},destroy:function(e){return e.each(function(){var e=r(this).menubutton("options");e.menu&&r(e.menu).menu("destroy"),r(this).remove()})}},r.fn.menubutton.parseOptions=function(e){r(e);return r.extend({},r.fn.linkbutton.parseOptions(e),r.parser.parseOptions(e,["menu",{plain:"boolean",hasDownArrow:"boolean",duration:"number"}]))},r.fn.menubutton.defaults=r.extend({},r.fn.linkbutton.defaults,{plain:!0,hasDownArrow:!0,menu:null,menuAlign:"left",duration:100,showEvent:"mouseenter",hideEvent:"mouseleave",cls:{btn1:"m-btn-active",btn2:"m-btn-plain-active",arrow:"m-btn-downarrow",trigger:"m-btn"}})}(jQuery),function(i){i.fn.splitbutton=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var e,t=i.data(this,"splitbutton");t?i.extend(t.options,n):(i.data(this,"splitbutton",{options:i.extend({},i.fn.splitbutton.defaults,i.fn.splitbutton.parseOptions(this),n)}),i(this)._propAttr("disabled",!1)),e=this,t=i.data(e,"splitbutton").options,i(e).menubutton(t),i(e).addClass("s-btn")});var t=i.fn.splitbutton.methods[n];return t?t(this,e):this.menubutton(n,e)},i.fn.splitbutton.methods={options:function(e){var t=e.menubutton("options"),e=i.data(e[0],"splitbutton").options;return i.extend(e,{disabled:t.disabled,toggle:t.toggle,selected:t.selected}),e}},i.fn.splitbutton.parseOptions=function(e){i(e);return i.extend({},i.fn.linkbutton.parseOptions(e),i.parser.parseOptions(e,["menu",{plain:"boolean",duration:"number"}]))},i.fn.splitbutton.defaults=i.extend({},i.fn.linkbutton.defaults,{plain:!0,menu:null,duration:100,cls:{btn1:"m-btn-active s-btn-active",btn2:"m-btn-plain-active s-btn-plain-active",arrow:"m-btn-downarrow",trigger:"m-btn-line"}})}(jQuery),function(u){var p=1;function f(e,t){var n=u.data(e,"switchbutton"),i=n.options,a=n.switchbutton;t&&u.extend(i,t);var o=a.is(":visible");o||a.appendTo("body"),a._size(i),i.label&&i.labelPosition&&("top"==i.labelPosition?n.label._size({width:i.labelWidth},a):(n.label._size({width:i.labelWidth,height:a.outerHeight()},a),n.label.css("lineHeight",a.outerHeight()+"px")));var r=a.width(),s=a.height(),r=a.outerWidth(),s=a.outerHeight(),t=parseInt(i.handleWidth)||a.height(),n=2*r-t;a.find(".switchbutton-inner").css({width:n+"px",height:s+"px",lineHeight:s+"px"}),a.find(".switchbutton-handle")._outerWidth(t)._outerHeight(s).css({marginLeft:-t/2+"px"}),a.find(".switchbutton-on").css({width:r-t/2+"px",textIndent:(i.reversed?"":"-")+t/2+"px"}),a.find(".switchbutton-off").css({width:r-t/2+"px",textIndent:(i.reversed?"-":"")+t/2+"px"}),i.marginWidth=r-t,h(e,i.checked,!1),o||a.insertAfter(e)}function h(e,t,n){var i=u.data(e,"switchbutton"),a=i.options,o=i.switchbutton.find(".switchbutton-inner"),r=o.find(".switchbutton-on"),s=a.reversed?t?a.marginWidth:0:t?0:a.marginWidth,i={};i["margin-"+r.css("float").toLowerCase()]=-s+"px",n?o.animate(i,200):o.css(i);o=o.find(".switchbutton-value");u(e).add(o)._propAttr("checked",t),a.checked!=t&&(a.checked=t,a.onChange.call(e,a.checked),u(e).closest("form").trigger("_change",[e]))}function g(e,t){var n=u.data(e,"switchbutton"),i=n.options,a=n.switchbutton,n=a.find(".switchbutton-value");t?(i.disabled=!0,u(e).add(n)._propAttr("disabled",!0),a.addClass("switchbutton-disabled"),a.removeAttr("tabindex")):(i.disabled=!1,u(e).add(n)._propAttr("disabled",!1),a.removeClass("switchbutton-disabled"),a.attr("tabindex",u(e).attr("tabindex")||""))}function b(e,t){var n=u.data(e,"switchbutton"),e=n.options;e.readonly=null==t||t,n.switchbutton.removeClass("switchbutton-readonly").addClass(e.readonly?"switchbutton-readonly":"")}u.fn.switchbutton=function(c,e){return"string"==typeof c?u.fn.switchbutton.methods[c](this,e):(c=c||{},this.each(function(){var e,t,n,i,a,o,r,s,d,l=u.data(this,"switchbutton");l?u.extend(l.options,c):l=u.data(this,"switchbutton",{options:u.extend({},u.fn.switchbutton.defaults,u.fn.switchbutton.parseOptions(this),c),switchbutton:function(n){var e=u('<span class="switchbutton"><span class="switchbutton-inner"><span class="switchbutton-on"></span><span class="switchbutton-handle"></span><span class="switchbutton-off"></span><input class="switchbutton-value" type="checkbox" tabindex="-1"></span></span>').insertAfter(n),t=u(n);t.addClass("switchbutton-f").hide();var i=t.attr("name");return i&&(t.removeAttr("name").attr("switchbuttonName",i),e.find(".switchbutton-value").attr("name",i)),e.bind("_resize",function(e,t){return(u(this).hasClass("easyui-fluid")||t)&&f(n),!1}),e}(this)}),l.options.originalChecked=l.options.checked,e=this,t=u.data(e,"switchbutton"),s=t.options,n=t.switchbutton,i=n.find(".switchbutton-inner"),a=i.find(".switchbutton-on").html(s.onText),o=i.find(".switchbutton-off").html(s.offText),l=i.find(".switchbutton-handle").html(s.handleText),s.reversed?(o.prependTo(i),a.insertAfter(l)):(a.prependTo(i),o.insertAfter(l)),l="_easyui_switchbutton_"+ ++p,n.find(".switchbutton-value")._propAttr("checked",s.checked).attr("id",l).unbind(".switchbutton").bind("change.switchbutton",function(e){return!1}),n.removeClass("switchbutton-reversed").addClass(s.reversed?"switchbutton-reversed":""),s.label?"object"==typeof s.label?(t.label=u(s.label),t.label.attr("for",l)):(u(t.label).remove(),t.label=u('<label class="textbox-label"></label>').html(s.label),t.label.css("textAlign",s.labelAlign).attr("for",l),"after"==s.labelPosition?t.label.insertAfter(n):t.label.insertBefore(e),t.label.removeClass("textbox-label-left textbox-label-right textbox-label-top"),t.label.addClass("textbox-label-"+s.labelPosition)):u(t.label).remove(),h(e,s.checked),b(e,s.readonly),g(e,s.disabled),u(e).switchbutton("setValue",s.value),f(this),r=this,s=u.data(r,"switchbutton"),d=s.options,s.switchbutton.unbind(".switchbutton").bind("click.switchbutton",function(){d.disabled||d.readonly||h(r,!d.checked,!0)}).bind("keydown.switchbutton",function(e){if(!(13!=e.which&&32!=e.which||d.disabled||d.readonly))return h(r,!d.checked,!0),!1})}))},u.fn.switchbutton.methods={options:function(e){e=e.data("switchbutton");return u.extend(e.options,{value:e.switchbutton.find(".switchbutton-value").val()})},resize:function(e,t){return e.each(function(){f(this,t)})},enable:function(e){return e.each(function(){g(this,!1)})},disable:function(e){return e.each(function(){g(this,!0)})},readonly:function(e,t){return e.each(function(){b(this,t)})},check:function(e){return e.each(function(){h(this,!0)})},uncheck:function(e){return e.each(function(){h(this,!1)})},clear:function(e){return e.each(function(){h(this,!1)})},reset:function(e){return e.each(function(){h(this,u(this).switchbutton("options").originalChecked)})},setValue:function(e,t){return e.each(function(){u(this).val(t),u.data(this,"switchbutton").switchbutton.find(".switchbutton-value").val(t)})}},u.fn.switchbutton.parseOptions=function(e){var t=u(e);return u.extend({},u.parser.parseOptions(e,["onText","offText","handleText",{handleWidth:"number",reversed:"boolean"},"label","labelPosition","labelAlign",{labelWidth:"number"}]),{value:t.val()||void 0,checked:!!t.attr("checked")||void 0,disabled:!!t.attr("disabled")||void 0,readonly:!!t.attr("readonly")||void 0})},u.fn.switchbutton.defaults={handleWidth:"auto",width:60,height:30,checked:!1,disabled:!1,readonly:!1,reversed:!1,onText:"ON",offText:"OFF",handleText:"",value:"on",label:null,labelWidth:"auto",labelPosition:"before",labelAlign:"left",onChange:function(e){}}}(jQuery),function(d){var l=1;function c(e,t){var n;function i(e,t){var n=d(e).radiobutton("options"),i=d(e).data("radiobutton").radiobutton;i.find(".radiobutton-inner").css("display",t?"":"none"),i.find(".radiobutton-value")._propAttr("checked",t),n.checked!=t&&(n.checked=t,n.onChange.call(d(e)[0],t),d(e).closest("form").trigger("_change",[d(e)[0]]))}t?(n=d(e).closest("form"),t=d(e).attr("radiobuttonName"),n.find('.radiobutton-f[radiobuttonName="'+t+'"]').each(function(){this!=e&&i(this,!1)}),i(e,!0)):i(e,!1)}function u(e,t){var n=d.data(e,"radiobutton"),i=n.options,a=n.radiobutton,o=a.find(".radiobutton-value");(i.disabled=t)?(d(e).add(o)._propAttr("disabled",!0),a.addClass("radiobutton-disabled"),d(n.label).addClass("textbox-label-disabled")):(d(e).add(o)._propAttr("disabled",!1),a.removeClass("radiobutton-disabled"),d(n.label).removeClass("textbox-label-disabled"))}function p(e,t){var n=d.data(e,"radiobutton"),e=n.options;e.readonly=null==t||t,n.radiobutton.removeClass("radiobutton-readonly").addClass(e.readonly?"radiobutton-readonly":"")}d.fn.radiobutton=function(s,e){return"string"==typeof s?d.fn.radiobutton.methods[s](this,e):(s=s||{},this.each(function(){var e,t,n,i,a,o,r=d.data(this,"radiobutton");r?d.extend(r.options,s):r=d.data(this,"radiobutton",{options:d.extend({},d.fn.radiobutton.defaults,d.fn.radiobutton.parseOptions(this),s),radiobutton:(a=this,e=d('<span class="radiobutton inputbox"><span class="radiobutton-inner" style="display:none"></span><input type="radio" class="radiobutton-value"></span>').insertAfter(a),(o=d(a)).addClass("radiobutton-f").hide(),(a=o.attr("name"))&&(o.removeAttr("name").attr("radiobuttonName",a),e.find(".radiobutton-value").attr("name",a)),e)}),r.options.originalChecked=r.options.checked,i=this,o=d.data(i,"radiobutton"),a=o.options,e=o.radiobutton,r="_easyui_radiobutton_"+ ++l,e.find(".radiobutton-value").attr("id",r).unbind(".radiobutton").bind("change.radiobutton",function(e){return!1}),a.label?"object"==typeof a.label?(o.label=d(a.label),o.label.attr("for",r)):(d(o.label).remove(),o.label=d('<label class="textbox-label"></label>').html(a.label),o.label.css("textAlign",a.labelAlign).attr("for",r),"after"==a.labelPosition?o.label.insertAfter(e):o.label.insertBefore(i),o.label.removeClass("textbox-label-left textbox-label-right textbox-label-top"),o.label.addClass("textbox-label-"+a.labelPosition)):d(o.label).remove(),d(i).radiobutton("setValue",a.value),c(i,a.checked),p(i,a.readonly),u(i,a.disabled),t=this,o=d.data(t,"radiobutton"),n=o.options,o.radiobutton.unbind(".radiobutton").bind("click.radiobutton",function(){n.disabled||n.readonly||c(t,!0)}),i=this,a=d.data(i,"radiobutton"),o=a.options,(i=a.radiobutton)._size(o,i.parent()),o.label&&o.labelPosition&&("top"==o.labelPosition?a.label._size({width:o.labelWidth},i):(a.label._size({width:o.labelWidth,height:i.outerHeight()},i),a.label.css("lineHeight",i.outerHeight()+"px")))}))},d.fn.radiobutton.methods={options:function(e){e=e.data("radiobutton");return d.extend(e.options,{value:e.radiobutton.find(".radiobutton-value").val()})},setValue:function(e,t){return e.each(function(){d(this).val(t),d.data(this,"radiobutton").radiobutton.find(".radiobutton-value").val(t)})},enable:function(e){return e.each(function(){u(this,!1)})},disable:function(e){return e.each(function(){u(this,!0)})},readonly:function(e,t){return e.each(function(){p(this,t)})},check:function(e){return e.each(function(){c(this,!0)})},uncheck:function(e){return e.each(function(){c(this,!1)})},clear:function(e){return e.each(function(){c(this,!1)})},reset:function(e){return e.each(function(){c(this,d(this).radiobutton("options").originalChecked)})}},d.fn.radiobutton.parseOptions=function(e){var t=d(e);return d.extend({},d.parser.parseOptions(e,["label","labelPosition","labelAlign",{labelWidth:"number"}]),{value:t.val()||void 0,checked:!!t.attr("checked")||void 0,disabled:!!t.attr("disabled")||void 0,readonly:!!t.attr("readonly")||void 0})},d.fn.radiobutton.defaults={width:20,height:20,value:null,disabled:!1,readonly:!1,checked:!1,label:null,labelWidth:"auto",labelPosition:"before",labelAlign:"left",onChange:function(e){}}}(jQuery),function(d){var l=1;function c(e,t){var n=d.data(e,"checkbox"),i=n.options,n=n.checkbox;n.find(".checkbox-value")._propAttr("checked",t);n=n.find(".checkbox-inner").css("display",t?"":"none");t?n.addClass("checkbox-checked"):n.removeClass("checkbox-checked"),i.checked!=t&&(i.checked=t,i.onChange.call(e,t),d(e).closest("form").trigger("_change",[e]))}function u(e,t){var n=d.data(e,"checkbox"),e=n.options;e.readonly=null==t||t,n.checkbox.removeClass("checkbox-readonly").addClass(e.readonly?"checkbox-readonly":"")}function p(e,t){var n=d.data(e,"checkbox"),i=n.options,a=n.checkbox,o=a.find(".checkbox-value");(i.disabled=t)?(d(e).add(o)._propAttr("disabled",!0),a.addClass("checkbox-disabled"),d(n.label).addClass("textbox-label-disabled")):(d(e).add(o)._propAttr("disabled",!1),a.removeClass("checkbox-disabled"),d(n.label).removeClass("textbox-label-disabled"))}d.fn.checkbox=function(s,e){return"string"==typeof s?d.fn.checkbox.methods[s](this,e):(s=s||{},this.each(function(){var e,t,n,i,a,o,r=d.data(this,"checkbox");r?d.extend(r.options,s):r=d.data(this,"checkbox",{options:d.extend({},d.fn.checkbox.defaults,d.fn.checkbox.parseOptions(this),s),checkbox:(a=this,e=d('<span class="checkbox inputbox"><span class="checkbox-inner"><svg xml:space="preserve" focusable="false" version="1.1" viewBox="0 0 24 24"><path d="M4.1,12.7 9,17.6 20.3,6.3" fill="none" stroke="white"></path></svg></span><input type="checkbox" class="checkbox-value"></span>').insertAfter(a),(o=d(a)).addClass("checkbox-f").hide(),(a=o.attr("name"))&&(o.removeAttr("name").attr("checkboxName",a),e.find(".checkbox-value").attr("name",a)),e)}),r.options.originalChecked=r.options.checked,i=this,o=d.data(i,"checkbox"),a=o.options,e=o.checkbox,r="_easyui_checkbox_"+ ++l,e.find(".checkbox-value").attr("id",r).unbind(".checkbox").bind("change.checkbox",function(e){return!1}),a.label?"object"==typeof a.label?(o.label=d(a.label),o.label.attr("for",r)):(d(o.label).remove(),o.label=d('<label class="textbox-label"></label>').html(a.label),o.label.css("textAlign",a.labelAlign).attr("for",r),"after"==a.labelPosition?o.label.insertAfter(e):o.label.insertBefore(i),o.label.removeClass("textbox-label-left textbox-label-right textbox-label-top"),o.label.addClass("textbox-label-"+a.labelPosition)):d(o.label).remove(),d(i).checkbox("setValue",a.value),c(i,a.checked),u(i,a.readonly),p(i,a.disabled),t=this,o=d.data(t,"checkbox"),n=o.options,o.checkbox.unbind(".checkbox").bind("click.checkbox",function(){n.disabled||n.readonly||c(t,!n.checked)}),i=this,a=d.data(i,"checkbox"),o=a.options,(i=a.checkbox)._size(o,i.parent()),o.label&&o.labelPosition&&("top"==o.labelPosition?a.label._size({width:o.labelWidth},i):(a.label._size({width:o.labelWidth,height:i.outerHeight()},i),a.label.css("lineHeight",i.outerHeight()+"px")))}))},d.fn.checkbox.methods={options:function(e){e=e.data("checkbox");return d.extend(e.options,{value:e.checkbox.find(".checkbox-value").val()})},setValue:function(e,t){return e.each(function(){d(this).val(t),d.data(this,"checkbox").checkbox.find(".checkbox-value").val(t)})},enable:function(e){return e.each(function(){p(this,!1)})},disable:function(e){return e.each(function(){p(this,!0)})},readonly:function(e,t){return e.each(function(){u(this,t)})},check:function(e){return e.each(function(){c(this,!0)})},uncheck:function(e){return e.each(function(){c(this,!1)})},clear:function(e){return e.each(function(){c(this,!1)})},reset:function(e){return e.each(function(){c(this,d(this).checkbox("options").originalChecked)})}},d.fn.checkbox.parseOptions=function(e){var t=d(e);return d.extend({},d.parser.parseOptions(e,["label","labelPosition","labelAlign",{labelWidth:"number"}]),{value:t.val()||void 0,checked:!!t.attr("checked")||void 0,disabled:!!t.attr("disabled")||void 0,readonly:!!t.attr("readonly")||void 0})},d.fn.checkbox.defaults={width:20,height:20,value:null,disabled:!1,readonly:!1,checked:!1,label:null,labelWidth:"auto",labelPosition:"before",labelAlign:"left",onChange:function(e){}}}(jQuery),function($){function init(e){$(e).addClass("validatebox-text")}function destroyBox(e){var t=$.data(e,"validatebox");t.validating=!1,t.vtimer&&clearTimeout(t.vtimer),t.ftimer&&clearTimeout(t.ftimer),$(e).tooltip("destroy"),$(e).unbind(),$(e).remove()}function bindEvents(e){var t=$.data(e,"validatebox").options;if($(e).unbind(".validatebox"),!t.novalidate&&!t.disabled)for(var n in t.events)$(e).bind(n+".validatebox",{target:e},t.events[n])}function focusEventHandler(e){var t=e.data.target,n=$.data(t,"validatebox"),i=n.options;$(t).attr("readonly")||(n.validating=!0,n.value=i.val(t),function(){var e;$(t).is(":visible")||(n.validating=!1),n.validating&&(e=i.val(t),n.value!=e?(n.value=e,n.vtimer&&clearTimeout(n.vtimer),n.vtimer=setTimeout(function(){$(t).validatebox("validate")},i.delay)):n.message&&i.err(t,n.message),n.ftimer=setTimeout(arguments.callee,i.interval))}())}function blurEventHandler(e){var t=e.data.target,n=$.data(t,"validatebox"),e=n.options;n.validating=!1,n.vtimer&&(clearTimeout(n.vtimer),n.vtimer=void 0),n.ftimer&&(clearTimeout(n.ftimer),n.ftimer=void 0),e.validateOnBlur&&setTimeout(function(){$(t).validatebox("validate")},0),e.err(t,n.message,"hide")}function mouseenterEventHandler(e){var t=e.data.target,e=$.data(t,"validatebox");e.options.err(t,e.message,"show")}function mouseleaveEventHandler(e){var t=e.data.target,e=$.data(t,"validatebox");e.validating||e.options.err(t,e.message,"hide")}function handleError(e,t,n){var i=$.data(e,"validatebox"),a=i.options,e=$(e);"hide"!=n&&t?(e.is(":focus")&&i.validating||"show"==n)&&e.tooltip($.extend({},a.tipOptions,{content:t,position:a.tipPosition,deltaX:a.deltaX,deltaY:a.deltaY})).tooltip("show"):e.tooltip("hide")}function validate(target){var state=$.data(target,"validatebox"),opts=state.options,box=$(target);opts.onBeforeValidate.call(target);var result=_validate();return result?box.removeClass("validatebox-invalid"):box.addClass("validatebox-invalid"),opts.err(target,state.message),opts.onValidate.call(target,result),result;function setTipMessage(e){state.message=e}function doValidate(vtype,vparam){var value=opts.val(target),result=/([a-zA-Z_]+)(.*)/.exec(vtype),rule=opts.rules[result[1]];if(rule&&value){var param=vparam||opts.validParams||eval(result[2]);if(!rule.validator.call(target,value,param)){var message=rule.message;if(param)for(var i=0;i<param.length;i++)message=message.replace(new RegExp("\\{"+i+"\\}","g"),param[i]);return void setTipMessage(opts.invalidMessage||message)}}return 1}function _validate(){if(setTipMessage(""),!opts._validateOnCreate)return setTimeout(function(){opts._validateOnCreate=!0},0),!0;if(opts.novalidate||opts.disabled)return!0;if(opts.required&&""==opts.val(target))return setTipMessage(opts.missingMessage),!1;if(opts.validType)if($.isArray(opts.validType)){for(var e=0;e<opts.validType.length;e++)if(!doValidate(opts.validType[e]))return!1}else if("string"==typeof opts.validType){if(!doValidate(opts.validType))return!1}else for(var t in opts.validType)if(!doValidate(t,opts.validType[t]))return!1;return!0}}function setDisabled(e,t){var n=$.data(e,"validatebox").options;null!=t&&(n.disabled=t),n.disabled?$(e).addClass("validatebox-disabled")._propAttr("disabled",!0):$(e).removeClass("validatebox-disabled")._propAttr("disabled",!1)}function setReadonly(e,t){var n=$.data(e,"validatebox").options;n.readonly=null==t||t,n.readonly||!n.editable?($(e).triggerHandler("blur.validatebox"),$(e).addClass("validatebox-readonly")._propAttr("readonly",!0)):$(e).removeClass("validatebox-readonly")._propAttr("readonly",!1)}$.fn.validatebox=function(t,e){return"string"==typeof t?$.fn.validatebox.methods[t](this,e):(t=t||{},this.each(function(){var e=$.data(this,"validatebox");e?$.extend(e.options,t):(init(this),e=$.data(this,"validatebox",{options:$.extend({},$.fn.validatebox.defaults,$.fn.validatebox.parseOptions(this),t)})),e.options._validateOnCreate=e.options.validateOnCreate,setDisabled(this,e.options.disabled),setReadonly(this,e.options.readonly),bindEvents(this),validate(this)}))},$.fn.validatebox.methods={options:function(e){return $.data(e[0],"validatebox").options},destroy:function(e){return e.each(function(){destroyBox(this)})},validate:function(e){return e.each(function(){validate(this)})},isValid:function(e){return validate(e[0])},enableValidation:function(e){return e.each(function(){$(this).validatebox("options").novalidate=!1,bindEvents(this),validate(this)})},disableValidation:function(e){return e.each(function(){$(this).validatebox("options").novalidate=!0,bindEvents(this),validate(this)})},resetValidation:function(e){return e.each(function(){var e=$(this).validatebox("options");e._validateOnCreate=e.validateOnCreate,validate(this)})},enable:function(e){return e.each(function(){setDisabled(this,!1),bindEvents(this),validate(this)})},disable:function(e){return e.each(function(){setDisabled(this,!0),bindEvents(this),validate(this)})},readonly:function(e,t){return e.each(function(){setReadonly(this,t),bindEvents(this),validate(this)})}},$.fn.validatebox.parseOptions=function(e){var t=$(e);return $.extend({},$.parser.parseOptions(e,["validType","missingMessage","invalidMessage","tipPosition",{delay:"number",interval:"number",deltaX:"number"},{editable:"boolean",validateOnCreate:"boolean",validateOnBlur:"boolean"}]),{required:!!t.attr("required")||void 0,disabled:!!t.attr("disabled")||void 0,readonly:!!t.attr("readonly")||void 0,novalidate:null!=t.attr("novalidate")||void 0})},$.fn.validatebox.defaults={required:!1,validType:null,validParams:null,delay:200,interval:200,missingMessage:"This field is required.",invalidMessage:null,tipPosition:"right",deltaX:0,deltaY:0,novalidate:!1,editable:!0,disabled:!1,readonly:!1,validateOnCreate:!0,validateOnBlur:!1,events:{focus:focusEventHandler,blur:blurEventHandler,mouseenter:mouseenterEventHandler,mouseleave:mouseleaveEventHandler,click:function(e){e=$(e.data.target);"checkbox"!=e.attr("type")&&"radio"!=e.attr("type")||e.focus().validatebox("validate")}},val:function(e){return $(e).val()},err:function(e,t,n){handleError(e,t,n)},tipOptions:{showEvent:"none",hideEvent:"none",showDelay:0,hideDelay:0,zIndex:"",onShow:function(){$(this).tooltip("tip").css({color:"#000",borderColor:"#CC9933",backgroundColor:"#FFFFCC"})},onHide:function(){$(this).tooltip("destroy")}},rules:{email:{validator:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},message:"Please enter a valid email address."},url:{validator:function(e){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},message:"Please enter a valid URL."},length:{validator:function(e,t){e=$.trim(e).length;return e>=t[0]&&e<=t[1]},message:"Please enter a value between {0} and {1}."},remote:{validator:function(e,t){var n={};return n[t[1]]=e,"true"==$.ajax({url:t[0],dataType:"json",data:n,async:!1,cache:!1,type:"post"}).responseText},message:"Please fix this field."}},onBeforeValidate:function(){},onValidate:function(e){}}}(jQuery),function(p){var d=0;function r(e,t){var n=p.data(e,"textbox"),i=n.options,a=n.textbox,o=a.parent();t&&("object"==typeof t?p.extend(i,t):i.width=t),isNaN(parseInt(i.width))&&((l=p(e).clone()).css("visibility","hidden"),l.insertAfter(e),i.width=l.outerWidth(),l.remove());var r=a.is(":visible");r||a.appendTo("body");var t=a.find(".textbox-text"),s=a.find(".textbox-button"),d=a.find(".textbox-addon"),l=d.find(".textbox-icon");"auto"==i.height&&t.css({margin:"",paddingTop:"",paddingBottom:"",height:"",lineHeight:""}),a._size(i,o),i.label&&i.labelPosition&&("top"==i.labelPosition?(n.label._size({width:"auto"==i.labelWidth?a.outerWidth():i.labelWidth},a),"auto"!=i.height&&a._size("height",a.outerHeight()-n.label.outerHeight())):(n.label._size({width:i.labelWidth,height:a.outerHeight()},a),i.multiline||n.label.css("lineHeight",n.label.height()+"px"),a._size("width",a.outerWidth()-n.label.outerWidth()))),"left"==i.buttonAlign||"right"==i.buttonAlign?s.linkbutton("resize",{height:a.height()}):s.linkbutton("resize",{width:"100%"});o=a.width()-l.length*i.iconWidth-u("left")-u("right"),n="auto"==i.height?t.outerHeight():a.height()-u("top")-u("bottom");function c(e){return(i.iconAlign==e?d._outerWidth():0)+u(e)}function u(e){var t=0;return s.filter(".textbox-button-"+e).each(function(){t+="left"==e||"right"==e?p(this).outerWidth():p(this).outerHeight()}),t}d.css(i.iconAlign,u(i.iconAlign)+"px"),d.css("top",u("top")+"px"),l.css({width:i.iconWidth+"px",height:n+"px"}),t.css({paddingLeft:e.style.paddingLeft||"",paddingRight:e.style.paddingRight||"",marginLeft:c("left"),marginRight:c("right"),marginTop:u("top"),marginBottom:u("bottom")}),i.multiline?(t.css({paddingTop:e.style.paddingTop||"",paddingBottom:e.style.paddingBottom||""}),t._outerHeight(n)):t.css({paddingTop:0,paddingBottom:0,height:n+"px",lineHeight:n+"px"}),t._outerWidth(o),i.onResizing.call(e,i.width,i.height),r||a.insertAfter(e),i.onResize.call(e,i.width,i.height)}function l(n){var i=p(n).textbox("options");p(n).textbox("textbox").validatebox(p.extend({},i,{deltaX:function(e){return p(n).textbox("getTipX",e)},deltaY:function(e){return p(n).textbox("getTipY",e)},onBeforeValidate:function(){i.onBeforeValidate.call(n);var e=p(this);e.is(":focus")||e.val()!==i.value&&(i.oldInputValue=e.val(),e.val(i.value))},onValidate:function(e){var t=p(this);null!=i.oldInputValue&&(t.val(i.oldInputValue),i.oldInputValue=void 0);t=t.parent();e?t.removeClass("textbox-invalid"):t.addClass("textbox-invalid"),i.onValidate.call(n,e)}}))}function s(a){var e=p.data(a,"textbox"),o=e.options,t=e.textbox,n=t.find(".textbox-text");if(n.attr("placeholder",o.prompt),n.unbind(".textbox"),p(e.label).unbind(".textbox"),!o.disabled&&!o.readonly)for(var i in e.label&&p(e.label).bind("click.textbox",function(e){o.hasFocusMe||(n.focus(),p(a).textbox("setSelectionRange",{start:0,end:n.val().length}))}),n.bind("blur.textbox",function(e){t.hasClass("textbox-focused")&&(o.value=p(this).val(),""==o.value?p(this).val(o.value).addClass("textbox-prompt"):p(this).removeClass("textbox-prompt"),t.removeClass("textbox-focused"),t.closest(".form-field").removeClass("form-field-focused"))}).bind("focus.textbox",function(e){o.hasFocusMe=!0,t.hasClass("textbox-focused")||(p(this).val()!=o.value&&p(this).val(o.value),p(this).removeClass("textbox-prompt"),t.addClass("textbox-focused"),t.closest(".form-field").addClass("form-field-focused"))}),o.inputEvents)n.bind(i+".textbox",{target:a},o.inputEvents[i]);e=t.find(".textbox-addon");e.unbind().bind("click",{target:a},function(e){var t,n,i=p(e.target).closest("a.textbox-icon:not(.textbox-icon-disabled)");i.length&&(t=parseInt(i.attr("icon-index")),(n=o.icons[t])&&n.handler&&n.handler.call(i[0],e),o.onClickIcon.call(a,t))}),e.find(".textbox-icon").each(function(e){var t=o.icons[e],e=p(this);!t||t.disabled||o.disabled||o.readonly?e.addClass("textbox-icon-disabled"):e.removeClass("textbox-icon-disabled")}),t.find(".textbox-button").linkbutton(o.disabled||o.readonly?"disable":"enable"),t.unbind(".textbox").bind("_resize.textbox",function(e,t){return(p(this).hasClass("easyui-fluid")||t)&&r(a),!1})}function c(e,t){var n=p.data(e,"textbox"),i=n.options,a=n.textbox,o=a.find(".textbox-text"),e=p(e).add(a.find(".textbox-value"));i.disabled=t,i.disabled?(o.blur(),o.validatebox("disable"),a.addClass("textbox-disabled"),e._propAttr("disabled",!0),p(n.label).addClass("textbox-label-disabled")):(o.validatebox("enable"),a.removeClass("textbox-disabled"),e._propAttr("disabled",!1),p(n.label).removeClass("textbox-label-disabled"))}function u(e,t){var n=p.data(e,"textbox"),i=n.options,e=n.textbox,n=e.find(".textbox-text");i.readonly=null==t||t,i.readonly&&n.triggerHandler("blur.textbox"),n.validatebox("readonly",i.readonly),e.removeClass("textbox-readonly").addClass(i.readonly?"textbox-readonly":"")}p.fn.textbox=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var e=p.data(this,"textbox");e?(p.extend(e.options,n),null!=n.value&&(e.options.originalValue=n.value)):(e=p.data(this,"textbox",{options:p.extend({},p.fn.textbox.defaults,p.fn.textbox.parseOptions(this),n),textbox:function(e){p(e).addClass("textbox-f").hide();var t=p('<span class="textbox"><input class="textbox-text" autocomplete="off"><input type="hidden" class="textbox-value"></span>').insertAfter(e),n=p(e).attr("name");return n&&(t.find("input.textbox-value").attr("name",n),p(e).removeAttr("name").attr("textboxName",n)),t}(this)})).options.originalValue=e.options.value,function(e){var t=p.data(e,"textbox"),n=t.options,i=t.textbox,a="_easyui_textbox_input"+ ++d;i.addClass(n.cls),i.find(".textbox-text").remove(),(n.multiline?p('<textarea id="'+a+'" class="textbox-text" autocomplete="off"></textarea>'):p('<input id="'+a+'" type="'+n.type+'" class="textbox-text" autocomplete="off">')).prependTo(i),p("#"+a).attr("tabindex",p(e).attr("tabindex")||"").css("text-align",e.style.textAlign||""),i.find(".textbox-addon").remove();var o=n.icons?p.extend(!0,[],n.icons):[];if(n.iconCls&&o.push({iconCls:n.iconCls,disabled:!0}),o.length){var r=p('<span class="textbox-addon"></span>').prependTo(i);r.addClass("textbox-addon-"+n.iconAlign);for(var s=0;s<o.length;s++)r.append('<a href="javascript:;" class="textbox-icon '+o[s].iconCls+'" icon-index="'+s+'" tabindex="-1"></a>')}i.find(".textbox-button").remove(),(n.buttonText||n.buttonIcon)&&p('<a href="javascript:;" class="textbox-button"></a>').prependTo(i).addClass("textbox-button-"+n.buttonAlign).linkbutton({text:n.buttonText,iconCls:n.buttonIcon,onClick:function(){var e=p(this).parent().prev();e.textbox("options").onClickButton.call(e[0])}}),n.label?"object"==typeof n.label?(t.label=p(n.label),t.label.attr("for",a)):(p(t.label).remove(),t.label=p('<label class="textbox-label"></label>').html(n.label),t.label.css("textAlign",n.labelAlign).attr("for",a),"after"==n.labelPosition?t.label.insertAfter(i):t.label.insertBefore(e),t.label.removeClass("textbox-label-left textbox-label-right textbox-label-top"),t.label.addClass("textbox-label-"+n.labelPosition)):p(t.label).remove(),l(e),c(e,n.disabled),u(e,n.readonly)}(this),s(this),e.options.doSize&&r(this);var t=e.options.value;e.options.value="",p(this).textbox("initValue",t)});var t=p.fn.textbox.methods[n];return t?t(this,e):this.each(function(){p(this).textbox("textbox").validatebox(n,e)})},p.fn.textbox.methods={options:function(e){return p.data(e[0],"textbox").options},cloneFrom:function(e,o){return e.each(function(){var e,t,n,i,a=p(this);a.data("textbox")||(p(o).data("textbox")||p(o).textbox(),e=p.extend(!0,{},p(o).textbox("options")),i=a.attr("name")||"",a.addClass("textbox-f").hide(),a.removeAttr("name").attr("textboxName",i),t=p(o).next().clone().insertAfter(a),n="_easyui_textbox_input"+ ++d,t.find(".textbox-value").attr("name",i),t.find(".textbox-text").attr("id",n),(i=p(p(o).textbox("label")).clone()).length&&(i.attr("for",n),"after"==e.labelPosition?i.insertAfter(a.next()):i.insertBefore(a)),p.data(this,"textbox",{options:e,textbox:t,label:i.length?i:void 0}),(i=p(o).textbox("button")).length&&a.textbox("button").linkbutton(p.extend(!0,{},i.linkbutton("options"))),s(this),l(this))})},textbox:function(e){return p.data(e[0],"textbox").textbox.find(".textbox-text")},button:function(e){return p.data(e[0],"textbox").textbox.find(".textbox-button")},label:function(e){return p.data(e[0],"textbox").label},destroy:function(e){return e.each(function(){var e,t,n;e=this,t=p.data(e,"textbox"),(n=t.textbox).find(".textbox-text").validatebox("destroy"),n.remove(),p(t.label).remove(),p(e).remove()})},resize:function(e,t){return e.each(function(){r(this,t)})},disable:function(e){return e.each(function(){c(this,!0),s(this)})},enable:function(e){return e.each(function(){c(this,!1),s(this)})},readonly:function(e,t){return e.each(function(){u(this,t),s(this)})},isValid:function(e){return e.textbox("textbox").validatebox("isValid")},clear:function(e){return e.each(function(){p(this).textbox("setValue","")})},setText:function(e,n){return e.each(function(){var e=p(this).textbox("options"),t=p(this).textbox("textbox");n=null==n?"":String(n),p(this).textbox("getText")!=n&&t.val(n),e.value=n,t.is(":focus")||(n?t.removeClass("textbox-prompt"):t.val(e.prompt).addClass("textbox-prompt")),e.value?p(this).closest(".form-field").removeClass("form-field-empty"):p(this).closest(".form-field").addClass("form-field-empty"),p(this).textbox("validate")})},initValue:function(e,t){return e.each(function(){var e=p.data(this,"textbox");p(this).textbox("setText",t),e.textbox.find(".textbox-value").val(t),p(this).val(t)})},setValue:function(e,n){return e.each(function(){var e=p.data(this,"textbox").options,t=p(this).textbox("getValue");p(this).textbox("initValue",n),t!=n&&(e.onChange.call(this,n,t),p(this).closest("form").trigger("_change",[this]))})},getText:function(e){var t=e.textbox("textbox");return t.is(":focus")?t.val():e.textbox("options").value},getValue:function(e){return e.data("textbox").textbox.find(".textbox-value").val()},reset:function(e){return e.each(function(){var e=p(this).textbox("options");p(this).textbox("textbox").val(e.originalValue),p(this).textbox("setValue",e.originalValue)})},getIcon:function(e,t){return e.data("textbox").textbox.find(".textbox-icon:eq("+t+")")},getTipX:function(e,t){var n=e.data("textbox"),i=n.options,a=n.textbox,e=a.find(".textbox-text"),t=t||i.tipPosition,n=a.offset(),i=e.offset(),a=a.outerWidth(),e=e.outerWidth();return"right"==t?a-e-i.left+n.left:"left"==t?n.left-i.left:(a-e-i.left+n.left)/2-(i.left-n.left)/2},getTipY:function(e,t){var n=e.data("textbox"),i=n.options,a=n.textbox,e=a.find(".textbox-text"),t=t||i.tipPosition,n=a.offset(),i=e.offset(),a=a.outerHeight(),e=e.outerHeight();return"left"==t||"right"==t?(a-e-i.top+n.top)/2-(i.top-n.top)/2:"bottom"==t?a-e-i.top+n.top:n.top-i.top},getSelectionStart:function(e){return e.textbox("getSelectionRange").start},getSelectionRange:function(e){var t=e.textbox("textbox")[0],n=0,i=0;return"number"==typeof t.selectionStart?(n=t.selectionStart,i=t.selectionEnd):t.createTextRange&&(e=document.selection.createRange(),(t=t.createTextRange()).setEndPoint("EndToStart",e),i=(n=t.text.length)+e.text.length),{start:n,end:i}},setSelectionRange:function(e,i){return e.each(function(){var e=p(this).textbox("textbox")[0],t=i.start,n=i.end;e.setSelectionRange?e.setSelectionRange(t,n):e.createTextRange&&((e=e.createTextRange()).collapse(),e.moveEnd("character",n),e.moveStart("character",t),e.select())})}},p.fn.textbox.parseOptions=function(e){var t=p(e);return p.extend({},p.fn.validatebox.parseOptions(e),p.parser.parseOptions(e,["prompt","iconCls","iconAlign","buttonText","buttonIcon","buttonAlign","label","labelPosition","labelAlign",{multiline:"boolean",iconWidth:"number",labelWidth:"number"}]),{value:t.val()||void 0,type:t.attr("type")?t.attr("type"):void 0})},p.fn.textbox.defaults=p.extend({},p.fn.validatebox.defaults,{doSize:!0,width:"auto",height:"auto",cls:null,prompt:"",value:"",type:"text",multiline:!1,icons:[],iconCls:null,iconAlign:"right",iconWidth:26,buttonText:"",buttonIcon:null,buttonAlign:"right",label:null,labelWidth:"auto",labelPosition:"before",labelAlign:"left",inputEvents:{blur:function(e){var t=p(e.data.target),e=t.textbox("options");t.textbox("getValue")!=e.value&&t.textbox("setValue",e.value)},keydown:function(e){13==e.keyCode&&(e=p(e.data.target)).textbox("setValue",e.textbox("getText"))}},onChange:function(e,t){},onResizing:function(e,t){},onResize:function(e,t){},onClickButton:function(){},onClickIcon:function(e){}})}(jQuery),function(u){function o(e,t,n){var i=u(e).data("passwordbox"),a=u(e),e=a.passwordbox("options");if(e.revealed)a.textbox("setValue",t);else{i.converting=!0;for(var o=unescape(e.passwordChar),r=t.split(""),s=a.passwordbox("getValue").split(""),d=0;d<r.length;d++){var l=r[d];l!=s[d]&&l!=o&&s.splice(d,0,l)}var c=a.passwordbox("getSelectionStart");r.length<s.length&&s.splice(c,s.length-r.length,"");for(d=0;d<r.length;d++)!n&&d==c-1||(r[d]=o);a.textbox("setValue",s.join("")),a.textbox("setText",r.join("")),a.textbox("setSelectionRange",{start:c,end:c}),setTimeout(function(){i.converting=!1},0)}}function a(e,t){var n=u(e),i=n.passwordbox("options"),a=n.next().find(".passwordbox-open"),e=unescape(i.passwordChar);t=null==t?n.textbox("getValue"):t,n.textbox("setValue",t),n.textbox("setText",i.revealed?t:t.replace(/./gi,e)),i.revealed?a.addClass("passwordbox-close"):a.removeClass("passwordbox-close")}u.fn.passwordbox=function(i,e){if("string"!=typeof i)return i=i||{},this.each(function(){var t,n,e=u.data(this,"passwordbox");e?u.extend(e.options,i):e=u.data(this,"passwordbox",{options:u.extend({},u.fn.passwordbox.defaults,u.fn.passwordbox.parseOptions(this),i)}),t=this,n=u.data(t,"passwordbox").options,e=u.extend(!0,[],n.icons),n.showEye&&e.push({iconCls:"passwordbox-open",handler:function(e){n.revealed=!n.revealed,a(t)}}),u(t).addClass("passwordbox-f").textbox(u.extend({},n,{icons:e})),a(t)});var t=u.fn.passwordbox.methods[i];return t?t(this,e):this.textbox(i,e)},u.fn.passwordbox.methods={options:function(e){return u.data(e[0],"passwordbox").options},setValue:function(e,t){return e.each(function(){a(this,t)})},clear:function(e){return e.each(function(){a(this,"")})},reset:function(e){return e.each(function(){u(this).textbox("reset"),a(this)})},showPassword:function(e){return e.each(function(){u(this).passwordbox("options").revealed=!0,a(this)})},hidePassword:function(e){return e.each(function(){u(this).passwordbox("options").revealed=!1,a(this)})}},u.fn.passwordbox.parseOptions=function(e){return u.extend({},u.fn.textbox.parseOptions(e),u.parser.parseOptions(e,["passwordChar",{checkInterval:"number",lastDelay:"number",revealed:"boolean",showEye:"boolean"}]))},u.fn.passwordbox.defaults=u.extend({},u.fn.textbox.defaults,{passwordChar:"%u25CF",checkInterval:200,lastDelay:500,revealed:!1,showEye:!0,inputEvents:{focus:function(e){var t=e.data.target,n=u(e.data.target),i=n.data("passwordbox"),a=n.data("passwordbox").options;i.checking=!0,i.value=n.passwordbox("getText"),function(){var e;i.checking&&(e=n.passwordbox("getText"),i.value!=e&&(i.value=e,i.lastTimer&&(clearTimeout(i.lastTimer),i.lastTimer=void 0),o(t,e),i.lastTimer=setTimeout(function(){o(t,n.passwordbox("getText"),!0),i.lastTimer=void 0},a.lastDelay)),setTimeout(arguments.callee,a.checkInterval))}()},blur:function(e){var t=e.data.target;(e=u(t).data("passwordbox")).checking=!1,e.lastTimer&&(clearTimeout(e.lastTimer),e.lastTimer=void 0),a(t)},keydown:function(e){return!u(e.data.target).data("passwordbox").converting}},val:function(e){return u(e).parent().prev().passwordbox("getValue")}})}(jQuery),function(l){function r(e,t){for(var n,i=l(e).maskedbox("options"),a=(t||l(e).maskedbox("getText")||"").split(""),o=[],r=0;r<i.mask.length;r++)i.masks[i.mask[r]]&&(n=a[r],o.push(n!=i.promptChar?n:" "));return o.join("")}function s(e,t){for(var n=l(e).maskedbox("options"),i=t.split(""),a=[],o=0;o<n.mask.length;o++){var r=n.mask[o],s=n.masks[r];if(s){var d=i.shift();if(null!=d)if(new RegExp(s,"i").test(d)){a.push(d);continue}a.push(n.promptChar)}else a.push(r)}return a.join("")}function d(e,t){l(e).maskedbox("options");var n,i,a=r(e).split(""),o=l(e).maskedbox("getSelectionRange");o.start==o.end?0<=(i=(n=(t?p:u)(e,o.start))-c(e,n))&&a.splice(i,1):(n=u(e,o.start),o=p(e,o.end),i=n-c(e,n),o=o-c(e,o),a.splice(i,o-i+1)),l(e).maskedbox("setValue",s(e,a.join(""))),l(e).maskedbox("setSelectionRange",{start:n,end:n})}function c(e,t){var n=l(e).maskedbox("options"),i=0;t>=n.mask.length&&t--;for(var a=t;0<=a;a--)null==n.masks[n.mask[a]]&&i++;return i}function u(e,t){for(var n=l(e).maskedbox("options"),i=n.mask[t],a=n.masks[i];t<n.mask.length&&!a;)i=n.mask[++t],a=n.masks[i];return t}function p(e,t){for(var n=l(e).maskedbox("options"),i=n.mask[--t],a=n.masks[i];0<=t&&!a;)i=n.mask[--t],a=n.masks[i];return t<0?0:t}l.extend(l.fn.textbox.methods,{inputMask:function(e,i){return e.each(function(){var e=l.extend({},l.fn.maskedbox.defaults,i);l.data(this,"maskedbox",{options:e});var t,n=l(this).textbox("textbox");for(t in n.unbind(".maskedbox"),e.inputEvents)n.bind(t+".maskedbox",{target:this},e.inputEvents[t])})}}),l.fn.maskedbox=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var e,t=l.data(this,"maskedbox");t?l.extend(t.options,n):l.data(this,"maskedbox",{options:l.extend({},l.fn.maskedbox.defaults,l.fn.maskedbox.parseOptions(this),n)}),t=l(e=this).data("maskedbox").options,l(e).textbox(t),l(e).maskedbox("initValue",t.value)});var t=l.fn.maskedbox.methods[n];return t?t(this,e):this.textbox(n,e)},l.fn.maskedbox.methods={options:function(e){var t=e.textbox("options");return l.extend(l.data(e[0],"maskedbox").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},initValue:function(e,t){return e.each(function(){t=s(this,r(this,t)),l(this).textbox("initValue",t)})},setValue:function(e,t){return e.each(function(){t=s(this,r(this,t)),l(this).textbox("setValue",t)})}},l.fn.maskedbox.parseOptions=function(e){l(e);return l.extend({},l.fn.textbox.parseOptions(e),l.parser.parseOptions(e,["mask","promptChar"]),{})},l.fn.maskedbox.defaults=l.extend({},l.fn.textbox.defaults,{mask:"",promptChar:"_",masks:{9:"[0-9]",a:"[a-zA-Z]","*":"[0-9a-zA-Z]"},inputEvents:{keydown:function(e){if(!e.metaKey&&!e.ctrlKey){var t=e.data.target;l(t).maskedbox("options");if(-1!=l.inArray(e.keyCode,[9,13,35,36,37,39]))return!0;96<=e.keyCode&&e.keyCode<=105&&(e.keyCode-=48);var n,i,a,o=String.fromCharCode(e.keyCode);return 65<=e.keyCode&&e.keyCode<=90&&!e.shiftKey?o=o.toLowerCase():189==e.keyCode?o="-":187==e.keyCode?o="+":190==e.keyCode&&(o="."),8==e.keyCode?d(t,!0):46==e.keyCode?d(t,!1):(i=o,a=l(n=t).maskedbox("options"),e=l(n).maskedbox("getSelectionRange"),o=u(n,e.start),t=u(n,e.end),-1!=o&&new RegExp(a.masks[a.mask[o]],"i").test(i)&&(e=r(n).split(""),a=o-c(n,o),t=t-c(n,t),e.splice(a,t-a,i),l(n).maskedbox("setValue",s(n,e.join(""))),o=u(n,++o),l(n).maskedbox("setSelectionRange",{start:o,end:o}))),!1}}}})}(jQuery),function(a){var o=0;function r(t){var e=a.data(t,"filebox"),n=e.options;e.filebox.find(".textbox-value").remove(),n.oldValue="";e=a('<input type="file" class="textbox-value">').appendTo(e.filebox);return e.attr("id",n.fileboxId).attr("name",a(t).attr("textboxName")||""),e.attr("accept",n.accept),e.attr("capture",n.capture),n.multiple&&e.attr("multiple","multiple"),e.change(function(){var e=this.value;this.files&&(e=a.map(this.files,function(e){return e.name}).join(n.separator)),a(t).filebox("setText",e),n.onChange.call(t,e,n.oldValue),n.oldValue=e}),e}a.fn.filebox=function(i,e){if("string"!=typeof i)return i=i||{},this.each(function(){var e,t,n=a.data(this,"filebox");n?a.extend(n.options,i):a.data(this,"filebox",{options:a.extend({},a.fn.filebox.defaults,a.fn.filebox.parseOptions(this),i)}),e=this,t=a.data(e,"filebox"),(n=t.options).fileboxId="filebox_file_id_"+ ++o,a(e).addClass("filebox-f").textbox(n),a(e).textbox("textbox").attr("readonly","readonly"),t.filebox=a(e).next().addClass("filebox"),t=r(e),(e=a(e).filebox("button")).length&&(a('<label class="filebox-label" for="'+n.fileboxId+'"></label>').appendTo(e),e.linkbutton("options").disabled?t._propAttr("disabled",!0):t._propAttr("disabled",!1))});var t=a.fn.filebox.methods[i];return t?t(this,e):this.textbox(i,e)},a.fn.filebox.methods={options:function(e){var t=e.textbox("options");return a.extend(a.data(e[0],"filebox").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},clear:function(e){return e.each(function(){a(this).textbox("clear"),r(this)})},reset:function(e){return e.each(function(){a(this).filebox("clear")})},setValue:function(e){return e},setValues:function(e){return e},files:function(e){return e.next().find(".textbox-value")[0].files}},a.fn.filebox.parseOptions=function(e){var t=a(e);return a.extend({},a.fn.textbox.parseOptions(e),a.parser.parseOptions(e,["accept","capture","separator"]),{multiple:!!t.attr("multiple")||void 0})},a.fn.filebox.defaults=a.extend({},a.fn.textbox.defaults,{buttonIcon:null,buttonText:"Choose File",buttonAlign:"right",inputEvents:{},accept:"",capture:"",separator:",",multiple:!1})}(jQuery),function($){function buildSearchBox(t){var n=$.data(t,"searchbox"),i=n.options,e=$.extend(!0,[],i.icons);e.push({iconCls:"searchbox-button",handler:function(e){var t=$(e.data.target);t.searchbox("options").searcher.call(e.data.target,t.searchbox("getValue"),t.searchbox("getName"))}}),function(){{var e,t;i.menu?(n.menu=$(i.menu).menu(),e=n.menu.menu("options"),t=e.onClick,e.onClick=function(e){o(e),t.call(this,e)}):(n.menu&&n.menu.menu("destroy"),n.menu=null)}}();var a=function(){{if(n.menu){var e=n.menu.children("div.menu-item:first");return n.menu.children("div.menu-item").each(function(){if($.extend({},$.parser.parseOptions(this),{selected:!!$(this).attr("selected")||void 0}).selected)return e=$(this),!1}),n.menu.menu("getItem",e[0])}return null}}();function o(e){e&&($(t).textbox("button").menubutton({text:e.text,iconCls:e.iconCls||null,menu:n.menu,menuAlign:i.buttonAlign,plain:!1}),n.searchbox.find("input.textbox-value").attr("name",e.name||e.text),$(t).searchbox("resize"))}$(t).addClass("searchbox-f").textbox($.extend({},i,{icons:e,buttonText:a?a.text:""})),$(t).attr("searchboxName",$(t).attr("textboxName")),n.searchbox=$(t).next(),n.searchbox.addClass("searchbox"),o(a)}$.fn.searchbox=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=$.data(this,"searchbox");e?$.extend(e.options,t):$.data(this,"searchbox",{options:$.extend({},$.fn.searchbox.defaults,$.fn.searchbox.parseOptions(this),t)}),buildSearchBox(this)});var n=$.fn.searchbox.methods[t];return n?n(this,e):this.textbox(t,e)},$.fn.searchbox.methods={options:function(e){var t=e.textbox("options");return $.extend($.data(e[0],"searchbox").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},menu:function(e){return $.data(e[0],"searchbox").menu},getName:function(e){return $.data(e[0],"searchbox").searchbox.find("input.textbox-value").attr("name")},selectName:function(e,t){return e.each(function(){var e=$.data(this,"searchbox").menu;e&&e.children("div.menu-item").each(function(){if(e.menu("getItem",this).name==t)return $(this).trigger("click"),!1})})},destroy:function(e){return e.each(function(){var e=$(this).searchbox("menu");e&&e.menu("destroy"),$(this).textbox("destroy")})}},$.fn.searchbox.parseOptions=function(target){var t=$(target);return $.extend({},$.fn.textbox.parseOptions(target),$.parser.parseOptions(target,["menu"]),{searcher:t.attr("searcher")?eval(t.attr("searcher")):void 0})},$.fn.searchbox.defaults=$.extend({},$.fn.textbox.defaults,{inputEvents:$.extend({},$.fn.textbox.defaults.inputEvents,{keydown:function(e){if(13==e.keyCode){e.preventDefault();var t=$(e.data.target),n=t.searchbox("options");return t.searchbox("setValue",$(this).val()),n.searcher.call(e.data.target,t.searchbox("getValue"),t.searchbox("getName")),!1}}}),buttonAlign:"left",menu:null,searcher:function(e,t){}})}(jQuery),function(u){function i(e,t){var n=u.data(e,"form").options;u.extend(n,t||{});var i,a=u.extend({},n.queryParams);0!=n.onSubmit.call(e,a)&&((t=u(e).find(".textbox-text:focus")).triggerHandler("blur"),t.focus(),t=null,n.dirty&&(i=[],u.map(n.dirtyFields,function(e){u(e).hasClass("textbox-f")?u(e).next().find(".textbox-value").each(function(){i.push(this)}):i.push(e)}),(t=u(e).find("input[name]:enabled,textarea[name]:enabled,select[name]:enabled").filter(function(){return-1==u.inArray(this,i)}))._propAttr("disabled",!0)),n.ajax?(!n.iframe&&void 0!==window.FormData?function(n,e){var t,i=u.data(n,"form").options,a=new FormData(u(n)[0]);for(t in e)a.append(t,e[t]);u.ajax({url:i.url,type:"post",xhr:function(){var e=u.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var t;e.lengthComputable&&(t=e.total,e=e.loaded||e.position,t=Math.ceil(100*e/t),i.onProgress.call(n,t))},!1),e},data:a,dataType:"html",cache:!1,contentType:!1,processData:!1,complete:function(e){i.success.call(n,e.responseText)}})}:o)(e,a):u(e).submit(),n.dirty&&t._propAttr("disabled",!1))}function o(s,e){var d=u.data(s,"form").options,l="easyui_frame_"+(new Date).getTime(),t=u("<iframe id="+l+" name="+l+"></iframe>").appendTo("body");function c(){var e=u("#"+l);if(e.length)try{var t=e.contents()[0].readyState;t&&"uninitialized"==t.toLowerCase()&&setTimeout(c,100)}catch(e){r()}}t.attr("src",window.ActiveXObject?"javascript:false":"about:blank"),t.css({position:"absolute",top:-1e3,left:-1e3}),t.bind("load",r),function(e){var t=u(s);d.url&&t.attr("action",d.url);var n=t.attr("target"),i=t.attr("action");t.attr("target",l);var a=u();try{for(var o in e){var r=u('<input type="hidden" name="'+o+'">').val(e[o]).appendTo(t);a=a.add(r)}c(),t[0].submit()}finally{t.attr("action",i),n?t.attr("target",n):t.removeAttr("target"),a.remove()}}(e);var o=10;function r(){var e=u("#"+l);if(e.length){e.unbind();var t="";try{var n=e.contents().find("body"),t=n.html();if(""==t&&--o)return void setTimeout(r,100);var i,a=n.find(">textarea");a.length?t=a.val():(i=n.find(">pre")).length&&(t=i.html())}catch(e){}d.success.call(s,t),setTimeout(function(){e.unbind(),e.remove()},100)}}}function n(r,e){var t,s=u.data(r,"form").options;function n(e){var t,n=u(r);for(t in e){var i=e[t];(function(e,t){for(var n=["switchbutton","radiobutton","checkbox"],i=0;i<n.length;i++){var a,o=n[i];if((a=u(r).find("["+o+'Name="'+e+'"]')).length)return a[o]("uncheck"),a.each(function(){d(u(this)[o]("options").value,t)&&u(this)[o]("check")}),!0}if((a=u(r).find('input[name="'+e+'"][type=radio], input[name="'+e+'"][type=checkbox]')).length)return a._propAttr("checked",!1),a.each(function(){d(u(this).val(),t)&&u(this)._propAttr("checked",!0)}),!0;return!1})(t,i)||!function(e,t){var n=u(r).find('[textboxName="'+e+'"],[sliderName="'+e+'"]');if(n.length)for(var i=0;i<s.fieldTypes.length;i++){var a=s.fieldTypes[i],o=n.data(a);if(o)return o.options.multiple||o.options.range?n[a]("setValues",t):n[a]("setValue",t),!0}return!1}(t,i)&&(n.find('input[name="'+t+'"]').val(i),n.find('textarea[name="'+t+'"]').val(i),n.find('select[name="'+t+'"]').val(i))}s.onLoadSuccess.call(r,e),n.form("validate")}function d(e,t){return e==String(t)||0<=u.inArray(e,u.isArray(t)?t:[t])}"string"==typeof e?0!=s.onBeforeLoad.call(r,t={})&&u.ajax({url:e,data:t,dataType:"json",success:function(e){n(e)},error:function(){s.onLoadError.apply(r,arguments)}}):n(e)}function a(e,t){t=t||{};var n=u.data(e,"form");n?u.extend(n.options,t):u.data(e,"form",{options:u.extend({},u.fn.form.defaults,u.fn.form.parseOptions(e),t)})}function r(e,t){u.data(e,"form").options.novalidate=t,u(e).find(".validatebox-text:not(:disabled)").validatebox(t?"disableValidation":"enableValidation")}u.fn.form=function(t,e){return"string"==typeof t?(this.each(function(){a(this)}),u.fn.form.methods[t](this,e)):this.each(function(){var e,n;a(this,t),e=this,n=u.data(e,"form").options,u(e).unbind(".form"),n.ajax&&u(e).bind("submit.form",function(){return setTimeout(function(){i(e,n)},0),!1}),u(e).bind("_change.form",function(e,t){-1==u.inArray(t,n.dirtyFields)&&n.dirtyFields.push(t),n.onChange.call(this,t)}).bind("change.form",function(e){e=e.target;u(e).hasClass("textbox-text")||(-1==u.inArray(e,n.dirtyFields)&&n.dirtyFields.push(e),n.onChange.call(this,e))}),r(e,n.novalidate)})},u.fn.form.methods={options:function(e){return u.data(e[0],"form").options},submit:function(e,t){return e.each(function(){i(this,t)})},load:function(e,t){return e.each(function(){n(this,t)})},clear:function(e){return e.each(function(){!function(e){u("input,select,textarea",e).each(function(){var e,t,n,i;u(this).hasClass("textbox-value")||(e=this.type,t=this.tagName.toLowerCase(),"text"==e||"hidden"==e||"password"==e||"textarea"==t?this.value="":"file"==e?(n=u(this)).hasClass("textbox-value")||((i=n.clone().val("")).insertAfter(n),n.data("validatebox")?(n.validatebox("destroy"),i.validatebox()):n.remove()):"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1))});for(var t=u(),n=u(e),i=u.data(e,"form").options,a=0;a<i.fieldTypes.length;a++){var o=i.fieldTypes[a],r=n.find("."+o+"-f").not(t);r.length&&r[o]&&(r[o]("clear"),t=t.add(r))}n.form("validate")}(this)})},reset:function(e){return e.each(function(){!function(e){e.reset();for(var t=u(e),n=u.data(e,"form").options,i=n.fieldTypes.length-1;0<=i;i--){var a=n.fieldTypes[i],o=t.find("."+a+"-f");o.length&&o[a]&&o[a]("reset")}t.form("validate")}(this)})},validate:function(e){return function(e){if(u.fn.validatebox){e=u(e);e.find(".validatebox-text:not(:disabled)").validatebox("validate");e=e.find(".validatebox-invalid");return e.filter(":not(:disabled):first").focus(),0==e.length}return!0}(e[0])},disableValidation:function(e){return e.each(function(){r(this,!0)})},enableValidation:function(e){return e.each(function(){r(this,!1)})},resetValidation:function(e){return e.each(function(){u(this).find(".validatebox-text:not(:disabled)").validatebox("resetValidation")})},resetDirty:function(e){return e.each(function(){u(this).form("options").dirtyFields=[]})}},u.fn.form.parseOptions=function(e){var t=u(e);return u.extend({},u.parser.parseOptions(e,[{ajax:"boolean",dirty:"boolean"}]),{url:t.attr("action")?t.attr("action"):void 0})},u.fn.form.defaults={fieldTypes:["tagbox","combobox","combotree","combogrid","combotreegrid","datetimebox","datebox","combo","datetimespinner","timespinner","numberspinner","spinner","slider","searchbox","numberbox","passwordbox","filebox","textbox","switchbutton","radiobutton","checkbox"],novalidate:!1,ajax:!0,iframe:!0,dirty:!1,dirtyFields:[],url:null,queryParams:{},onSubmit:function(e){return u(this).form("validate")},onProgress:function(e){},success:function(e){},onBeforeLoad:function(e){},onLoadSuccess:function(e){},onLoadError:function(){},onChange:function(e){}}}(jQuery),function(r){r.fn.numberbox=function(i,e){if("string"!=typeof i)return i=i||{},this.each(function(){var e,t,n=r.data(this,"numberbox");n?r.extend(n.options,i):n=r.data(this,"numberbox",{options:r.extend({},r.fn.numberbox.defaults,r.fn.numberbox.parseOptions(this),i)}),e=this,t=r.data(e,"numberbox"),n=t.options,r(e).addClass("numberbox-f").textbox(n),r(e).textbox("textbox").css({imeMode:"disabled"}),r(e).attr("numberboxName",r(e).attr("textboxName")),t.numberbox=r(e).next(),t.numberbox.addClass("numberbox"),t=n.parser.call(e,n.value),n=n.formatter.call(e,t),r(e).numberbox("initValue",t).numberbox("setText",n)});var t=r.fn.numberbox.methods[i];return t?t(this,e):this.textbox(i,e)},r.fn.numberbox.methods={options:function(e){var t=e.data("textbox")?e.textbox("options"):{};return r.extend(r.data(e[0],"numberbox").options,{width:t.width,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},cloneFrom:function(e,t){return e.each(function(){r(this).textbox("cloneFrom",t),r.data(this,"numberbox",{options:r.extend(!0,{},r(t).numberbox("options"))}),r(this).addClass("numberbox-f")})},fix:function(e){return e.each(function(){var e=r(this).numberbox("options");e.value=null;e=e.parser.call(this,r(this).numberbox("getText"));r(this).numberbox("setValue",e)})},setValue:function(e,t){return e.each(function(){!function(e,t){var n=r.data(e,"numberbox").options;n.value=parseFloat(t);var t=n.parser.call(e,t),i=n.formatter.call(e,t);n.value=t,r(e).textbox("setText",i).textbox("setValue",t),i=n.formatter.call(e,r(e).textbox("getValue")),r(e).textbox("setText",i)}(this,t)})},clear:function(e){return e.each(function(){r(this).textbox("clear"),r(this).numberbox("options").value=""})},reset:function(e){return e.each(function(){r(this).textbox("reset"),r(this).numberbox("setValue",r(this).numberbox("getValue"))})}},r.fn.numberbox.parseOptions=function(e){var t=r(e);return r.extend({},r.fn.textbox.parseOptions(e),r.parser.parseOptions(e,["decimalSeparator","groupSeparator","suffix",{min:"number",max:"number",precision:"number"}]),{prefix:t.attr("prefix")?t.attr("prefix"):void 0})},r.fn.numberbox.defaults=r.extend({},r.fn.textbox.defaults,{inputEvents:{keypress:function(e){var t=e.data.target;return r(t).numberbox("options").filter.call(t,e)},blur:function(e){r(e.data.target).numberbox("fix")},keydown:function(e){13==e.keyCode&&r(e.data.target).numberbox("fix")}},min:null,max:null,precision:0,decimalSeparator:".",groupSeparator:"",prefix:"",suffix:"",filter:function(e){var t=r(this).numberbox("options"),n=r(this).numberbox("getText");if(e.metaKey||e.ctrlKey)return!0;if(0<=r.inArray(String(e.which),["46","8","13","0"]))return!0;var i=r("<span></span>");i.html(String.fromCharCode(e.which));e=i.text();return i.remove(),!e||("-"==e||e==t.decimalSeparator?-1==n.indexOf(e):e==t.groupSeparator||0<="0123456789".indexOf(e))},formatter:function(e){if(!e)return e;e+="";var t=r(this).numberbox("options"),n=e,i="",a=e.indexOf(".");if(0<=a&&(n=e.substring(0,a),i=e.substring(a+1,e.length)),t.groupSeparator)for(var o=/(\d+)(\d{3})/;o.test(n);)n=n.replace(o,"$1"+t.groupSeparator+"$2");return i?t.prefix+n+t.decimalSeparator+i+t.suffix:t.prefix+n+t.suffix},parser:function(e){e+="";var t=r(this).numberbox("options");t.prefix&&(e=r.trim(e.replace(new RegExp("\\"+r.trim(t.prefix),"g"),""))),t.suffix&&(e=r.trim(e.replace(new RegExp("\\"+r.trim(t.suffix),"g"),""))),parseFloat(e)!=t.value&&(t.groupSeparator&&(e=r.trim(e.replace(new RegExp("\\"+t.groupSeparator,"g"),""))),e=(e=t.decimalSeparator?r.trim(e.replace(new RegExp("\\"+t.decimalSeparator,"g"),".")):e).replace(/\s/g,""));e=parseFloat(e).toFixed(t.precision);return isNaN(e)?e="":"number"==typeof t.min&&e<t.min?e=t.min.toFixed(t.precision):"number"==typeof t.max&&e>t.max&&(e=t.max.toFixed(t.precision)),e}})}(jQuery),function(y){function i(e,t){var n=y.data(e,"calendar").options,i=y(e);t&&y.extend(n,{width:t.width,height:t.height}),i._size(n,i.parent()),i.find(".calendar-body")._outerHeight(i.height()-i.find(".calendar-header")._outerHeight()),i.find(".calendar-menu").is(":visible")&&u(e)}function u(e){var t=y.data(e,"calendar").options;if(y(e).find(".calendar-menu").show(),y(e).find(".calendar-menu-month-inner").is(":empty")){y(e).find(".calendar-menu-month-inner").empty();for(var n=y('<table class="calendar-mtable"></table>').appendTo(y(e).find(".calendar-menu-month-inner")),i=0,a=0;a<3;a++)for(var o=y("<tr></tr>").appendTo(n),r=0;r<4;r++)y('<td class="calendar-nav calendar-menu-month"></td>').html(t.months[i++]).attr("abbr",i).appendTo(o)}var s=y(e).find(".calendar-body"),d=y(e).find(".calendar-menu"),l=d.find(".calendar-menu-year-inner"),e=d.find(".calendar-menu-month-inner");l.find("input").val(t.year).focus(),e.find("td.calendar-selected").removeClass("calendar-selected"),e.find("td:eq("+(t.month-1)+")").addClass("calendar-selected"),d._outerWidth(s._outerWidth()),d._outerHeight(s._outerHeight()),e._outerHeight(d.height()-l._outerHeight())}function p(e){var t=y.data(e,"calendar").options;t.current&&!t.validator.call(e,t.current)&&(t.current=null);var n=new t.Date,i=n.getFullYear()+","+(n.getMonth()+1)+","+n.getDate(),a=t.current?t.current.getFullYear()+","+(t.current.getMonth()+1)+","+t.current.getDate():"",o=6-t.firstDay,r=o+1;7<=o&&(o-=7),7<=r&&(r-=7),y(e).find(".calendar-title span").html(t.months[t.month-1]+" "+t.year);n=y(e).find("div.calendar-body");n.children("table").remove();var s=['<table class="calendar-dtable" cellspacing="0" cellpadding="0" border="0">'];s.push("<thead><tr>"),t.showWeek&&s.push('<th class="calendar-week">'+t.weekNumberHeader+"</th>");for(var d=t.firstDay;d<t.weeks.length;d++)s.push("<th>"+t.weeks[d]+"</th>");for(d=0;d<t.firstDay;d++)s.push("<th>"+t.weeks[d]+"</th>");s.push("</tr></thead>"),s.push("<tbody>");for(var l=function(e,t,n){for(var i=y.data(e,"calendar").options,a=[],o=new i.Date(t,n,0).getDate(),r=1;r<=o;r++)a.push([t,n,r]);for(var s=[],d=[],l=-1;0<a.length;){var c=a.shift();d.push(c);var u=new i.Date(c[0],c[1]-1,c[2]).getDay();l==u?u=0:u==(0==i.firstDay?7:i.firstDay)-1&&(s.push(d),d=[]),l=u}d.length&&s.push(d);var p=s[0];if(p.length<7)for(;p.length<7;){var f=p[0],c=new i.Date(f[0],f[1]-1,f[2]-1);p.unshift([c.getFullYear(),c.getMonth()+1,c.getDate()])}else{for(f=p[0],d=[],r=1;r<=7;r++){c=new i.Date(f[0],f[1]-1,f[2]-r);d.unshift([c.getFullYear(),c.getMonth()+1,c.getDate()])}s.unshift(d)}for(var h=s[s.length-1];h.length<7;){var g=h[h.length-1],c=new i.Date(g[0],g[1]-1,g[2]+1);h.push([c.getFullYear(),c.getMonth()+1,c.getDate()])}if(s.length<6){for(g=h[h.length-1],d=[],r=1;r<=7;r++){c=new i.Date(g[0],g[1]-1,g[2]+r);d.push([c.getFullYear(),c.getMonth()+1,c.getDate()])}s.push(d)}return s}(e,t.year,t.month),d=0;d<l.length;d++){var c,u=l[d],p="";0==d?p="calendar-first":d==l.length-1&&(p="calendar-last"),s.push('<tr class="'+p+'">'),t.showWeek&&(c=t.getWeekNumber(new t.Date(u[0][0],parseInt(u[0][1])-1,u[0][2])),s.push('<td class="calendar-week">'+c+"</td>"));for(var f=0;f<u.length;f++){var h=u[f],g=h[0]+","+h[1]+","+h[2],b=new t.Date(h[0],parseInt(h[1])-1,h[2]),m=t.formatter.call(e,b),v=t.styler.call(e,b),x="",w="";"string"==typeof v?w=v:v&&(x=v.class||"",w=v.style||"");p="calendar-day";t.year==h[0]&&t.month==h[1]||(p+=" calendar-other-month"),g==i&&(p+=" calendar-today"),g==a&&(p+=" calendar-selected"),f==o?p+=" calendar-saturday":f==r&&(p+=" calendar-sunday"),0==f?p+=" calendar-first":f==u.length-1&&(p+=" calendar-last"),p+=" "+x,t.validator.call(e,b)||(p+=" calendar-disabled"),s.push('<td class="'+p+'" abbr="'+g+'" style="'+w+'">'+m+"</td>")}s.push("</tr>")}s.push("</tbody>"),s.push("</table>"),n.append(s.join("")),n.children("table.calendar-dtable").prependTo(n),t.onNavigate.call(e,t.year,t.month)}var e;y.fn.calendar=function(t,e){return"string"==typeof t?y.fn.calendar.methods[t](this,e):(t=t||{},this.each(function(){var n,a,o,r,e=y.data(this,"calendar");function s(e){var t=y(e).closest(".calendar-day");return t.length?t:y(e)}function d(e){var t=y(a).find(".calendar-menu"),n=t.find(".calendar-menu-year").val(),i=t.find(".calendar-selected").attr("abbr");isNaN(n)||(o.year=parseInt(n),o.month=parseInt(i),p(a)),e&&t.hide()}function l(e){o.year+=e,p(a),r.find(".calendar-menu-year").val(o.year)}function c(e){o.month+=e,12<o.month?(o.year++,o.month=1):o.month<1&&(o.year--,o.month=12),p(a),r.find("td.calendar-selected").removeClass("calendar-selected"),r.find("td:eq("+(o.month-1)+")").addClass("calendar-selected")}e?y.extend(e.options,t):(e=y.data(this,"calendar",{options:y.extend({},y.fn.calendar.defaults,y.fn.calendar.parseOptions(this),t)}),y(n=this).addClass("calendar").html('<div class="calendar-header"><div class="calendar-nav calendar-prevmonth"></div><div class="calendar-nav calendar-nextmonth"></div><div class="calendar-nav calendar-prevyear"></div><div class="calendar-nav calendar-nextyear"></div><div class="calendar-title"><span class="calendar-text"></span></div></div><div class="calendar-body"><div class="calendar-menu"><div class="calendar-menu-year-inner"><span class="calendar-nav calendar-menu-prev"></span><span><input class="calendar-menu-year" type="text"></input></span><span class="calendar-nav calendar-menu-next"></span></div><div class="calendar-menu-month-inner"></div></div></div>'),y(n).bind("_resize",function(e,t){return(y(this).hasClass("easyui-fluid")||t)&&i(n),!1})),0==e.options.border&&y(this).addClass("calendar-noborder"),i(this),a=this,o=y.data(a,"calendar").options,(r=y(a).find(".calendar-menu")).find(".calendar-menu-year").unbind(".calendar").bind("keypress.calendar",function(e){13==e.keyCode&&d(!0)}),y(a).unbind(".calendar").bind("mouseover.calendar",function(e){e=s(e.target);(e.hasClass("calendar-nav")||e.hasClass("calendar-text")||e.hasClass("calendar-day")&&!e.hasClass("calendar-disabled"))&&e.addClass("calendar-nav-hover")}).bind("mouseout.calendar",function(e){e=s(e.target);(e.hasClass("calendar-nav")||e.hasClass("calendar-text")||e.hasClass("calendar-day")&&!e.hasClass("calendar-disabled"))&&e.removeClass("calendar-nav-hover")}).bind("click.calendar",function(e){var t,n,i=s(e.target);i.hasClass("calendar-menu-next")||i.hasClass("calendar-nextyear")?l(1):i.hasClass("calendar-menu-prev")||i.hasClass("calendar-prevyear")?l(-1):i.hasClass("calendar-menu-month")?(r.find(".calendar-selected").removeClass("calendar-selected"),i.addClass("calendar-selected"),d(!0)):i.hasClass("calendar-prevmonth")?c(-1):i.hasClass("calendar-nextmonth")?c(1):i.hasClass("calendar-text")?r.is(":visible")?r.hide():u(a):i.hasClass("calendar-day")&&(i.hasClass("calendar-disabled")||(t=o.current,i.closest("div.calendar-body").find(".calendar-selected").removeClass("calendar-selected"),i.addClass("calendar-selected"),n=i.attr("abbr").split(","),e=parseInt(n[0]),i=parseInt(n[1]),n=parseInt(n[2]),o.current=new o.Date(e,i-1,n),o.onSelect.call(a,o.current),t&&t.getTime()==o.current.getTime()||o.onChange.call(a,o.current,t),o.year==e&&o.month==i||(o.year=e,o.month=i,p(a))))}),p(this),y(this).find("div.calendar-menu").hide()}))},y.fn.calendar.methods={options:function(e){return y.data(e[0],"calendar").options},resize:function(e,t){return e.each(function(){i(this,t)})},moveTo:function(e,n){return e.each(function(){var e,t;n?(t=y(this).calendar("options")).validator.call(this,n)&&(e=t.current,y(this).calendar({year:n.getFullYear(),month:n.getMonth()+1,current:n}),e&&e.getTime()==n.getTime()||t.onChange.call(this,t.current,e)):(t=new t.Date,y(this).calendar({year:t.getFullYear(),month:t.getMonth()+1,current:n}))})}},y.fn.calendar.parseOptions=function(e){y(e);return y.extend({},y.parser.parseOptions(e,["weekNumberHeader",{firstDay:"number",fit:"boolean",border:"boolean",showWeek:"boolean"}]))},y.fn.calendar.defaults={Date:Date,width:180,height:180,fit:!1,border:!0,showWeek:!1,firstDay:0,weeks:["S","M","T","W","T","F","S"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],year:(new Date).getFullYear(),month:(new Date).getMonth()+1,current:(e=new Date,new Date(e.getFullYear(),e.getMonth(),e.getDate())),weekNumberHeader:"",getWeekNumber:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));e=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1},formatter:function(e){return e.getDate()},styler:function(e){return""},validator:function(e){return!0},onSelect:function(e){},onChange:function(e,t){},onNavigate:function(e,t){}}}(jQuery),function(s){function o(e,t){var n=s(e).spinner("options");n.spin.call(e,t),n[t?"onSpinDown":"onSpinUp"].call(e),s(e).spinner("validate")}s.fn.spinner=function(a,e){if("string"!=typeof a)return a=a||{},this.each(function(){var e,t,r,n,i=s.data(this,"spinner");i?s.extend(i.options,a):i=s.data(this,"spinner",{options:s.extend({},s.fn.spinner.defaults,s.fn.spinner.parseOptions(this),a)}),e=this,t=s.data(e,"spinner"),r=t.options,n=s.extend(!0,[],r.icons),"left"==r.spinAlign||"right"==r.spinAlign?(r.spinArrow=!0,r.iconAlign=r.spinAlign,i={iconCls:"spinner-button-updown",handler:function(e){var t=s(e.target).closest(".spinner-arrow-up,.spinner-arrow-down");o(e.data.target,t.hasClass("spinner-arrow-down"))}},"left"==r.spinAlign?n.unshift(i):n.push(i)):(r.spinArrow=!1,"vertical"==r.spinAlign?("top"!=r.buttonAlign&&(r.buttonAlign="bottom"),r.clsLeft="textbox-button-bottom",r.clsRight="textbox-button-top"):(r.clsLeft="textbox-button-left",r.clsRight="textbox-button-right")),s(e).addClass("spinner-f").textbox(s.extend({},r,{icons:n,doSize:!1,onResize:function(e,t){var n,i,a,o;r.spinArrow||(a=(o=s(this).next()).find(".textbox-button:not(.spinner-button)")).length&&(n=a.outerWidth(),i=a.outerHeight(),a=o.find(".spinner-button."+r.clsLeft),o=o.find(".spinner-button."+r.clsRight),"right"==r.buttonAlign?o.css("marginRight",n+"px"):"left"==r.buttonAlign?a.css("marginLeft",n+"px"):"top"==r.buttonAlign?o.css("marginTop",i+"px"):a.css("marginBottom",i+"px")),r.onResize.call(this,e,t)}})),s(e).attr("spinnerName",s(e).attr("textboxName")),t.spinner=s(e).next(),t.spinner.addClass("spinner"),r.spinArrow?t.spinner.find(".spinner-button-updown").append('<span class="spinner-arrow spinner-button-top"><span class="spinner-arrow-up"></span></span><span class="spinner-arrow spinner-button-bottom"><span class="spinner-arrow-down"></span></span>'):(n=s('<a href="javascript:;" class="textbox-button spinner-button"></a>').addClass(r.clsLeft).appendTo(t.spinner),t=s('<a href="javascript:;" class="textbox-button spinner-button"></a>').addClass(r.clsRight).appendTo(t.spinner),n.linkbutton({iconCls:r.reversed?"spinner-button-up":"spinner-button-down",onClick:function(){o(e,!r.reversed)}}),t.linkbutton({iconCls:r.reversed?"spinner-button-down":"spinner-button-up",onClick:function(){o(e,r.reversed)}}),r.disabled&&s(e).spinner("disable"),r.readonly&&s(e).spinner("readonly")),s(e).spinner("resize")});var t=s.fn.spinner.methods[a];return t?t(this,e):this.textbox(a,e)},s.fn.spinner.methods={options:function(e){var t=e.textbox("options");return s.extend(s.data(e[0],"spinner").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})}},s.fn.spinner.parseOptions=function(e){return s.extend({},s.fn.textbox.parseOptions(e),s.parser.parseOptions(e,["min","max","spinAlign",{increment:"number",reversed:"boolean"}]))},s.fn.spinner.defaults=s.extend({},s.fn.textbox.defaults,{min:null,max:null,increment:1,spinAlign:"right",reversed:!1,spin:function(e){},onSpinUp:function(){},onSpinDown:function(){}})}(jQuery),function(a){a.fn.numberspinner=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=a.data(this,"numberspinner");e?a.extend(e.options,t):a.data(this,"numberspinner",{options:a.extend({},a.fn.numberspinner.defaults,a.fn.numberspinner.parseOptions(this),t)}),function(e){a(e).addClass("numberspinner-f");var t=a.data(e,"numberspinner").options;a(e).numberbox(a.extend({},t,{doSize:!1})).spinner(t),a(e).numberbox("setValue",t.value)}(this)});var n=a.fn.numberspinner.methods[t];return n?n(this,e):this.numberbox(t,e)},a.fn.numberspinner.methods={options:function(e){var t=e.numberbox("options");return a.extend(a.data(e[0],"numberspinner").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})}},a.fn.numberspinner.parseOptions=function(e){return a.extend({},a.fn.spinner.parseOptions(e),a.fn.numberbox.parseOptions(e),{})},a.fn.numberspinner.defaults=a.extend({},a.fn.spinner.defaults,a.fn.numberbox.defaults,{spin:function(e){var t,n,i;t=this,n=e,i=a.data(t,"numberspinner").options,e=parseFloat(a(t).numberbox("getValue")||i.value)||0,n?e-=i.increment:e+=i.increment,a(t).numberbox("setValue",e)}})}(jQuery),function(s){function d(e,t){var n=s.data(e,"timespinner").options;null!=t&&(n.highlight=t);t=n.selections[n.highlight];t&&(n=s(e).timespinner("textbox"),s(e).timespinner("setSelectionRange",{start:t[0],end:t[1]}),n.focus())}s.fn.timespinner=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var e,t=s.data(this,"timespinner");t?s.extend(t.options,n):s.data(this,"timespinner",{options:s.extend({},s.fn.timespinner.defaults,s.fn.timespinner.parseOptions(this),n)}),e=this,t=s.data(e,"timespinner").options,s(e).addClass("timespinner-f").spinner(t),t=t.formatter.call(e,t.parser.call(e,t.value)),s(e).timespinner("initValue",t)});var t=s.fn.timespinner.methods[n];return t?t(this,e):this.spinner(n,e)},s.fn.timespinner.methods={options:function(e){var t=e.data("spinner")?e.spinner("options"):{};return s.extend(s.data(e[0],"timespinner").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},setValue:function(e,i){return e.each(function(){var e,t,n;e=this,t=i,n=s.data(e,"timespinner").options,t=n.parser.call(e,t),t=n.formatter.call(e,t),s(e).spinner("setValue",t)})},getHours:function(e){e=s.data(e[0],"timespinner").options.parser.call(e[0],e.timespinner("getValue"));return e?e.getHours():null},getMinutes:function(e){e=s.data(e[0],"timespinner").options.parser.call(e[0],e.timespinner("getValue"));return e?e.getMinutes():null},getSeconds:function(e){e=s.data(e[0],"timespinner").options.parser.call(e[0],e.timespinner("getValue"));return e?e.getSeconds():null}},s.fn.timespinner.parseOptions=function(e){return s.extend({},s.fn.spinner.parseOptions(e),s.parser.parseOptions(e,["separator",{hour12:"boolean",showSeconds:"boolean",highlight:"number"}]))},s.fn.timespinner.defaults=s.extend({},s.fn.spinner.defaults,{inputEvents:s.extend({},s.fn.spinner.defaults.inputEvents,{click:function(e){!function(e){for(var t=e.data.target,n=s.data(t,"timespinner").options,i=s(t).timespinner("getSelectionStart"),a=0;a<n.selections.length;a++){var o=n.selections[a];if(i>=o[0]&&i<=o[1])return void d(t,a)}}.call(this,e)},blur:function(e){e=s(e.data.target);e.timespinner("setValue",e.timespinner("getText"))},keydown:function(e){13==e.keyCode&&(e=s(e.data.target)).timespinner("setValue",e.timespinner("getText"))}}),formatter:function(e){if(!e)return"";var t=s(this).timespinner("options"),n=e.getHours(),i=e.getMinutes(),a=e.getSeconds(),e="";t.hour12&&(e=12<=n?t.ampm[1]:t.ampm[0],0==(n%=12)&&(n=12));i=[o(n),o(i)];t.showSeconds&&i.push(o(a));e=i.join(t.separator)+" "+e;return s.trim(e);function o(e){return(e<10?"0":"")+e}},parser:function(e){var a=s(this).timespinner("options"),t=n(e);return t&&((e=n(a.min))&&t<e&&(t=e),(e=n(a.max))&&e<t&&(t=e)),t;function n(e){if(!e)return null;var t=e.split(" "),n=t[0].split(a.separator),i=parseInt(n[0],10)||0,e=parseInt(n[1],10)||0,n=parseInt(n[2],10)||0;return a.hour12&&((t=t[1])==a.ampm[1]&&i<12?i+=12:t==a.ampm[0]&&12==i&&(i-=12)),new Date(1900,0,0,i,e,n)}},selections:[[0,2],[3,5],[6,8],[9,11]],separator:":",showSeconds:!1,highlight:0,hour12:!1,ampm:["AM","PM"],spin:function(e){var t,n,i,a,o,r;t=this,n=e,i=s.data(t,"timespinner").options,a=s(t).timespinner("getValue"),o=i.selections[i.highlight],r=a.substring(0,o[0]),e=a.substring(o[0],o[1]),a=a.substring(o[1]),e==i.ampm[0]?e=i.ampm[1]:e==i.ampm[1]?e=i.ampm[0]:(e=parseInt(e,10)||0,i.selections.length-4==i.highlight&&i.hour12&&(12==e?e=0:11!=e||n||(o=a.replace(i.ampm[0],i.ampm[1]),a=a!=o?o:a.replace(i.ampm[1],i.ampm[0]))),e+=i.increment*(n?-1:1)),a=r+e+a,s(t).timespinner("setValue",a),d(t)}})}(jQuery),function(i){i.fn.datetimespinner=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var e,t=i.data(this,"datetimespinner");t?i.extend(t.options,n):i.data(this,"datetimespinner",{options:i.extend({},i.fn.datetimespinner.defaults,i.fn.datetimespinner.parseOptions(this),n)}),e=this,t=i.data(e,"datetimespinner").options,i(e).addClass("datetimespinner-f").timespinner(t)});var t=i.fn.datetimespinner.methods[n];return t?t(this,e):this.timespinner(n,e)},i.fn.datetimespinner.methods={options:function(e){var t=e.timespinner("options");return i.extend(i.data(e[0],"datetimespinner").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})}},i.fn.datetimespinner.parseOptions=function(e){return i.extend({},i.fn.timespinner.parseOptions(e),i.parser.parseOptions(e,[]))},i.fn.datetimespinner.defaults=i.extend({},i.fn.timespinner.defaults,{formatter:function(e){return e?i.fn.datebox.defaults.formatter.call(this,e)+" "+i.fn.timespinner.defaults.formatter.call(this,e):""},parser:function(e){if(!(e=i.trim(e)))return null;var t=e.split(" "),e=i.fn.datebox.defaults.parser.call(this,t[0]);if(t.length<2)return e;t=i.fn.timespinner.defaults.parser.call(this,t[1]+(t[2]?" "+t[2]:""));return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())},selections:[[0,2],[3,5],[6,10],[11,13],[14,16],[17,19],[20,22]]})}(jQuery),function($){var DATAGRID_SERNO=0;function indexOfArray(e,t){return $.easyui.indexOfArray(e,t)}function removeArrayItem(e,t,n){$.easyui.removeArrayItem(e,t,n)}function addArrayItem(e,t,n){$.easyui.addArrayItem(e,t,n)}function getArguments(e,t){return $.data(e,"treegrid")?t.slice(1):t}function createStyleSheet(e){var t=$.data(e,"datagrid"),n=t.options,i=t.panel,e=t.dc,t=null;n.sharedStyleSheet?t="boolean"==typeof n.sharedStyleSheet?"head":n.sharedStyleSheet:(t=i.closest("div.datagrid-view")).length||(t=e.view);var r=$(t),s=(s=$.data(r[0],"ss"))||$.data(r[0],"ss",{cache:{},dirty:[]});return{add:function(e){for(var t=['<style type="text/css" easyui="true">'],n=0;n<e.length;n++)s.cache[e[n][0]]={width:e[n][1]};var i,a=0;for(i in s.cache){var o=s.cache[i];o.index=a++,t.push(i+"{width:"+o.width+"}")}t.push("</style>"),$(t.join("\n")).appendTo(r),r.children("style[easyui]:not(:last)").remove()},getRule:function(e){var t=r.children("style[easyui]:last")[0],t=t.styleSheet||t.sheet||document.styleSheets[document.styleSheets.length-1];return(t.cssRules||t.rules)[e]},set:function(e,t){e=s.cache[e];e&&(e.width=t,(e=this.getRule(e.index))&&(e.style.width=t))},remove:function(e){var t,n=[];for(t in s.cache)-1==t.indexOf(e)&&n.push([t,s.cache[t].width]);s.cache={},this.add(n)},dirty:function(e){e&&s.dirty.push(e)},clean:function(){for(var e=0;e<s.dirty.length;e++)this.remove(s.dirty[e]);s.dirty=[]}}}function setSize(e,t){var n=$.data(e,"datagrid"),e=n.options,n=n.panel;t&&$.extend(e,t),1==e.fit&&(t=n.panel("panel").parent(),e.width=t.width(),e.height=t.height()),n.panel("resize",e)}function setBodySize(e){var t,n,i,a,o,r,s,d,l,c=$.data(e,"datagrid"),u=c.options,p=c.dc,f=c.panel;f.is(":visible")&&(t=f.width(),n=f.height(),i=p.view,a=p.view1,o=p.view2,s=a.children("div.datagrid-header"),l=o.children("div.datagrid-header"),r=s.find("table"),e=l.find("table"),i.width(t),c=s.children("div.datagrid-header-inner").show(),a.width(c.find("table").width()),u.showHeader||c.hide(),o.width(t-a._outerWidth()),a.children()._outerWidth(a.width()),o.children()._outerWidth(o.width()),(s=s.add(l).add(r).add(e)).css("height",""),e=Math.max(r.height(),e.height()),s._outerHeight(e),i.children(".datagrid-empty").css("top",e+"px"),p.body1.add(p.body2).children("table.datagrid-btable-frozen").css({position:"absolute",top:p.header2._outerHeight()}),e=p.body2.children("table.datagrid-btable-frozen")._outerHeight(),d=e+l._outerHeight()+o.children(".datagrid-footer")._outerHeight(),f.children(":not(.datagrid-view,.datagrid-mask,.datagrid-mask-msg)").each(function(){d+=$(this)._outerHeight()}),p=f.outerHeight()-f.height(),l=f._size("minHeight")||"",f=f._size("maxHeight")||"",a.add(o).children("div.datagrid-body").css({marginTop:e,height:isNaN(parseInt(u.height))?"":n-d,minHeight:l?l-p-d:"",maxHeight:f?f-p-d:""}),i.height(o.height()))}function fixRowHeight(e,t,n){$.data(e,"datagrid").data.rows;var i,a,o,r=$.data(e,"datagrid").options,s=$.data(e,"datagrid").dc,d=$('<tr class="datagrid-row" style="position:absolute;left:-999999px"></tr>').appendTo("body");d.outerHeight();function l(e,t){for(var n=0;n<t.length;n++);}d.remove(),s.body1.is(":empty")||r.nowrap&&!r.autoRowHeight&&!n||(null!=t?l(r.finder.getTr(e,t,"body",1),r.finder.getTr(e,t,"body",2)):(l(r.finder.getTr(e,0,"allbody",1),r.finder.getTr(e,0,"allbody",2)),r.showFooter&&l(r.finder.getTr(e,0,"allfooter",1),r.finder.getTr(e,0,"allfooter",2)))),setBodySize(e),"auto"==r.height&&(t=s.body1.parent(),i=s.body2,o=a=0,$(i).children().each(function(){var e=$(this);e.is(":visible")&&(o+=e._outerHeight(),a<e._outerWidth()&&(a=e._outerWidth()))}),r=(e={width:a,height:o}).height,e.width>i.width()&&(r+=18),r-=parseInt(i.css("marginTop"))||0,t.height(r),i.height(r),s.view.height(s.view2.height())),s.body2.triggerHandler("scroll")}function freezeRow(n,i){var e=$.data(n,"datagrid"),a=e.options,o=e.dc;function t(e){var t=a.finder.getTr(n,i,"body",e?1:2);(e?o.body1:o.body2).children("table.datagrid-btable-frozen").append(t)}o.body2.children("table.datagrid-btable-frozen").length||o.body1.add(o.body2).prepend('<table class="datagrid-btable datagrid-btable-frozen" cellspacing="0" cellpadding="0"></table>'),t(!0),t(!1),setBodySize(n)}function wrapGrid(target,rownumbers){function getColumns(){var frozenColumns=[],columns=[];return $(target).children("thead").each(function(){var opt=$.parser.parseOptions(this,[{frozen:"boolean"}]);$(this).find("tr").each(function(){var cols=[];$(this).find("th").each(function(){var th=$(this),col=$.extend({},$.parser.parseOptions(this,["id","field","align","halign","order","width",{sortable:"boolean",checkbox:"boolean",resizable:"boolean",fixed:"boolean"},{rowspan:"number",colspan:"number"}]),{title:th.html()||void 0,hidden:!!th.attr("hidden")||void 0,formatter:th.attr("formatter")?eval(th.attr("formatter")):void 0,styler:th.attr("styler")?eval(th.attr("styler")):void 0,sorter:th.attr("sorter")?eval(th.attr("sorter")):void 0}),s;col.width&&-1==String(col.width).indexOf("%")&&(col.width=parseInt(col.width)),th.attr("editor")&&(s=$.trim(th.attr("editor")),"{"==s.substr(0,1)?col.editor=eval("("+s+")"):col.editor=s),cols.push(col)}),(opt.frozen?frozenColumns:columns).push(cols)})}),[frozenColumns,columns]}var panel=$('<div class="datagrid-wrap"><div class="datagrid-view"><div class="datagrid-view1"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"><div class="datagrid-body-inner"></div></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div><div class="datagrid-view2"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div></div></div>').insertAfter(target);panel.panel({doSize:!1,cls:"datagrid"}),$(target).addClass("datagrid-f").hide().appendTo(panel.children("div.datagrid-view"));var cc=getColumns(),view=panel.children("div.datagrid-view"),view1=view.children("div.datagrid-view1"),view2=view.children("div.datagrid-view2");return{panel:panel,frozenColumns:cc[0],columns:cc[1],dc:{view:view,view1:view1,view2:view2,header1:view1.children("div.datagrid-header").children("div.datagrid-header-inner"),header2:view2.children("div.datagrid-header").children("div.datagrid-header-inner"),body1:view1.children("div.datagrid-body").children("div.datagrid-body-inner"),body2:view2.children("div.datagrid-body"),footer1:view1.children("div.datagrid-footer").children("div.datagrid-footer-inner"),footer2:view2.children("div.datagrid-footer").children("div.datagrid-footer-inner")}}}function buildGrid(target){var state=$.data(target,"datagrid"),opts=state.options,dc=state.dc,panel=state.panel;state.ss=$(target).datagrid("createStyleSheet"),panel.panel($.extend({},opts,{id:null,doSize:!1,onResize:function(e,t){$.data(target,"datagrid")&&(setBodySize(target),$(target).datagrid("fitColumns"),opts.onResize.call(panel,e,t))},onExpand:function(){$.data(target,"datagrid")&&($(target).datagrid("fixRowHeight").datagrid("fitColumns"),opts.onExpand.call(panel))}}));var prefixId=$(target).attr("id")||"",pager,ptop;if(prefixId&&(prefixId+="_"),state.rowIdPrefix=prefixId+"datagrid-row-r"+ ++DATAGRID_SERNO,state.cellClassPrefix=prefixId+"datagrid-cell-c"+DATAGRID_SERNO,createColumnHeader(dc.header1,opts.frozenColumns,!0),createColumnHeader(dc.header2,opts.columns,!1),createColumnStyle(),dc.header1.add(dc.header2).css("display",opts.showHeader?"block":"none"),dc.footer1.add(dc.footer2).css("display",opts.showFooter?"block":"none"),opts.toolbar)if($.isArray(opts.toolbar)){$("div.datagrid-toolbar",panel).remove();for(var tb=$('<div class="datagrid-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').prependTo(panel),tr=tb.find("tr"),i=0;i<opts.toolbar.length;i++){var btn=opts.toolbar[i],td,tool;"-"==btn?$('<td><div class="datagrid-btn-separator"></div></td>').appendTo(tr):(td=$("<td></td>").appendTo(tr),tool=$('<a href="javascript:;"></a>').appendTo(td),tool[0].onclick=eval(btn.handler||function(){}),tool.linkbutton($.extend({},btn,{plain:!0})))}}else $(opts.toolbar).addClass("datagrid-toolbar").prependTo(panel),$(opts.toolbar).show();else $("div.datagrid-toolbar",panel).remove();function createColumnHeader(e,t,n){if(t){$(e).show(),$(e).empty();var i=$('<div class="datagrid-cell" style="position:absolute;left:-99999px"></div>').appendTo("body");i._outerWidth(99);var a=100-parseInt(i[0].style.width);i.remove();var o=[],r=[],s=[];opts.sortName&&(o=opts.sortName.split(","),r=opts.sortOrder.split(","));for(var d=$('<table class="datagrid-htable" border="0" cellspacing="0" cellpadding="0"><tbody></tbody></table>').appendTo(e),l=0;l<t.length;l++)for(var c=$('<tr class="datagrid-header-row"></tr>').appendTo($("tbody",d)),u=t[l],p=0;p<u.length;p++){var f=u[p],h="";f.rowspan&&(h+='rowspan="'+f.rowspan+'" '),f.colspan&&(h+='colspan="'+f.colspan+'" ',f.id||(f.id=["datagrid-td-group"+DATAGRID_SERNO,l,p].join("-"))),f.id&&(h+='id="'+f.id+'"');var g,b=$("<td "+h+"></td>").appendTo(c);f.checkbox?(b.attr("field",f.field),$('<div class="datagrid-header-check"></div>').html('<input type="checkbox"/>').appendTo(b)):f.field?(b.attr("field",f.field),b.append('<div class="datagrid-cell"><span></span><span class="datagrid-sort-icon"></span></div>'),b.find("span:first").html(f.title),g=b.find("div.datagrid-cell"),0<=(h=indexOfArray(o,f.field))&&g.addClass("datagrid-sort-"+r[h]),f.sortable&&g.addClass("datagrid-sort"),0==f.resizable&&g.attr("resizable","false"),f.width?(h=$.parser.parseValue("width",f.width,dc.view,opts.scrollbarSize+(opts.rownumbers?opts.rownumberWidth:0)),f.deltaWidth=a,f.boxWidth=h-a):f.auto=!0,g.css("text-align",f.halign||f.align||""),f.cellClass=state.cellClassPrefix+"-"+f.field.replace(/[\.|\s]/g,"-"),g.addClass(f.cellClass)):$('<div class="datagrid-cell-group"></div>').html(f.title).appendTo(b),f.hidden&&(b.hide(),s.push(f.field))}n&&opts.rownumbers&&(b=$('<td rowspan="'+opts.frozenColumns.length+'"><div class="datagrid-header-rownumber"></div></td>'),0==$("tr",d).length?b.wrap('<tr class="datagrid-header-row"></tr>').parent().appendTo($("tbody",d)):b.prependTo($("tr:first",d)));for(l=0;l<s.length;l++)fixColumnSpan(target,s[l],-1)}}function createColumnStyle(){for(var e=[[".datagrid-header-rownumber",opts.rownumberWidth-1+"px"],[".datagrid-cell-rownumber",opts.rownumberWidth-1+"px"]],t=getColumnFields(target,!0).concat(getColumnFields(target)),n=0;n<t.length;n++){var i=getColumnOption(target,t[n]);i&&!i.checkbox&&e.push(["."+i.cellClass,i.boxWidth?i.boxWidth+"px":"auto"])}state.ss.add(e),state.ss.dirty(state.cellSelectorPrefix),state.cellSelectorPrefix="."+state.cellClassPrefix}$("div.datagrid-pager",panel).remove(),opts.pagination&&(pager=$('<div class="datagrid-pager"></div>'),"bottom"==opts.pagePosition?pager.appendTo(panel):"top"==opts.pagePosition?pager.addClass("datagrid-pager-top").prependTo(panel):(ptop=$('<div class="datagrid-pager datagrid-pager-top"></div>').prependTo(panel),pager.appendTo(panel),pager=pager.add(ptop)),pager.pagination({total:0,pageNumber:opts.pageNumber,pageSize:opts.pageSize,pageList:opts.pageList,onSelectPage:function(e,t){opts.pageNumber=e||1,opts.pageSize=t,pager.pagination("refresh",{pageNumber:e,pageSize:t}),request(target)}}),opts.pageSize=pager.pagination("options").pageSize)}function bindEvents(i){var a=$.data(i,"datagrid"),t=a.panel,o=a.options,r=a.dc,s=r.header1.add(r.header2);for(d in s.unbind(".datagrid"),o.headerEvents)s.bind(d+".datagrid",o.headerEvents[d]);var e=s.find("div.datagrid-cell"),n="right"==o.resizeHandle?"e":"left"==o.resizeHandle?"w":"e,w";e.each(function(){$(this).resizable({handles:n,edge:o.resizeEdge,disabled:!!$(this).attr("resizable")&&"false"==$(this).attr("resizable"),minWidth:25,onStartResize:function(e){a.resizing=!0,s.css("cursor",$("body").css("cursor")),a.proxy||(a.proxy=$('<div class="datagrid-resize-proxy"></div>').appendTo(r.view)),"e"==e.data.dir?e.data.deltaEdge=$(this)._outerWidth()-(e.pageX-$(this).offset().left):e.data.deltaEdge=$(this).offset().left-e.pageX-1,a.proxy.css({left:e.pageX-$(t).offset().left-1+e.data.deltaEdge,display:"none"}),setTimeout(function(){a.proxy&&a.proxy.show()},500)},onResize:function(e){return a.proxy.css({left:e.pageX-$(t).offset().left-1+e.data.deltaEdge,display:"block"}),!1},onStopResize:function(e){s.css("cursor",""),$(this).css("height","");var t=$(this).parent().attr("field"),n=getColumnOption(i,t);n.width=$(this)._outerWidth()+1,n.boxWidth=n.width-n.deltaWidth,n.auto=void 0,$(this).css("width",""),$(i).datagrid("fixColumnSize",t),a.proxy.remove(),a.proxy=null,$(this).parents("div:first.datagrid-header").parent().hasClass("datagrid-view1")&&setBodySize(i),$(i).datagrid("fitColumns"),o.onResizeColumn.call(i,t,n.width),setTimeout(function(){a.resizing=!1},0)}})});var d,l=r.body1.add(r.body2);for(d in l.unbind(),o.rowEvents)l.bind(d,o.rowEvents[d]);r.body1.bind("mousewheel DOMMouseScroll MozMousePixelScroll",function(e){e.preventDefault();var t=e.originalEvent||window.event,n=t.wheelDelta||-1*t.detail;"deltaY"in t&&(n=-1*t.deltaY);e=$(e.target).closest("div.datagrid-view").children(".datagrid-f").data("datagrid").dc;e.body2.scrollTop(e.body2.scrollTop()-n)}),r.body2.bind("scroll",function(){var e=r.view1.children("div.datagrid-body"),t=$(this).scrollTop();$(this).scrollTop(t),e.scrollTop(t);var n=r.body1.children(":first"),t=r.body2.children(":first");n.length&&t.length&&((n=n.offset().top)!=(t=t.offset().top)&&e.scrollTop(e.scrollTop()+n-t)),r.view2.children("div.datagrid-header,div.datagrid-footer")._scrollLeft($(this)._scrollLeft()),r.body2.children("table.datagrid-btable-frozen").css("left",-$(this)._scrollLeft())})}function headerOverEventHandler(n){return function(e){var t=$(e.target).closest("td[field]");t.length&&(e=getTableTarget(t),!$(e).data("datagrid").resizing&&n?t.addClass("datagrid-header-over"):t.removeClass("datagrid-header-over"))}}function headerClickEventHandler(e){var t=getTableTarget(e.target),n=$(t).datagrid("options"),i=$(e.target).closest("input[type=checkbox]");if(i.length){if(n.singleSelect&&n.selectOnCheck)return!1;(i.is(":checked")?checkAll:uncheckAll)(t),e.stopPropagation()}else{var a=$(e.target).closest(".datagrid-cell");a.length&&(n=a.offset().left+5,i=a.offset().left+a._outerWidth()-5,e.pageX<i&&e.pageX>n&&sortGrid(t,a.parent().attr("field")))}}function headerDblclickEventHandler(e){var t,n,i=getTableTarget(e.target),a=$(i).datagrid("options"),o=$(e.target).closest(".datagrid-cell");o.length&&(t=o.offset().left+5,n=o.offset().left+o._outerWidth()-5,!("right"==a.resizeHandle?e.pageX>n:"left"==a.resizeHandle?e.pageX<t:e.pageX<t||e.pageX>n)||0!=(o=getColumnOption(i,n=o.parent().attr("field"))).resizable&&($(i).datagrid("autoSizeColumn",n),o.auto=!1))}function headerMenuEventHandler(e){var t=getTableTarget(e.target),n=$(t).datagrid("options"),i=$(e.target).closest("td[field]");n.onHeaderContextMenu.call(t,e,i.attr("field"))}function hoverEventHandler(n){return function(e){var t=getClosestTr(e.target);t&&(e=getTableTarget(t),$.data(e,"datagrid").resizing||(t=getTrIndex(t),n?highlightRow(e,t):$.data(e,"datagrid").options.finder.getTr(e,t).removeClass("datagrid-row-over")))}}function clickEventHandler(e){var t=getClosestTr(e.target);if(t){var n=getTableTarget(t),i=$.data(n,"datagrid").options,a=getTrIndex(t),o=$(e.target);if(o.parent().hasClass("datagrid-cell-check"))i.singleSelect&&i.selectOnCheck?(o._propAttr("checked",!o.is(":checked")),checkRow(n,a)):o.is(":checked")?(o._propAttr("checked",!1),checkRow(n,a)):(o._propAttr("checked",!0),uncheckRow(n,a));else{var r=i.finder.getRow(n,a),o=o.closest("td[field]",t);if(o.length&&(o=o.attr("field"),i.onClickCell.call(n,a,o,r[o])),1==i.singleSelect)selectRow(n,a);else if(i.ctrlSelect)if(e.metaKey||e.ctrlKey)(t.hasClass("datagrid-row-selected")?unselectRow:selectRow)(n,a);else if(e.shiftKey){$(n).datagrid("clearSelections");for(var e=Math.min(i.lastSelectedIndex||0,a),s=Math.max(i.lastSelectedIndex||0,a),d=e;d<=s;d++)selectRow(n,d)}else $(n).datagrid("clearSelections"),selectRow(n,a),i.lastSelectedIndex=a;else(t.hasClass("datagrid-row-selected")?unselectRow:selectRow)(n,a);i.onClickRow.apply(n,getArguments(n,[a,r]))}}}function dblclickEventHandler(e){var t,n,i,a,o=getClosestTr(e.target);o&&(t=getTableTarget(o),n=$.data(t,"datagrid").options,i=getTrIndex(o),a=n.finder.getRow(t,i),(o=$(e.target).closest("td[field]",o)).length&&(o=o.attr("field"),n.onDblClickCell.call(t,i,o,a[o])),n.onDblClickRow.apply(t,getArguments(t,[i,a])))}function contextmenuEventHandler(e){var t,n,i,a=getClosestTr(e.target);a?(n=getTableTarget(a),i=$.data(n,"datagrid").options,a=getTrIndex(a),t=i.finder.getRow(n,a),i.onRowContextMenu.call(n,e,a,t)):(t=getClosestTr(e.target,".datagrid-body"))&&(n=getTableTarget(t),(i=$.data(n,"datagrid").options).onRowContextMenu.call(n,e,-1,null))}function getTableTarget(e){return $(e).closest("div.datagrid-view").children(".datagrid-f")[0]}function getClosestTr(e,t){t=$(e).closest(t||"tr.datagrid-row");if(t.length&&t.parent().length)return t}function getTrIndex(e){return e.attr("datagrid-row-index")?parseInt(e.attr("datagrid-row-index")):e.attr("node-id")}function sortGrid(e,t){var n=$.data(e,"datagrid"),i=n.options,a={sortName:i.sortName,sortOrder:i.sortOrder};"object"==typeof(t=t||{})&&$.extend(a,t);var o=[],r=[];if(a.sortName&&(o=a.sortName.split(","),r=a.sortOrder.split(",")),"string"==typeof t){var s=t;if(!(p=getColumnOption(e,s)).sortable||n.resizing)return;var d=p.order||"asc",l=indexOfArray(o,s);0<=l?(t="asc"==r[l]?"desc":"asc",i.multiSort&&t==d?(o.splice(l,1),r.splice(l,1)):r[l]=t):i.multiSort?(o.push(s),r.push(d)):(o=[s],r=[d]),a.sortName=o.join(","),a.sortOrder=r.join(",")}if(0!=i.onBeforeSortColumn.call(e,a.sortName,a.sortOrder)){$.extend(i,a);var n=n.dc,c=n.header1.add(n.header2);c.find("div.datagrid-cell").removeClass("datagrid-sort-asc datagrid-sort-desc");for(var u=0;u<o.length;u++){var p=getColumnOption(e,o[u]);c.find("div."+p.cellClass).addClass("datagrid-sort-"+r[u])}i.remoteSort?request(e):loadData(e,$(e).datagrid("getData")),i.onSortColumn.call(e,i.sortName,i.sortOrder)}}function fixColumnSpan(r,s,d){function e(e){var t=getColumnLayout(r,e);if(t.length){var n=indexOfArray(t[t.length-1],s);if(0<=n)for(var i=0;i<t.length-1;i++){var a=$("#"+t[i][n]),o=parseInt(a.attr("colspan")||1)+(d||0);a.attr("colspan",o),o?a.show():a.hide()}}}e(!0),e(!1)}function fitColumns(l){var n,e,c=$.data(l,"datagrid"),u=c.options,i=c.dc,p=i.view2.children("div.datagrid-header"),f=p.children("div.datagrid-header-inner");function t(e){var t=i.header1.add(i.header2).find(".datagrid-cell-group");t.length&&(t.each(function(){$(this)._outerWidth(e?$(this).parent().width():10)}),e&&setBodySize(l))}i.body2.css("overflow-x",""),t(),e=getColumnFields(l,!(n=!1)).concat(getColumnFields(l,!1)),$.map(e,function(e){var t=getColumnOption(l,e);0<=String(t.width||"").indexOf("%")&&(0<(e=$.parser.parseValue("width",t.width,i.view,u.scrollbarSize+(u.rownumbers?u.rownumberWidth:0))-t.deltaWidth)&&(t.boxWidth=e,n=!0))}),n&&$(l).datagrid("fixColumnSize"),function(){if(u.fitColumns){c.leftWidth||(c.leftWidth=0);for(var e=0,t=[],n=getColumnFields(l,!1),i=0;i<n.length;i++){var a=getColumnOption(l,n[i]);!function(e){if(0<=String(e.width||"").indexOf("%"))return!1;if(!(e.hidden||e.checkbox||e.auto||e.fixed))return!0}(a)||(e+=a.width,t.push({field:a.field,col:a,addingWidth:0}))}if(e){t[t.length-1].addingWidth-=c.leftWidth,f.show();var o=p.width()-p.find("table").width()-u.scrollbarSize+c.leftWidth,r=o/e;u.showHeader||f.hide();for(i=0;i<t.length;i++){var s=t[i],d=parseInt(s.col.width*r);s.addingWidth+=d,o-=d}t[t.length-1].addingWidth+=o;for(i=0;i<t.length;i++)0<(s=t[i]).col.boxWidth+s.addingWidth&&(s.col.boxWidth+=s.addingWidth,s.col.width+=s.addingWidth);c.leftWidth=o,$(l).datagrid("fixColumnSize")}}}(),t(!0),f.show(),p.width()>=p.find("table").width()&&i.body2.css("overflow-x","hidden"),u.showHeader||f.hide()}function autoSizeColumn(o,e){var t=$.data(o,"datagrid"),r=t.options,s=t.dc,d=$('<div class="datagrid-cell" style="position:absolute;left:-9999px"></div>').appendTo("body");if(e)l(e),$(o).datagrid("fitColumns");else{for(var n=!1,i=getColumnFields(o,!0).concat(getColumnFields(o,!1)),a=0;a<i.length;a++){e=i[a];getColumnOption(o,e).auto&&(l(e),n=!0)}n&&$(o).datagrid("fitColumns")}function l(i){var a=s.view.find('div.datagrid-header td[field="'+i+'"] div.datagrid-cell');a.css("width","");var e=$(o).datagrid("getColumnOption",i);e.width=void 0,e.boxWidth=void 0,e.auto=!0,$(o).datagrid("fixColumnSize",i);var t=Math.max(n("header"),n("allbody"),n("allfooter"))+1;function n(e){var t=0;return"header"==e?t=n(a):r.finder.getTr(o,0,e).find('td[field="'+i+'"] div.datagrid-cell').each(function(){var e=n($(this));t<e&&(t=e)}),t;function n(e){return(e.is(":visible")?e:d.html(e.html()))._outerWidth()}}a._outerWidth(t-1),e.width=t,e.boxWidth=parseInt(a[0].style.width),e.deltaWidth=t-e.boxWidth,a.css("width",""),$(o).datagrid("fixColumnSize",i),r.onResizeColumn.call(o,i,e.width)}d.remove()}function fixColumnSize(t,e){var n=$.data(t,"datagrid"),i=(n.options,n.dc.view.find("table.datagrid-btable,table.datagrid-ftable"));if(i.css("table-layout","fixed"),e)r(e);else for(var a=getColumnFields(t,!0).concat(getColumnFields(t,!1)),o=0;o<a.length;o++)r(a[o]);function r(e){e=getColumnOption(t,e);e.cellClass&&n.ss.set("."+e.cellClass,e.boxWidth?e.boxWidth+"px":"auto")}i.css("table-layout",""),fixMergedSize(t),fixRowHeight(t),fixEditableSize(t)}function fixMergedSize(o,e){var t=$.data(o,"datagrid").dc;(e=e||t.view.find("td.datagrid-td-merged")).each(function(){var e=$(this),t=e.attr("colspan")||1;if(1<t){for(var n=getColumnOption(o,e.attr("field")),i=n.boxWidth+n.deltaWidth-1,a=1;a<t;a++)e=e.next(),i+=(n=getColumnOption(o,e.attr("field"))).boxWidth+n.deltaWidth;$(this).children("div.datagrid-cell")._outerWidth(i)}})}function fixEditableSize(n){$.data(n,"datagrid").dc.view.find("div.datagrid-editable").each(function(){var e=$(this),t=e.parent().attr("field"),t=$(n).datagrid("getColumnOption",t);e._outerWidth(t.boxWidth+t.deltaWidth-1);t=$.data(this,"datagrid.editor");t.actions.resize&&t.actions.resize(t.target,e.width())})}function getColumnOption(e,o){function t(e){if(e)for(var t=0;t<e.length;t++)for(var n=e[t],i=0;i<n.length;i++){var a=n[i];if(a.field==o)return a}return null}e=$.data(e,"datagrid").options;return t(e.columns)||t(e.frozenColumns)}function getColumnLayout(e,t){for(var n,e=$.data(e,"datagrid").options,i=t?e.frozenColumns:e.columns,o=[],a=(n=0,$.map(i[0]||[],function(e){n+=e.colspan||1}),n),r=0;r<i.length;r++)o[r]=new Array(a);for(var s=0;s<i.length;s++)$.map(i[s],function(e){var t=function(e){for(var t=0;t<e.length;t++)if(null==e[t])return t;return-1}(o[s]);if(0<=t)for(var n=e.field||e.id||"",i=0;i<(e.colspan||1);i++){for(var a=0;a<(e.rowspan||1);a++)o[s+a][t]=n;t++}});return o}function getColumnFields(e,t){t=getColumnLayout(e,t);return t.length?t[t.length-1]:t}function loadData(r,e){var s,d,t=$.data(r,"datagrid"),n=t.options,i=t.dc;e=n.loadFilter.call(r,e),(e=$.isArray(e)?{total:e.length,rows:e}:e).total=parseInt(e.total),(t.data=e).footer&&(t.footer=e.footer),!n.remoteSort&&n.sortName&&(s=n.sortName.split(","),d=n.sortOrder.split(","),e.rows.sort(function(e,t){for(var n=0,i=0;i<s.length;i++){var a=s[i],o=d[i];if(0!=(n=(getColumnOption(r,a).sorter||function(e,t){return e==t?0:t<e?1:-1})(e[a],t[a])*("asc"==o?1:-1)))return n}return n})),n.view.onBeforeRender&&n.view.onBeforeRender.call(n.view,r,e.rows),n.view.render.call(n.view,r,i.body2,!1),n.view.render.call(n.view,r,i.body1,!0),n.showFooter&&(n.view.renderFooter.call(n.view,r,i.footer2,!1),n.view.renderFooter.call(n.view,r,i.footer1,!0)),n.view.onAfterRender&&n.view.onAfterRender.call(n.view,r),t.ss.clean();var a=$(r).datagrid("getPager");!a.length||(t=a.pagination("options")).total!=e.total&&(a.pagination("refresh",{pageNumber:n.pageNumber,total:e.total}),n.pageNumber!=t.pageNumber&&0<t.pageNumber&&(n.pageNumber=t.pageNumber,request(r))),fixRowHeight(r),i.body2.triggerHandler("scroll"),$(r).datagrid("setSelectionState"),$(r).datagrid("autoSizeColumn"),n.onLoadSuccess.call(r,e)}function setSelectionState(e){var t=$.data(e,"datagrid"),i=t.options,n=t.dc;if(n.header1.add(n.header2).find("input[type=checkbox]")._propAttr("checked",!1),i.idField){var a=!!$.data(e,"treegrid"),o=i.onSelect,n=i.onCheck;i.onSelect=i.onCheck=function(){};for(var r=i.finder.getRows(e),s=0;s<r.length;s++){var d=r[s],l=a?d[i.idField]:$(e).datagrid("getRowIndex",d[i.idField]);c(t.selectedRows,d)&&selectRow(e,l,!0,!0),c(t.checkedRows,d)&&checkRow(e,l,!0)}i.onSelect=o,i.onCheck=n}function c(e,t){for(var n=0;n<e.length;n++)if(e[n][i.idField]==t[i.idField])return e[n]=t,1}}function getRowIndex(e,t){var e=$.data(e,"datagrid"),n=e.options,i=e.data.rows;if("object"==typeof t)return indexOfArray(i,t);for(var a=0;a<i.length;a++)if(i[a][n.idField]==t)return a;return-1}function getSelectedRows(e){var t=$.data(e,"datagrid"),n=t.options;t.data;if(n.idField)return t.selectedRows;var i=[];return n.finder.getTr(e,"","selected",2).each(function(){i.push(n.finder.getRow(e,$(this)))}),i}function getCheckedRows(e){var t=$.data(e,"datagrid"),n=t.options;if(n.idField)return t.checkedRows;var i=[];return n.finder.getTr(e,"","checked",2).each(function(){i.push(n.finder.getRow(e,$(this)))}),i}function scrollTo(e,t){var n=$.data(e,"datagrid"),i=n.dc,a=n.options,o=a.finder.getTr(e,t);o.length&&(o.closest("table").hasClass("datagrid-btable-frozen")||(n=i.view2.children("div.datagrid-header")._outerHeight(),e=i.body2,t=a.scrollbarSize,e[0].offsetHeight&&e[0].clientHeight&&e[0].offsetHeight<=e[0].clientHeight&&(t=0),a=e.outerHeight(!0)-e.outerHeight(),(a=o.offset().top-i.view2.offset().top-n-a)<0?e.scrollTop(e.scrollTop()+a):a+o._outerHeight()>e.height()-t&&e.scrollTop(e.scrollTop()+a+o._outerHeight()-e.height()+t)))}function highlightRow(e,t){var n=$.data(e,"datagrid"),i=n.options;i.finder.getTr(e,n.highlightIndex).removeClass("datagrid-row-over"),i.finder.getTr(e,t).addClass("datagrid-row-over"),n.highlightIndex=t}function selectRow(e,t,n,i){var a=$.data(e,"datagrid"),o=a.options,r=o.finder.getRow(e,t);r&&0!=o.onBeforeSelect.apply(e,getArguments(e,[t,r]))&&(o.singleSelect&&(unselectAll(e,!0),a.selectedRows=[]),!n&&o.checkOnSelect&&checkRow(e,t,!0),o.idField&&addArrayItem(a.selectedRows,o.idField,r),o.finder.getTr(e,t).addClass("datagrid-row-selected"),o.onSelect.apply(e,getArguments(e,[t,r])),!i&&o.scrollOnSelect&&scrollTo(e,t))}function unselectRow(e,t,n){var i=$.data(e,"datagrid"),a=(i.dc,i.options),o=a.finder.getRow(e,t);o&&0!=a.onBeforeUnselect.apply(e,getArguments(e,[t,o]))&&(!n&&a.checkOnSelect&&uncheckRow(e,t,!0),a.finder.getTr(e,t).removeClass("datagrid-row-selected"),a.idField&&removeArrayItem(i.selectedRows,a.idField,o[a.idField]),a.onUnselect.apply(e,getArguments(e,[t,o])))}function selectAll(e,t){var n=$.data(e,"datagrid").options,i=n.finder.getRows(e),a=$.data(e,"datagrid").selectedRows;if(!t&&n.checkOnSelect&&checkAll(e,!0),n.finder.getTr(e,"","allbody").addClass("datagrid-row-selected"),n.idField)for(var o=0;o<i.length;o++)addArrayItem(a,n.idField,i[o]);n.onSelectAll.call(e,i)}function unselectAll(e,t){var n=$.data(e,"datagrid").options,i=n.finder.getRows(e),a=$.data(e,"datagrid").selectedRows;if(!t&&n.checkOnSelect&&uncheckAll(e,!0),n.finder.getTr(e,"","selected").removeClass("datagrid-row-selected"),n.idField)for(var o=0;o<i.length;o++)removeArrayItem(a,n.idField,i[o][n.idField]);n.onUnselectAll.call(e,i)}function checkRow(e,t,n){var i=$.data(e,"datagrid"),a=i.options,o=a.finder.getRow(e,t);o&&0!=a.onBeforeCheck.apply(e,getArguments(e,[t,o]))&&(a.singleSelect&&a.selectOnCheck&&(uncheckAll(e,!0),i.checkedRows=[]),!n&&a.selectOnCheck&&selectRow(e,t,!0),a.finder.getTr(e,t).addClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0),a.finder.getTr(e,"","checked",2).length==a.finder.getRows(e).length&&(n=i.dc).header1.add(n.header2).find("input[type=checkbox]")._propAttr("checked",!0),a.idField&&addArrayItem(i.checkedRows,a.idField,o),a.onCheck.apply(e,getArguments(e,[t,o])))}function uncheckRow(e,t,n){var i=$.data(e,"datagrid"),a=i.options,o=a.finder.getRow(e,t);o&&0!=a.onBeforeUncheck.apply(e,getArguments(e,[t,o]))&&(!n&&a.selectOnCheck&&unselectRow(e,t,!0),a.finder.getTr(e,t).removeClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!1),(n=i.dc).header1.add(n.header2).find("input[type=checkbox]")._propAttr("checked",!1),a.idField&&removeArrayItem(i.checkedRows,a.idField,o[a.idField]),a.onUncheck.apply(e,getArguments(e,[t,o])))}function checkAll(e,t){var n=$.data(e,"datagrid"),i=n.options,a=i.finder.getRows(e);!t&&i.selectOnCheck&&selectAll(e,!0);var o=n.dc,t=o.header1.add(o.header2).find("input[type=checkbox]"),o=i.finder.getTr(e,"","allbody").addClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]");if(t.add(o)._propAttr("checked",!0),i.idField)for(var r=0;r<a.length;r++)addArrayItem(n.checkedRows,i.idField,a[r]);i.onCheckAll.call(e,a)}function uncheckAll(e,t){var n=$.data(e,"datagrid"),i=n.options,a=i.finder.getRows(e);!t&&i.selectOnCheck&&unselectAll(e,!0);var o=n.dc,t=o.header1.add(o.header2).find("input[type=checkbox]"),o=i.finder.getTr(e,"","checked").removeClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]");if(t.add(o)._propAttr("checked",!1),i.idField)for(var r=0;r<a.length;r++)removeArrayItem(n.checkedRows,i.idField,a[r][i.idField]);i.onUncheckAll.call(e,a)}function beginEdit(e,t){var n=$.data(e,"datagrid").options,i=n.finder.getTr(e,t),a=n.finder.getRow(e,t);i.hasClass("datagrid-row-editing")||0!=n.onBeforeEdit.apply(e,getArguments(e,[t,a]))&&(i.addClass("datagrid-row-editing"),createEditor(e,t),fixEditableSize(e),i.find("div.datagrid-editable").each(function(){var e=$(this).parent().attr("field"),t=$.data(this,"datagrid.editor");t.actions.setValue(t.target,a[e])}),validateRow(e,t),n.onBeginEdit.apply(e,getArguments(e,[t,a])))}function endEdit(e,t,n){var i=$.data(e,"datagrid"),a=i.options,o=i.updatedRows,r=i.insertedRows,i=a.finder.getTr(e,t),s=a.finder.getRow(e,t);if(i.hasClass("datagrid-row-editing")){if(!n){if(!validateRow(e,t))return;var d=!1,l={};i.find("div.datagrid-editable").each(function(){var e=$(this).parent().attr("field"),t=$.data(this,"datagrid.editor"),n=$(t.target),n=n.data("textbox")?n.textbox("textbox"):n;n.is(":focus")&&n.triggerHandler("blur");t=encodeHtml(t.actions.getValue(t.target));s[e]!==t&&(s[e]=t,d=!0,l[e]=t)}),d&&-1==indexOfArray(r,s)&&-1==indexOfArray(o,s)&&o.push(s),a.onEndEdit.apply(e,getArguments(e,[t,s,l]))}i.removeClass("datagrid-row-editing"),destroyEditor(e,t),$(e).datagrid("refreshRow",t),n?a.onCancelEdit.apply(e,getArguments(e,[t,s])):a.onAfterEdit.apply(e,getArguments(e,[t,s,l]))}}function getEditors(e,t){var t=$.data(e,"datagrid").options.finder.getTr(e,t),n=[];return t.children("td").each(function(){var e=$(this).find("div.datagrid-editable");e.length&&(e=$.data(e[0],"datagrid.editor"),n.push(e))}),n}function getEditor(e,t){for(var n=getEditors(e,null!=t.index?t.index:t.id),i=0;i<n.length;i++)if(n[i].field==t.field)return n[i];return null}function createEditor(s,e){var d=$.data(s,"datagrid").options;d.finder.getTr(s,e).children("td").each(function(){var e,t,n,i,a=$(this).find("div.datagrid-cell"),o=$(this).attr("field"),r=getColumnOption(s,o);r&&r.editor&&("string"==typeof r.editor?e=r.editor:(e=r.editor.type,t=r.editor.options),(n=d.editors[e])&&(i=a.html(),r=a._outerWidth(),a.addClass("datagrid-editable"),a._outerWidth(r),a.html('<table border="0" cellspacing="0" cellpadding="1"><tr><td></td></tr></table>'),a.children("table").bind("click dblclick contextmenu",function(e){e.stopPropagation()}),$.data(a[0],"datagrid.editor",{actions:n,target:n.init(a.find("td"),$.extend({height:d.editorHeight},t)),field:o,type:e,oldHtml:i})))}),fixRowHeight(s,e,!0)}function destroyEditor(e,t){$.data(e,"datagrid").options.finder.getTr(e,t).children("td").each(function(){var e,t=$(this).find("div.datagrid-editable");t.length&&((e=$.data(t[0],"datagrid.editor")).actions.destroy&&e.actions.destroy(e.target),t.html(e.oldHtml),$.removeData(t[0],"datagrid.editor"),t.removeClass("datagrid-editable"),t.css("width",""))})}function validateRow(e,t){e=$.data(e,"datagrid").options.finder.getTr(e,t);if(!e.hasClass("datagrid-row-editing"))return!0;t=e.find(".validatebox-text");return t.validatebox("validate"),t.trigger("mouseleave"),0==e.find(".validatebox-invalid").length}function getChanges(e,t){var n=$.data(e,"datagrid").insertedRows,i=$.data(e,"datagrid").deletedRows,e=$.data(e,"datagrid").updatedRows;if(t)return"inserted"==t?n:"deleted"==t?i:"updated"==t?e:[];t=[];return t=(t=(t=t.concat(n)).concat(i)).concat(e)}function deleteRow(e,t){var n=$.data(e,"datagrid"),i=n.options,a=n.data,o=n.insertedRows,r=n.deletedRows;$(e).datagrid("cancelEdit",t);var s=i.finder.getRow(e,t);0<=indexOfArray(o,s)?removeArrayItem(o,s):r.push(s),removeArrayItem(n.selectedRows,i.idField,s[i.idField]),removeArrayItem(n.checkedRows,i.idField,s[i.idField]),i.view.deleteRow.call(i.view,e,t),"auto"==i.height&&fixRowHeight(e),$(e).datagrid("getPager").pagination("refresh",{total:a.total})}function insertRow(e,t){var n=$.data(e,"datagrid").data,i=$.data(e,"datagrid").options.view,a=$.data(e,"datagrid").insertedRows;i.insertRow.call(i,e,t.index,t.row),a.push(t.row),$(e).datagrid("getPager").pagination("refresh",{total:n.total})}function appendRow(e,t){var n=$.data(e,"datagrid").data,i=$.data(e,"datagrid").options.view,a=$.data(e,"datagrid").insertedRows;i.insertRow.call(i,e,null,t),a.push(t),$(e).datagrid("getPager").pagination("refresh",{total:n.total})}function updateRow(e,t){var n,i=$.data(e,"datagrid"),a=i.options,o=a.finder.getRow(e,t.index),r=!1;for(n in t.row=t.row||{},t.row)if(o[n]!==t.row[n]){r=!0;break}r&&(-1==indexOfArray(i.insertedRows,o)&&-1==indexOfArray(i.updatedRows,o)&&i.updatedRows.push(o),a.view.updateRow.call(a.view,e,t.index,t.row))}function initChanges(e){for(var e=$.data(e,"datagrid"),t=e.data.rows,n=[],i=0;i<t.length;i++)n.push($.extend({},t[i]));e.originalRows=n,e.updatedRows=[],e.insertedRows=[],e.deletedRows=[]}function acceptChanges(e){for(var t=!0,n=0,i=$.data(e,"datagrid").data.rows.length;n<i;n++)validateRow(e,n)?$(e).datagrid("endEdit",n):t=!1;t&&initChanges(e)}function rejectChanges(a){var e=$.data(a,"datagrid"),i=e.options,t=e.originalRows,n=e.insertedRows,o=e.deletedRows,r=e.selectedRows,s=e.checkedRows,d=e.data;function l(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n][i.idField]);return t}function c(e,t){for(var n=0;n<e.length;n++){var i=getRowIndex(a,e[n]);0<=i&&("s"==t?selectRow:checkRow)(a,i,!0)}}for(var u=0;u<d.rows.length;u++)$(a).datagrid("cancelEdit",u);var p=l(r),e=l(s);r.splice(0,r.length),s.splice(0,s.length),d.total+=o.length-n.length,d.rows=t,loadData(a,d),c(p,"s"),c(e,"c"),initChanges(a)}function request(t,e,n){var i=$.data(t,"datagrid").options;e&&(i.queryParams=e);e=$.extend({},i.queryParams);i.pagination&&$.extend(e,{page:i.pageNumber||1,rows:i.pageSize}),i.sortName&&i.remoteSort&&$.extend(e,{sort:i.sortName,order:i.sortOrder}),0!=i.onBeforeLoad.call(t,e)?($(t).datagrid("loading"),0==i.loader.call(t,e,function(e){$(t).datagrid("loaded"),$(t).datagrid("loadData",e),n&&n()},function(){$(t).datagrid("loaded"),i.onLoadError.apply(t,arguments)})&&($(t).datagrid("loaded"),i.view.setEmptyMsg(t))):i.view.setEmptyMsg(t)}function mergeCells(e,t){var n=$.data(e,"datagrid").options;if(t.type=t.type||"body",t.rowspan=t.rowspan||1,t.colspan=t.colspan||1,1!=t.rowspan||1!=t.colspan){var i=n.finder.getTr(e,null!=t.index?t.index:t.id,t.type);if(i.length){n=i.find('td[field="'+t.field+'"]');n.attr("rowspan",t.rowspan).attr("colspan",t.colspan),n.addClass("datagrid-td-merged"),o(n.next(),t.colspan-1);for(var a=1;a<t.rowspan&&(i=i.next()).length;a++)o(i.find('td[field="'+t.field+'"]'),t.colspan);fixMergedSize(e,n)}}function o(e,t){for(var n=0;n<t;n++)e.hide(),e=e.next()}}function getDefaultEditors(e){var t={};return $.map(e,function(e){function i(e){return null!=$.data($(e)[0],a)}var a;t[e]=(a=e,{init:function(e,t){e=$('<input type="text" class="datagrid-editable-input">').appendTo(e);return e[a]&&"text"!=a?e[a](t):e},destroy:function(e){i(e)&&$(e)[a]("destroy")},getValue:function(e){if(i(e)){var t=$(e)[a]("options");return t.multiple?$(e)[a]("getValues").join(t.separator):$(e)[a]("getValue")}return $(e).val()},setValue:function(e,t){var n;i(e)?(n=$(e)[a]("options")).multiple?t?$(e)[a]("setValues",t.split(n.separator)):$(e)[a]("clear"):$(e)[a]("setValue",t):$(e).val(t)},resize:function(e,t){i(e)?$(e)[a]("resize",t):$(e)._size({width:t,height:$.fn.datagrid.defaults.editorHeight})}})}),t}$.fn.datagrid=function(n,e){return"string"==typeof n?$.fn.datagrid.methods[n](this,e):(n=n||{},this.each(function(){var e,t=$.data(this,"datagrid");t?(e=$.extend(t.options,n),t.options=e):(e=$.extend({},$.extend({},$.fn.datagrid.defaults,{queryParams:{}}),$.fn.datagrid.parseOptions(this),n),$(this).css("width","").css("height",""),t=wrapGrid(this,e.rownumbers),e.columns||(e.columns=t.columns),e.frozenColumns||(e.frozenColumns=t.frozenColumns),e.columns=$.extend(!0,[],e.columns),e.frozenColumns=$.extend(!0,[],e.frozenColumns),e.view=$.extend({},e.view),$.data(this,"datagrid",{options:e,panel:t.panel,dc:t.dc,ss:null,selectedRows:[],checkedRows:[],data:{total:0,rows:[]},originalRows:[],updatedRows:[],insertedRows:[],deletedRows:[]})),buildGrid(this),bindEvents(this),setSize(this),e.data?$(this).datagrid("loadData",e.data):0<(e=$.fn.datagrid.parseData(this)).total?$(this).datagrid("loadData",e):$(this).datagrid("autoSizeColumn"),request(this)}))};var editors=$.extend({},getDefaultEditors(["text","textbox","passwordbox","filebox","numberbox","numberspinner","combobox","combotree","combogrid","combotreegrid","datebox","datetimebox","timespinner","datetimespinner"]),{textarea:{init:function(e,t){e=$('<textarea class="datagrid-editable-input"></textarea>').appendTo(e);return e.css("vertical-align","middle")._outerHeight(t.height),e},getValue:function(e){return $(e).val()},setValue:function(e,t){$(e).val(t)},resize:function(e,t){$(e)._outerWidth(t)}},checkbox:{init:function(e,t){e=$('<input type="checkbox">').appendTo(e);return e.val(t.on),e.attr("offval",t.off),e},getValue:function(e){return $(e).is(":checked")?$(e).val():$(e).attr("offval")},setValue:function(e,t){var n=!1;$(e).val()==t&&(n=!0),$(e)._propAttr("checked",n)}},validatebox:{init:function(e,t){e=$('<input type="text" class="datagrid-editable-input">').appendTo(e);return e.validatebox(t),e},destroy:function(e){$(e).validatebox("destroy")},getValue:function(e){return $(e).val()},setValue:function(e,t){$(e).val(t)},resize:function(e,t){$(e)._outerWidth(t)._outerHeight($.fn.datagrid.defaults.editorHeight)}}});$.fn.datagrid.methods={options:function(e){var t=$.data(e[0],"datagrid").options,e=$.data(e[0],"datagrid").panel.panel("options");return $.extend(t,{width:e.width,height:e.height,closed:e.closed,collapsed:e.collapsed,minimized:e.minimized,maximized:e.maximized})},setSelectionState:function(e){return e.each(function(){setSelectionState(this)})},createStyleSheet:function(e){return createStyleSheet(e[0])},getPanel:function(e){return $.data(e[0],"datagrid").panel},getPager:function(e){return $.data(e[0],"datagrid").panel.children("div.datagrid-pager")},getColumnFields:function(e,t){return getColumnFields(e[0],t)},getColumnOption:function(e,t){return getColumnOption(e[0],t)},resize:function(e,t){return e.each(function(){setSize(this,t)})},load:function(e,t){return e.each(function(){var e=$(this).datagrid("options");"string"==typeof t&&(e.url=t,t=null),e.pageNumber=1,$(this).datagrid("getPager").pagination("refresh",{pageNumber:1}),request(this,t)})},reload:function(e,t){return e.each(function(){var e=$(this).datagrid("options");"string"==typeof t&&(e.url=t,t=null),request(this,t)})},reloadFooter:function(e,n){return e.each(function(){var e=$.data(this,"datagrid").options,t=$.data(this,"datagrid").dc;n&&($.data(this,"datagrid").footer=n),e.showFooter&&(e.view.renderFooter.call(e.view,this,t.footer2,!1),e.view.renderFooter.call(e.view,this,t.footer1,!0),e.view.onAfterRender&&e.view.onAfterRender.call(e.view,this),$(this).datagrid("fixRowHeight"))})},loading:function(e){return e.each(function(){var e,t=$.data(this,"datagrid").options;$(this).datagrid("getPager").pagination("loading"),t.loadMsg&&((e=$(this).datagrid("getPanel")).children("div.datagrid-mask").length||($('<div class="datagrid-mask" style="display:block"></div>').appendTo(e),(e=$('<div class="datagrid-mask-msg" style="display:block;left:50%"></div>').html(t.loadMsg).appendTo(e))._outerHeight(40),e.css({marginLeft:-e.outerWidth()/2,lineHeight:e.height()+"px"})))})},loaded:function(e){return e.each(function(){$(this).datagrid("getPager").pagination("loaded");var e=$(this).datagrid("getPanel");e.children("div.datagrid-mask-msg").remove(),e.children("div.datagrid-mask").remove()})},fitColumns:function(e){return e.each(function(){fitColumns(this)})},fixColumnSize:function(e,t){return e.each(function(){fixColumnSize(this,t)})},fixRowHeight:function(e,t){return e.each(function(){fixRowHeight(this,t)})},freezeRow:function(e,t){return e.each(function(){freezeRow(this,t)})},autoSizeColumn:function(e,t){return e.each(function(){autoSizeColumn(this,t)})},loadData:function(e,t){return e.each(function(){loadData(this,t),initChanges(this)})},getData:function(e){return $.data(e[0],"datagrid").data},getRows:function(e){return $.data(e[0],"datagrid").data.rows},getFooterRows:function(e){return $.data(e[0],"datagrid").footer},getRowIndex:function(e,t){return getRowIndex(e[0],t)},getChecked:function(e){return getCheckedRows(e[0])},getSelected:function(e){e=getSelectedRows(e[0]);return 0<e.length?e[0]:null},getSelections:function(e){return getSelectedRows(e[0])},clearSelections:function(e){return e.each(function(){var e=$.data(this,"datagrid"),t=e.selectedRows,n=e.checkedRows;t.splice(0,t.length),unselectAll(this),e.options.checkOnSelect&&n.splice(0,n.length)})},clearChecked:function(e){return e.each(function(){var e=$.data(this,"datagrid"),t=e.selectedRows,n=e.checkedRows;n.splice(0,n.length),uncheckAll(this),e.options.selectOnCheck&&t.splice(0,t.length)})},scrollTo:function(e,t){return e.each(function(){scrollTo(this,t)})},highlightRow:function(e,t){return e.each(function(){highlightRow(this,t),scrollTo(this,t)})},selectAll:function(e){return e.each(function(){selectAll(this)})},unselectAll:function(e){return e.each(function(){unselectAll(this)})},selectRow:function(e,t){return e.each(function(){selectRow(this,t)})},selectRecord:function(e,t){return e.each(function(){var e;!$.data(this,"datagrid").options.idField||0<=(e=getRowIndex(this,t))&&$(this).datagrid("selectRow",e)})},unselectRow:function(e,t){return e.each(function(){unselectRow(this,t)})},checkRow:function(e,t){return e.each(function(){checkRow(this,t)})},uncheckRow:function(e,t){return e.each(function(){uncheckRow(this,t)})},checkAll:function(e){return e.each(function(){checkAll(this)})},uncheckAll:function(e){return e.each(function(){uncheckAll(this)})},beginEdit:function(e,t){return e.each(function(){beginEdit(this,t)})},endEdit:function(e,t){return e.each(function(){endEdit(this,t,!1)})},cancelEdit:function(e,t){return e.each(function(){endEdit(this,t,!0)})},getEditors:function(e,t){return getEditors(e[0],t)},getEditor:function(e,t){return getEditor(e[0],t)},refreshRow:function(e,t){return e.each(function(){var e=$.data(this,"datagrid").options;e.view.refreshRow.call(e.view,this,t)})},validateRow:function(e,t){return validateRow(e[0],t)},updateRow:function(e,t){return e.each(function(){updateRow(this,t)})},appendRow:function(e,t){return e.each(function(){appendRow(this,t)})},insertRow:function(e,t){return e.each(function(){insertRow(this,t)})},deleteRow:function(e,t){return e.each(function(){deleteRow(this,t)})},getChanges:function(e,t){return getChanges(e[0],t)},acceptChanges:function(e){return e.each(function(){acceptChanges(this)})},rejectChanges:function(e){return e.each(function(){rejectChanges(this)})},mergeCells:function(e,t){return e.each(function(){mergeCells(this,t)})},showColumn:function(e,t){return e.each(function(){var e=$(this).datagrid("getColumnOption",t);e.hidden&&(e.hidden=!1,$(this).datagrid("getPanel").find('td[field="'+t+'"]').show(),fixColumnSpan(this,t,1),$(this).datagrid("fitColumns"))})},hideColumn:function(e,t){return e.each(function(){var e=$(this).datagrid("getColumnOption",t);e.hidden||(e.hidden=!0,$(this).datagrid("getPanel").find('td[field="'+t+'"]').hide(),fixColumnSpan(this,t,-1),$(this).datagrid("fitColumns"))})},sort:function(e,t){return e.each(function(){sortGrid(this,t)})},gotoPage:function(e,i){return e.each(function(){var e,t,n=this;"object"==typeof i?(e=i.page,t=i.callback):e=i,$(n).datagrid("options").pageNumber=e,$(n).datagrid("getPager").pagination("refresh",{pageNumber:e}),request(n,null,function(){t&&t.call(n,e)})})}},$.fn.datagrid.parseOptions=function(target){var t=$(target);return $.extend({},$.fn.panel.parseOptions(target),$.parser.parseOptions(target,["url","toolbar","idField","sortName","sortOrder","pagePosition","resizeHandle",{sharedStyleSheet:"boolean",fitColumns:"boolean",autoRowHeight:"boolean",striped:"boolean",nowrap:"boolean"},{rownumbers:"boolean",singleSelect:"boolean",ctrlSelect:"boolean",checkOnSelect:"boolean",selectOnCheck:"boolean"},{pagination:"boolean",pageSize:"number",pageNumber:"number"},{multiSort:"boolean",remoteSort:"boolean",showHeader:"boolean",showFooter:"boolean"},{scrollbarSize:"number",scrollOnSelect:"boolean"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0,loadMsg:null!=t.attr("loadMsg")?t.attr("loadMsg"):void 0,rowStyler:t.attr("rowStyler")?eval(t.attr("rowStyler")):void 0})},$.fn.datagrid.parseData=function(e){var e=$(e),n={total:0,rows:[]},i=e.datagrid("getColumnFields",!0).concat(e.datagrid("getColumnFields",!1));return e.find("tbody tr").each(function(){n.total++;var e={};$.extend(e,$.parser.parseOptions(this,["iconCls","state"]));for(var t=0;t<i.length;t++)e[i[t]]=$(this).find("td:eq("+t+")").html();n.rows.push(e)}),n};var defaultView={render:function(e,t,n){var i=$(e).datagrid("getRows");$(t).empty().html(this.renderTable(e,0,i,n))},renderFooter:function(e,t,n){$.data(e,"datagrid").options;for(var i=$.data(e,"datagrid").footer||[],a=$(e).datagrid("getColumnFields",n),o=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],r=0;r<i.length;r++)o.push('<tr class="datagrid-row" datagrid-row-index="'+r+'">'),o.push(this.renderRow.call(this,e,a,n,r,i[r])),o.push("</tr>");o.push("</tbody></table>"),$(t).html(o.join(""))},renderTable:function(e,t,n,i){var a=$.data(e,"datagrid"),o=a.options;if(i&&!(o.rownumbers||o.frozenColumns&&o.frozenColumns.length))return"";for(var r=$(e).datagrid("getColumnFields",i),s=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'],d=0;d<n.length;d++){var l=n[d],c=o.rowStyler?o.rowStyler.call(e,t,l):"",u=this.getStyleValue(c),p='class="datagrid-row '+(t%2&&o.striped?"datagrid-row-alt ":" ")+u.c+'"',c=u.s?'style="'+u.s+'"':"",u=a.rowIdPrefix+"-"+(i?1:2)+"-"+t;s.push('<tr id="'+u+'" datagrid-row-index="'+t+'" '+p+" "+c+">"),s.push(this.renderRow.call(this,e,r,i,t,l)),s.push("</tr>"),t++}return s.push("</tbody></table>"),s.join("")},renderRow:function(e,t,n,i,a){var o=$.data(e,"datagrid").options,r=[];n&&o.rownumbers&&(n=i+1,o.pagination&&(n+=(o.pageNumber-1)*o.pageSize),r.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+n+"</div></td>"));for(var s=0;s<t.length;s++){var d,l,c,u=t[s],p=$(e).datagrid("getColumnOption",u);p&&(d=a[u],l=p.styler&&p.styler.call(e,d,a,i)||"",l=(c=this.getStyleValue(l)).c?'class="'+c.c+'"':"",c=p.hidden?'style="display:none;'+c.s+'"':c.s?'style="'+c.s+'"':"",r.push('<td field="'+u+'" '+l+" "+c+">"),c="",p.checkbox||(p.align&&(c+="text-align:"+p.align+";"),o.nowrap?o.autoRowHeight&&(c+="height:auto;"):c+="white-space:normal;height:auto;"),r.push('<div style="'+c+'" '),r.push(p.checkbox?'class="datagrid-cell-check"':'class="datagrid-cell '+p.cellClass+'"'),r.push(">"),p.checkbox?(r.push('<input type="checkbox" '+(a.checked?'checked="checked"':"")),r.push(' name="'+u+'" value="'+(null!=d?d:"")+'">')):p.formatter?r.push(p.formatter(d,a,i)):r.push(d),r.push("</div>"),r.push("</td>"))}return r.join("")},getStyleValue:function(e){var t="",n="";return"string"==typeof e?n=e:e&&(t=e.class||"",n=e.style||""),{c:t,s:n}},refreshRow:function(e,t){this.updateRow.call(this,e,t,{})},updateRow:function(a,o,e){var r=$.data(a,"datagrid").options,s=r.finder.getRow(a,o);$.extend(s,e);var e=function(e){e=r.rowStyler?r.rowStyler.call(a,e,s):"";return this.getStyleValue(e)}.call(this,o),d=e.s,l="datagrid-row "+(o%2&&r.striped?"datagrid-row-alt ":" ")+e.c;function t(e){var t,n,i=r.finder.getTr(a,o,"body",e?1:2);i.length&&(t=$(a).datagrid("getColumnFields",e),n=i.find("div.datagrid-cell-check input[type=checkbox]").is(":checked"),i.html(this.renderRow.call(this,a,t,e,o,s)),e=(i.hasClass("datagrid-row-checked")?" datagrid-row-checked":"")+(i.hasClass("datagrid-row-selected")?" datagrid-row-selected":""),i.attr("style",d).attr("class",l+e),n&&i.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0))}t.call(this,!0),t.call(this,!1),$(a).datagrid("fixRowHeight",o)},insertRow:function(o,r,e){var s=$.data(o,"datagrid"),d=s.options,i=s.dc,l=s.data;function t(e){for(var t=e?1:2,n=l.rows.length-1;r<=n;n--){var i,a=d.finder.getTr(o,n,"body",t);a.attr("datagrid-row-index",n+1),a.attr("id",s.rowIdPrefix+"-"+t+"-"+(n+1)),e&&d.rownumbers&&(i=n+2,d.pagination&&(i+=(d.pageNumber-1)*d.pageSize),a.find("div.datagrid-cell-rownumber").html(i)),d.striped&&a.removeClass("datagrid-row-alt").addClass((n+1)%2?"datagrid-row-alt":"")}}function n(e){var t=e?1:2,n=($(o).datagrid("getColumnFields",e),'<tr id="'+(s.rowIdPrefix+"-"+t+"-"+r)+'" class="datagrid-row" datagrid-row-index="'+r+'"></tr>');r>=l.rows.length?l.rows.length?d.finder.getTr(o,"","last",t).after(n):(e?i.body1:i.body2).html('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'+n+"</tbody></table>"):d.finder.getTr(o,r+1,"body",t).before(n)}(r=null==r||null==r?l.rows.length:r)>l.rows.length&&(r=l.rows.length),t.call(this,!0),t.call(this,!1),n.call(this,!0),n.call(this,!1),l.total+=1,l.rows.splice(r,0,e),this.setEmptyMsg(o),this.refreshRow.call(this,o,r)},deleteRow:function(o,r){var s=$.data(o,"datagrid"),d=s.options,l=s.data;function e(e){for(var t=e?1:2,n=r+1;n<l.rows.length;n++){var i,a=d.finder.getTr(o,n,"body",t);a.attr("datagrid-row-index",n-1),a.attr("id",s.rowIdPrefix+"-"+t+"-"+(n-1)),e&&d.rownumbers&&(i=n,d.pagination&&(i+=(d.pageNumber-1)*d.pageSize),a.find("div.datagrid-cell-rownumber").html(i)),d.striped&&a.removeClass("datagrid-row-alt").addClass((n-1)%2?"datagrid-row-alt":"")}}d.finder.getTr(o,r).remove(),e.call(this,!0),e.call(this,!1),--l.total,l.rows.splice(r,1),this.setEmptyMsg(o)},onBeforeRender:function(e,t){},onAfterRender:function(e){$.data(e,"datagrid").options.showFooter&&$(e).datagrid("getPanel").find("div.datagrid-footer").find("div.datagrid-cell-rownumber,div.datagrid-cell-check").css("visibility","hidden"),this.setEmptyMsg(e)},setEmptyMsg:function(e){var t=$.data(e,"datagrid"),n=t.options,i=0==n.finder.getRows(e).length;i&&this.renderEmptyRow(e),n.emptyMsg&&(t.dc.view.children(".datagrid-empty").remove(),i&&(i=t.dc.header2.parent().outerHeight(),$('<div class="datagrid-empty"></div>').appendTo(t.dc.view).html(n.emptyMsg).css("top",i+"px")))},renderEmptyRow:function(t){var e=$(t).datagrid("options"),n=$.map($(t).datagrid("getColumnFields"),function(e){return $(t).datagrid("getColumnOption",e)});$.map(n,function(e){e.formatter1=e.formatter,e.styler1=e.styler,e.formatter=e.styler=void 0});var i=e.rowStyler;e.rowStyler=function(){};var a=$.data(t,"datagrid").dc.body2;a.html(this.renderTable(t,0,[{}],!1)),a.find("tbody *").css({height:1,borderColor:"transparent",background:"transparent"});a=a.find(".datagrid-row");a.removeClass("datagrid-row").removeAttr("datagrid-row-index"),a.find(".datagrid-cell,.datagrid-cell-check").empty(),$.map(n,function(e){e.formatter=e.formatter1,e.styler=e.styler1,e.formatter1=e.styler1=void 0}),e.rowStyler=i}};$.fn.datagrid.defaults=$.extend({},$.fn.panel.defaults,{sharedStyleSheet:!1,frozenColumns:void 0,columns:void 0,fitColumns:!1,resizeHandle:"right",resizeEdge:5,autoRowHeight:!0,toolbar:null,striped:!1,method:"post",nowrap:!0,idField:null,url:null,data:null,loadMsg:"Processing, please wait ...",emptyMsg:"",rownumbers:!1,singleSelect:!1,ctrlSelect:!1,selectOnCheck:!0,checkOnSelect:!0,pagination:!1,pagePosition:"bottom",pageNumber:1,pageSize:10,pageList:[10,20,30,40,50],queryParams:{},sortName:null,sortOrder:"asc",multiSort:!1,remoteSort:!0,showHeader:!0,showFooter:!1,scrollOnSelect:!0,scrollbarSize:18,rownumberWidth:30,editorHeight:31,headerEvents:{mouseover:headerOverEventHandler(!0),mouseout:headerOverEventHandler(!1),click:headerClickEventHandler,dblclick:headerDblclickEventHandler,contextmenu:headerMenuEventHandler},rowEvents:{mouseover:hoverEventHandler(!0),mouseout:hoverEventHandler(!1),click:clickEventHandler,dblclick:dblclickEventHandler,contextmenu:contextmenuEventHandler},rowStyler:function(e,t){},loader:function(e,t,n){var i=$(this).datagrid("options");if(!i.url)return!1;$.ajax({type:i.method,url:i.url,data:e,dataType:"json",success:function(e){t(e)},error:function(){n.apply(this,arguments)}})},loadFilter:function(e){return e},editors:editors,finder:{getTr:function(e,t,n,i){n=n||"body",i=i||0;var a=$.data(e,"datagrid"),o=a.dc,r=a.options;if(0==i){var s=r.finder.getTr(e,t,n,1),e=r.finder.getTr(e,t,n,2);return s.add(e)}if("body"!=n)return"footer"==n?(1==i?o.footer1:o.footer2).find(">table>tbody>tr[datagrid-row-index="+t+"]"):"selected"==n?(1==i?o.body1:o.body2).find(">table>tbody>tr.datagrid-row-selected"):"highlight"==n?(1==i?o.body1:o.body2).find(">table>tbody>tr.datagrid-row-over"):"checked"==n?(1==i?o.body1:o.body2).find(">table>tbody>tr.datagrid-row-checked"):"editing"==n?(1==i?o.body1:o.body2).find(">table>tbody>tr.datagrid-row-editing"):"last"==n?(1==i?o.body1:o.body2).find(">table>tbody>tr[datagrid-row-index]:last"):"allbody"==n?(1==i?o.body1:o.body2).find(">table>tbody>tr[datagrid-row-index]"):"allfooter"==n?(1==i?o.footer1:o.footer2).find(">table>tbody>tr[datagrid-row-index]"):void 0;a=$("#"+a.rowIdPrefix+"-"+i+"-"+t);return a=!a.length?(1==i?o.body1:o.body2).find(">table>tbody>tr[datagrid-row-index="+t+"]"):a},getRow:function(e,t){t="object"==typeof t?t.attr("datagrid-row-index"):t;return $.data(e,"datagrid").data.rows[parseInt(t)]},getRows:function(e){return $(e).datagrid("getRows")}},view:defaultView,onBeforeLoad:function(e){},onLoadSuccess:function(){},onLoadError:function(){},onClickRow:function(e,t){},onDblClickRow:function(e,t){},onClickCell:function(e,t,n){},onDblClickCell:function(e,t,n){},onBeforeSortColumn:function(e,t){},onSortColumn:function(e,t){},onResizeColumn:function(e,t){},onBeforeSelect:function(e,t){},onSelect:function(e,t){},onBeforeUnselect:function(e,t){},onUnselect:function(e,t){},onSelectAll:function(e){},onUnselectAll:function(e){},onBeforeCheck:function(e,t){},onCheck:function(e,t){},onBeforeUncheck:function(e,t){},onUncheck:function(e,t){},onCheckAll:function(e){},onUncheckAll:function(e){},onBeforeEdit:function(e,t){},onBeginEdit:function(e,t){},onEndEdit:function(e,t,n){},onAfterEdit:function(e,t,n){},onCancelEdit:function(e,t){},onHeaderContextMenu:function(e,t){},onRowContextMenu:function(e,t,n){}})}(jQuery),function(l){var n=[];function i(){n=l.grep(n,function(e){return e.length&&e.data("edatagrid")})}function t(t){i(),l.map(n,function(e){e[0]!=l(t)[0]&&e.edatagrid("saveRow")}),i()}function c(t){i(),n=l.grep(n,function(e){return l(e)[0]!=l(t)[0]})}function a(s){var d=l.data(s,"edatagrid").options;l(s).datagrid(l.extend({},d,{onDblClickCell:function(e,t,n){d.editing&&(l(this).edatagrid("editRow",e),o(s,t)),d.onDblClickCell&&d.onDblClickCell.call(s,e,t,n)},onClickCell:function(e,t,n){var i;0<=d.editIndex&&(i=l(this),d.editing?i.edatagrid("editRow",e):setTimeout(function(){i.edatagrid("selectRow",d.editIndex)},0),o(s,t)),d.onClickCell&&d.onClickCell.call(s,e,t,n)},onBeforeEdit:function(e,t){if(d.onBeforeEdit&&0==d.onBeforeEdit.call(s,e,t))return!1;d.autoSave&&function(e){i();for(var t=0;t<n.length;t++)if(l(n[t])[0]==l(e)[0])return;n.push(l(e))}(this),d.originalRow=l.extend(!0,[],t)},onAfterEdit:function(i,a){c(this),d.editIndex=-1;var e=a.isNewRecord?d.saveUrl:d.updateUrl;if(e){for(var t=!1,n=l(this).edatagrid("getColumnFields",!0).concat(l(this).edatagrid("getColumnFields")),o=0;o<n.length;o++){var r=n[o];if(l(this).edatagrid("getColumnOption",r).editor&&d.originalRow[r]!=a[r]){t=!0;break}}t?d.poster.call(s,e,a,function(e){if(e.isError){var t=d.originalRow;return l(s).edatagrid("cancelRow",i),l(s).edatagrid("selectRow",i),l(s).edatagrid("editRow",i),d.originalRow=t,void d.onError.call(s,i,e)}var n;e.isNewRecord=null,l(s).datagrid("updateRow",{index:i,row:e}),d.tree&&(n=a[d.idField||"id"],(e=(t=l(d.tree)).tree("find",n))?(e.text=a[d.treeTextField],t.tree("update",e)):(e=t.tree("find",a[d.treeParentField]),t.tree("append",{parent:e?e.target:null,data:[{id:n,text:a[d.treeTextField]}]}))),d.onSuccess.call(s,i,a),d.onSave.call(s,i,a)},function(e){d.onError.call(s,i,e)}):d.onSave.call(s,i,a)}else a.isNewRecord=!1,d.onSave.call(s,i,a);d.onAfterEdit&&d.onAfterEdit.call(s,i,a)},onCancelEdit:function(e,t){c(this),d.editIndex=-1,t.isNewRecord&&l(this).datagrid("deleteRow",e),d.onCancelEdit&&d.onCancelEdit.call(s,e,t)},onBeforeLoad:function(e){if(0==d.onBeforeLoad.call(s,e))return!1;var t;l(this).edatagrid("cancelRow"),d.tree&&(t=l(d.tree).tree("getSelected"),e[d.treeParentField]=t?t.id:void 0)}})),d.tree&&l(d.tree).tree({url:d.treeUrl,onClick:function(e){l(s).datagrid("load")},onDrop:function(e,t,n){e=l(this).tree("getNode",e).id,n={id:t.id,targetId:e,point:n};d.poster.call(s,d.treeDndUrl,n,function(e){l(s).datagrid("load")})}})}function o(e,t){var n,i=l(e).edatagrid("options"),t=l(e).datagrid("getEditor",{index:i.editIndex,field:t});t?n=t.target:(i=l(e).datagrid("getEditors",i.editIndex)).length&&(n=i[0].target),n&&(l(n).hasClass("textbox-f")?l(n).textbox("textbox"):l(n)).focus()}l(function(){l(document).unbind(".edatagrid").bind("mousedown.edatagrid",function(e){e=l(e.target).closest("div.datagrid-view,div.combo-panel,div.window,div.window-mask");e.length?e.hasClass("datagrid-view")&&t(e.children("table")):t()})}),l.fn.edatagrid=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=l.data(this,"edatagrid");e?l.extend(e.options,t):l.data(this,"edatagrid",{options:l.extend({},l.fn.edatagrid.defaults,l.fn.edatagrid.parseOptions(this),t)}),a(this)});var n=l.fn.edatagrid.methods[t];return n?n(this,e):this.datagrid(t,e)},l.fn.edatagrid.parseOptions=function(e){return l.extend({},l.fn.datagrid.parseOptions(e),{})},l.fn.edatagrid.methods={options:function(e){return l.data(e[0],"edatagrid").options},loadData:function(e,t){return e.each(function(){l(this).edatagrid("cancelRow"),l(this).datagrid("loadData",t)})},enableEditing:function(e){return e.each(function(){l.data(this,"edatagrid").options.editing=!0})},disableEditing:function(e){return e.each(function(){l.data(this,"edatagrid").options.editing=!1})},isEditing:function(e,t){t=l.data(e[0],"edatagrid").options.finder.getTr(e[0],t);return t.length&&t.hasClass("datagrid-row-editing")},editRow:function(e,a){return e.each(function(){var e,t=l(this),n=l.data(this,"edatagrid").options,i=n.editIndex;i!=a&&(!t.datagrid("validateRow",i)||0<=i&&0==n.onBeforeSave.call(this,i)?setTimeout(function(){t.datagrid("selectRow",i)},0):(t.datagrid("endEdit",i),t.datagrid("beginEdit",a),t.edatagrid("isEditing",a)&&(n.editIndex=a,o(this),e=t.datagrid("getRows"),n.onEdit.call(this,a,e[a]))))})},addRow:function(e,o){return e.each(function(){var n=l(this),i=l.data(this,"edatagrid").options;if(0<=i.editIndex){if(!n.datagrid("validateRow",i.editIndex))return void n.datagrid("selectRow",i.editIndex);if(0==i.onBeforeSave.call(this,i.editIndex))return void setTimeout(function(){n.datagrid("selectRow",i.editIndex)},0);n.datagrid("endEdit",i.editIndex)}function e(e,t){null==e?(n.datagrid("appendRow",t),i.editIndex=n.datagrid("getRows").length-1):(n.datagrid("insertRow",{index:e,row:t}),i.editIndex=e)}"object"==typeof o?e(o.index,l.extend(o.row,{isNewRecord:!0})):e(o,{isNewRecord:!0}),n.datagrid("beginEdit",i.editIndex),n.datagrid("selectRow",i.editIndex);var t,a=n.datagrid("getRows");i.tree&&(t=l(i.tree).tree("getSelected"),a[i.editIndex][i.treeParentField]=t?t.id:0),i.onAdd.call(this,i.editIndex,a[i.editIndex])})},saveRow:function(e){return e.each(function(){var e=l(this),t=l.data(this,"edatagrid").options;0<=t.editIndex&&(0!=t.onBeforeSave.call(this,t.editIndex)?l(this).datagrid("endEdit",t.editIndex):setTimeout(function(){e.datagrid("selectRow",t.editIndex)},0))})},cancelRow:function(e){return e.each(function(){var e=l.data(this,"edatagrid").options;0<=e.editIndex&&l(this).datagrid("cancelEdit",e.editIndex)})},destroyRow:function(e,a){return e.each(function(){var r=l(this),s=l.data(this,"edatagrid").options,n=[];if(null==a)n=r.datagrid("getSelections");else for(var e=l.isArray(a)?a:[a],t=0;t<e.length;t++){var i=s.finder.getRow(this,e[t]);i&&n.push(i)}n.length?l.messager.confirm(s.destroyMsg.confirm.title,s.destroyMsg.confirm.msg,function(e){if(e){for(var t=0;t<n.length;t++)!function(a){var o,e,t=r.datagrid("getRowIndex",a);-1!=t&&(a.isNewRecord?r.datagrid("cancelEdit",t):s.destroyUrl?(o=a[s.idField||"id"],(e={})[s.idField||"id"]=o,s.poster.call(r[0],s.destroyUrl,e,function(e){var t,n,i=r.datagrid("getRowIndex",o);if(e.isError)return r.datagrid("selectRow",i),void s.onError.call(r[0],i,e);s.tree?(r.datagrid("reload"),(n=(t=l(s.tree)).tree("find",o))&&t.tree("remove",n.target)):(r.datagrid("cancelEdit",i),r.datagrid("deleteRow",i)),s.onDestroy.call(r[0],i,l.extend(a,e));e=r.datagrid("getPager");e.length&&!r.datagrid("getRows").length&&(r.datagrid("options").pageNumber=e.pagination("options").pageNumber,r.datagrid("reload"))},function(e){s.onError.call(r[0],t,e)})):(r.datagrid("cancelEdit",t),r.datagrid("deleteRow",t),s.onDestroy.call(r[0],t,a)))}(n[t]);r.datagrid("clearSelections")}}):l.messager.show({title:s.destroyMsg.norecord.title,msg:s.destroyMsg.norecord.msg})})}},l.fn.edatagrid.defaults=l.extend({},l.fn.datagrid.defaults,{singleSelect:!0,editing:!0,editIndex:-1,destroyMsg:{norecord:{title:topJUI.language.edatagrid.destroyMsg.norecord.title,msg:topJUI.language.edatagrid.destroyMsg.norecord.msg},confirm:{title:topJUI.language.edatagrid.destroyMsg.confirm.title,msg:topJUI.language.edatagrid.destroyMsg.confirm.msg}},poster:function(e,t,n,i){var a=l(this);l.ajax({type:"post",url:e,data:t,dataType:"json",success:function(e){300==e.statusCode?(l.messager.alert(topJUI.language.message.title.operationTips,e.message,"messager-info"),a.datagrid("reload")):n(e)},error:function(e,t,n){i({jqXHR:e,textStatus:t,errorThrown:n})}})},autoSave:!1,url:null,saveUrl:null,updateUrl:null,destroyUrl:null,tree:null,treeUrl:null,treeDndUrl:null,treeTextField:"name",treeParentField:"parentId",onAdd:function(e,t){},onEdit:function(e,t){},onBeforeSave:function(e){},onSave:function(e,t){},onSuccess:function(e,t){},onDestroy:function(e,t){},onError:function(e,t){}}),l.parser.plugins.push("edatagrid")}(jQuery),function(b){var r;function s(e){var t,n=b(e);n.length&&((t=b.data(e,"propertygrid").options).finder.getTr(e,null,"editing").each(function(){var e=parseInt(b(this).attr("datagrid-row-index"));n.datagrid("validateRow",e)?n.datagrid("endEdit",e):n.datagrid("cancelEdit",e)}),t.editIndex=void 0)}b(document).unbind(".propertygrid").bind("mousedown.propertygrid",function(e){b(e.target).closest("div.datagrid-view,div.combo-panel").length||(s(r),r=void 0)}),b.fn.propertygrid=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=b.data(this,"propertygrid");e?b.extend(e.options,t):((e=b.extend({},b.fn.propertygrid.defaults,b.fn.propertygrid.parseOptions(this),t)).frozenColumns=b.extend(!0,[],e.frozenColumns),e.columns=b.extend(!0,[],e.columns),b.data(this,"propertygrid",{options:e})),function(a){b.data(a,"propertygrid");var o=b.data(a,"propertygrid").options;b(a).datagrid(b.extend({},o,{cls:"propertygrid",view:o.showGroup?o.groupView:o.view,onBeforeEdit:function(e,t){if(0==o.onBeforeEdit.call(a,e,t))return!1;var n=b(this),t=n.datagrid("getRows")[e];n.datagrid("getColumnOption","value").editor=t.editor},onClickCell:function(e,t,n){var i;r!=this&&(s(r),r=this),o.editIndex!=e&&(s(r),b(this).datagrid("beginEdit",e),(i=(i=b(this).datagrid("getEditor",{index:e,field:t}))||b(this).datagrid("getEditor",{index:e,field:"value"}))&&(((i=b(i.target)).data("textbox")?i.textbox("textbox"):i).focus(),o.editIndex=e)),o.onClickCell.call(a,e,t,n)},loadFilter:function(e){return s(this),o.loadFilter.call(this,e)}}))}(this)});var n=b.fn.propertygrid.methods[t];return n?n(this,e):this.datagrid(t,e)},b.fn.propertygrid.methods={options:function(e){return b.data(e[0],"propertygrid").options}},b.fn.propertygrid.parseOptions=function(e){return b.extend({},b.fn.datagrid.parseOptions(e),b.parser.parseOptions(e,[{showGroup:"boolean"}]))};var e=b.extend({},b.fn.datagrid.defaults.view,{render:function(e,t,n){for(var i=[],a=this.groups,o=0;o<a.length;o++)i.push(this.renderGroup.call(this,e,o,a[o],n));b(t).html(i.join(""))},renderGroup:function(e,t,n,i){var a=b.data(e,"datagrid"),o=a.options,r=b(e).datagrid("getColumnFields",i),s=o.frozenColumns&&o.frozenColumns.length;if(i&&!o.rownumbers&&!s)return"";var d=[],l=function(e,t){var n="",i="";"string"==typeof e?i=e:e&&(n=e.class||"",i=e.style||"");return'class="'+t+(n?" "+n:"")+'" style="'+i+'"'}(p=o.groupStyler.call(e,n.value,n.rows),"datagrid-group");d.push("<div group-index="+t+" "+l+">"),(i&&(o.rownumbers||o.frozenColumns.length)||!i&&!o.rownumbers&&!o.frozenColumns.length)&&(d.push('<span class="datagrid-group-expander">'),d.push('<span class="datagrid-row-expander datagrid-row-collapse">&nbsp;</span>'),d.push("</span>")),(i&&s||!i)&&(d.push('<span class="datagrid-group-title">'),d.push(o.groupFormatter.call(e,n.value,n.rows)),d.push("</span>")),d.push("</div>"),d.push('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>');for(var c=n.startIndex,u=0;u<n.rows.length;u++){var p,f="",h="";"string"==typeof(p=o.rowStyler?o.rowStyler.call(e,c,n.rows[u]):"")?h=p:p&&(f=p.class||"",h=p.style||"");var g='class="datagrid-row '+(c%2&&o.striped?"datagrid-row-alt ":" ")+f+'"',f=a.rowIdPrefix+"-"+(i?1:2)+"-"+c;d.push('<tr id="'+f+'" datagrid-row-index="'+c+'" '+g+" "+(h?'style="'+h+'"':"")+">"),d.push(this.renderRow.call(this,e,r,i,c,n.rows[u])),d.push("</tr>"),c++}return d.push("</tbody></table>"),d.join("")},bindEvents:function(i){var e=b.data(i,"datagrid").dc,e=e.body1.add(e.body2),a=(b.data(e[0],"events")||b._data(e[0],"events")).click[0].handler;e.unbind("click").bind("click",function(e){var t,n=b(e.target).closest("span.datagrid-row-expander");n.length?(t=n.closest("div.datagrid-group").attr("group-index"),n.hasClass("datagrid-row-collapse")?b(i).datagrid("collapseGroup",t):b(i).datagrid("expandGroup",t)):a(e),e.stopPropagation()})},onBeforeRender:function(e,t){var n=b.data(e,"datagrid"),i=n.options;b("#datagrid-group-style").length||b("head").append('<style id="datagrid-group-style">.datagrid-group{height:'+i.groupHeight+"px;overflow:hidden;font-weight:bold;border-bottom:1px solid #ccc;white-space:nowrap;word-break:normal;}.datagrid-group-title,.datagrid-group-expander{display:inline-block;vertical-align:bottom;height:100%;line-height:"+i.groupHeight+"px;padding:0 4px;}.datagrid-group-title{position:relative;}.datagrid-group-expander{width:"+i.expanderWidth+"px;text-align:center;padding:0}.datagrid-row-expander{margin:"+Math.floor((i.groupHeight-16)/2)+"px 0;display:inline-block;width:16px;height:16px;cursor:pointer}</style>");for(var a=[],o=0;o<t.length;o++){var r=t[o];(s=function(e){for(var t=0;t<a.length;t++){var n=a[t];if(n.value==e)return n}return null}(r[i.groupField]))?s.rows.push(r):(s={value:r[i.groupField],rows:[r]},a.push(s))}for(var s,d=0,l=[],o=0;o<a.length;o++)(s=a[o]).startIndex=d,d+=s.rows.length,l=l.concat(s.rows);n.data.rows=l,this.groups=a;var c=this;setTimeout(function(){c.bindEvents(e)},0)},onAfterRender:function(n){b.fn.datagrid.defaults.view.onAfterRender.call(this,n);var i=this,a=b.data(n,"datagrid"),e=a.options;a.onResizeColumn||(a.onResizeColumn=e.onResizeColumn),a.onResize||(a.onResize=e.onResize),e.onResizeColumn=function(e,t){i.resizeGroup(n),a.onResizeColumn.call(n,e,t)},e.onResize=function(e,t){i.resizeGroup(n),a.onResize.call(b(n).datagrid("getPanel")[0],e,t)},i.resizeGroup(n)}});b.extend(b.fn.datagrid.methods,{groups:function(e){return e.datagrid("options").view.groups},expandGroup:function(e,i){return e.each(function(){var e=b(this).datagrid("options"),t=b.data(this,"datagrid").dc.view.find(null!=i?'div.datagrid-group[group-index="'+i+'"]':"div.datagrid-group"),n=t.find("span.datagrid-row-expander");n.hasClass("datagrid-row-expand")&&(n.removeClass("datagrid-row-expand").addClass("datagrid-row-collapse"),t.next("table").show()),b(this).datagrid("fixRowHeight"),e.onExpandGroup&&e.onExpandGroup.call(this,i)})},collapseGroup:function(e,i){return e.each(function(){var e=b(this).datagrid("options"),t=b.data(this,"datagrid").dc.view.find(null!=i?'div.datagrid-group[group-index="'+i+'"]':"div.datagrid-group"),n=t.find("span.datagrid-row-expander");n.hasClass("datagrid-row-collapse")&&(n.removeClass("datagrid-row-collapse").addClass("datagrid-row-expand"),t.next("table").hide()),b(this).datagrid("fixRowHeight"),e.onCollapseGroup&&e.onCollapseGroup.call(this,i)})},scrollToGroup:function(e,o){return e.each(function(){var e,t,n,i=b.data(this,"datagrid").dc,a=i.body2.children('div.datagrid-group[group-index="'+o+'"]');a.length&&(e=a.outerHeight(),t=i.view2.children("div.datagrid-header")._outerHeight(),n=i.body2.outerHeight(!0)-i.body2.outerHeight(),(n=a.position().top-t-n)<0?i.body2.scrollTop(i.body2.scrollTop()+n):n+e>i.body2.height()-18&&i.body2.scrollTop(i.body2.scrollTop()+n+e-i.body2.height()+18))})}}),b.extend(e,{refreshGroupTitle:function(e,t){var n=b.data(e,"datagrid"),i=n.options,a=n.dc,n=this.groups[t];a.body1.add(a.body2).children("div.datagrid-group[group-index="+t+"]").find("span.datagrid-group-title").html(i.groupFormatter.call(e,n.value,n.rows))},resizeGroup:function(e,t){var n=b.data(e,"datagrid"),i=n.dc,a=i.header2.find("table").find("tr.datagrid-filter-row").hide(),e=i.body2.children("table.datagrid-btable:first").width();(t=null==t?i.body2.children("div.datagrid-group"):i.body2.children("div.datagrid-group[group-index="+t+"]"))._outerWidth(e);e=n.options;e.frozenColumns&&e.frozenColumns.length&&(n=i.view1.width()-e.expanderWidth,i="rtl"==i.view1.css("direction").toLowerCase(),t.find(".datagrid-group-title").css(i?"right":"left",-n+"px")),a.length&&e.showFilterBar&&a.show()},insertRow:function(i,e,t){var n,a=b.data(i,"datagrid"),o=a.options,r=a.dc,s=null;if(a.data.rows.length){for(var d=0;d<this.groups.length;d++)if(this.groups[d].value==t[o.groupField]){s=this.groups[d],n=d;break}s?((e=null==e||null==e?a.data.rows.length:e)<s.startIndex?e=s.startIndex:e>s.startIndex+s.rows.length&&(e=s.startIndex+s.rows.length),b.fn.datagrid.defaults.view.insertRow.call(this,i,e,t),e>=s.startIndex+s.rows.length&&(l(e,!0),l(e,!1)),s.rows.splice(e-s.startIndex,0,t)):(s={value:t[o.groupField],rows:[t],startIndex:a.data.rows.length},n=this.groups.length,r.body1.append(this.renderGroup.call(this,i,n,s,!0)),r.body2.append(this.renderGroup.call(this,i,n,s,!1)),this.groups.push(s),a.data.rows.push(t)),this.setGroupIndex(i),this.refreshGroupTitle(i,n),this.resizeGroup(i)}else b(i).datagrid("loadData",[t]);function l(e,t){var n=t?1:2,t=o.finder.getTr(i,e-1,"body",n);o.finder.getTr(i,e,"body",n).insertAfter(t)}},updateRow:function(e,t,n){var i=b.data(e,"datagrid").options;b.fn.datagrid.defaults.view.updateRow.call(this,e,t,n);t=i.finder.getTr(e,t,"body",2).closest("table.datagrid-btable"),t=parseInt(t.prev().attr("group-index"));this.refreshGroupTitle(e,t)},deleteRow:function(e,t){var n=b.data(e,"datagrid"),i=n.options,n=n.dc,a=n.body1.add(n.body2),n=i.finder.getTr(e,t,"body",2).closest("table.datagrid-btable"),i=parseInt(n.prev().attr("group-index"));b.fn.datagrid.defaults.view.deleteRow.call(this,e,t);n=this.groups[i];if(1<n.rows.length)n.rows.splice(t-n.startIndex,1),this.refreshGroupTitle(e,i);else{a.children("div.datagrid-group[group-index="+i+"]").remove();for(var o=i+1;o<this.groups.length;o++)a.children("div.datagrid-group[group-index="+o+"]").attr("group-index",o-1);this.groups.splice(i,1)}this.setGroupIndex(e)},setGroupIndex:function(e){for(var t=0,n=0;n<this.groups.length;n++){var i=this.groups[n];i.startIndex=t,t+=i.rows.length}}}),b.fn.propertygrid.defaults=b.extend({},b.fn.datagrid.defaults,{groupHeight:28,expanderWidth:20,singleSelect:!0,remoteSort:!1,fitColumns:!0,loadMsg:"",frozenColumns:[[{field:"f",width:20,resizable:!1}]],columns:[[{field:"name",title:"Name",width:100,sortable:!0},{field:"value",title:"Value",width:100,resizable:!1}]],showGroup:!1,groupView:e,groupField:"group",groupStyler:function(e,t){return""},groupFormatter:function(e,t){return e}})}(jQuery),function(m){function u(i,e){var a=m.data(i,"datagrid").options,t=m.data(i,"datagrid").dc;if(!t.body1.is(":empty")&&(!a.nowrap||a.autoRowHeight)&&null!=e)for(var n=v(i,e),o=0;o<n.length;o++)!function(e){var t=a.finder.getTr(i,e,"body",1),n=a.finder.getTr(i,e,"body",2);t.css("height",""),n.css("height","");e=Math.max(t.height(),n.height());t.css("height",e),n.css("height",e)}(n[o][a.idField]);m(i).datagrid("fixRowHeight",e)}function p(e){var t=m.data(e,"datagrid").dc;m.data(e,"treegrid").options.rownumbers&&t.body1.find("div.datagrid-cell-rownumber").each(function(e){m(this).html(e+1)})}function e(n){return function(e){m.fn.datagrid.defaults.rowEvents[n?"mouseover":"mouseout"](e);var t=m(e.target),e=n?"addClass":"removeClass";t.hasClass("tree-hit")&&(t.hasClass("tree-expanded")?t[e]("tree-expanded-hover"):t[e]("tree-collapsed-hover"))}}function f(e,t,n,i){var a=m.data(e,"treegrid"),o=(a.checkedRows,a.options);if(o.checkbox){a=x(e,t);if(a.checkState){var r,s,t=o.finder.getTr(e,t).find(".tree-checkbox");if(null==n&&(n=!t.hasClass("tree-checkbox1")&&(!!t.hasClass("tree-checkbox0")||(null==a._checked&&(a._checked=t.hasClass("tree-checkbox1")),!a._checked))),a._checked=n){if(t.hasClass("tree-checkbox1"))return}else if(t.hasClass("tree-checkbox0"))return;!i&&0==o.onBeforeCheckNode.call(e,a,n)||(o.cascadeCheck?(d(r=e,t=a,s=n?1:0),m.easyui.forEach(t.children||[],!0,function(e){d(r,e,s)}),l(e,a)):d(e,a,n?"1":"0"),i||o.onCheckNode.call(e,a,n))}}}function d(e,t,n){var i=m.data(e,"treegrid"),a=i.checkedRows,i=i.options;!t.checkState||null==n||(e=i.finder.getTr(e,t[i.idField]).find(".tree-checkbox")).length&&(t.checkState=["unchecked","checked","indeterminate"][n],t.checked="checked"==t.checkState,e.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),e.addClass("tree-checkbox"+n),0==n?m.easyui.removeArrayItem(a,i.idField,t[i.idField]):m.easyui.addArrayItem(a,i.idField,t))}function l(e,t){t=b(e,t[m.data(e,"treegrid").options.idField]);t&&(d(e,t,s(t)),l(e,t))}function s(e){var t=0,n=0,i=0;if(m.easyui.forEach(e.children||[],!1,function(e){e.checkState&&(t++,"checked"==e.checkState?i++:"unchecked"==e.checkState&&n++)}),0!=t)return n==t?0:i==t?1:2}function r(e,t){var n,i,a,o,r=m.data(e,"treegrid").options;r.checkbox&&(n=x(e,t),a=(i=r.finder.getTr(e,t)).find(".tree-checkbox"),r.view.hasCheckbox(e,n)?(a.length||(n.checkState=n.checkState||"unchecked",m('<span class="tree-checkbox"></span>').insertBefore(i.find(".tree-title"))),"checked"==n.checkState?f(e,t,!0,!0):"unchecked"==n.checkState||0===(o=s(n))?f(e,t,!1,!0):1===o&&f(e,t,!0,!0)):(a.remove(),n.checkState=void 0,n.checked=void 0,l(e,n)))}function c(e,t){var n=m.data(e,"treegrid").options,i=n.finder.getTr(e,t,"body",1),t=n.finder.getTr(e,t,"body",2),n=m(e).datagrid("getColumnFields",!0).length+(n.rownumbers?1:0),e=m(e).datagrid("getColumnFields",!1).length;function a(e,t){m('<tr class="treegrid-tr-tree"><td style="border:0px" colspan="'+t+'"><div></div></td></tr>').insertAfter(e)}a(i,n),a(t,e)}function h(e,t,n,i,a){var o=m.data(e,"treegrid"),r=o.options,s=o.dc;n=r.loadFilter.call(e,n,t);var d,l,c=x(e,t);c?(d=r.finder.getTr(e,t,"body",1),l=r.finder.getTr(e,t,"body",2),d=d.next("tr.treegrid-tr-tree").children("td").children("div"),l=l.next("tr.treegrid-tr-tree").children("td").children("div"),i||(c.children=[])):(d=s.body1,l=s.body2,i||(o.data=[])),i||(d.empty(),l.empty()),r.view.onBeforeRender&&r.view.onBeforeRender.call(r.view,e,t,n),r.view.render.call(r.view,e,d,!0),r.view.render.call(r.view,e,l,!1),r.showFooter&&(r.view.renderFooter.call(r.view,e,s.footer1,!0),r.view.renderFooter.call(r.view,e,s.footer2,!1)),r.view.onAfterRender&&r.view.onAfterRender.call(r.view,e),!t&&r.pagination&&(m.data(e,"treegrid").total,(t=(s=m(e).datagrid("getPager")).pagination("options")).total!=n.total&&(s.pagination("refresh",{pageNumber:r.pageNumber,total:n.total}),r.pageNumber!=t.pageNumber&&0<t.pageNumber&&(r.pageNumber=t.pageNumber,g(e)))),u(e),p(e),m(e).treegrid("showLines"),m(e).treegrid("setSelectionState"),m(e).treegrid("autoSizeColumn"),a||r.onLoadSuccess.call(e,c,n)}function g(t,n,e,i,a){var o=m.data(t,"treegrid").options,r=m(t).datagrid("getPanel").find("div.datagrid-body");null==n&&o.queryParams&&(o.queryParams.id=void 0),e&&(o.queryParams=e);var s=m.extend({},o.queryParams);o.pagination&&m.extend(s,{page:o.pageNumber,rows:o.pageSize}),o.sortName&&m.extend(s,{sort:o.sortName,order:o.sortOrder});var d,e=x(t,n);0!=o.onBeforeLoad.call(t,e,s)&&((d=r.find('tr[node-id="'+n+'"] span.tree-folder')).addClass("tree-loading"),m(t).treegrid("loading"),0==o.loader.call(t,s,function(e){d.removeClass("tree-loading"),m(t).treegrid("loaded"),h(t,n,e,i),a&&a()},function(){d.removeClass("tree-loading"),m(t).treegrid("loaded"),o.onLoadError.apply(t,arguments),a&&a()})&&(d.removeClass("tree-loading"),m(t).treegrid("loaded")))}function t(e){return m.data(e,"treegrid").data}function b(e,t){t=x(e,t);return t._parentId?x(e,t._parentId):null}function v(e,t){var n=m.data(e,"treegrid").data;t&&(n=(t=x(e,t))&&t.children||[]);var i=[];return m.easyui.forEach(n,!0,function(e){i.push(e)}),i}function x(e,t){var e=m.data(e,"treegrid"),n=e.options,i=null;return m.easyui.forEach(e.data,!0,function(e){if(e[n.idField]==t)return i=e,!1}),i}function o(e,t){var n=m.data(e,"treegrid").options,i=x(e,t),a=n.finder.getTr(e,t),o=a.find("span.tree-hit");0!=o.length&&(o.hasClass("tree-collapsed")||0!=n.onBeforeCollapse.call(e,i)&&(o.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),o.next().removeClass("tree-folder-open"),i.state="closed",a=(a=a.next("tr.treegrid-tr-tree")).children("td").children("div"),n.animate?a.slideUp("normal",function(){m(e).treegrid("autoSizeColumn"),u(e,t),n.onCollapse.call(e,i)}):(a.hide(),m(e).treegrid("autoSizeColumn"),u(e,t),n.onCollapse.call(e,i))))}function w(t,n){var e,i,a=m.data(t,"treegrid").options,o=a.finder.getTr(t,n),r=o.find("span.tree-hit"),s=x(t,n);function d(e){s.state="open",a.animate?e.slideDown("normal",function(){m(t).treegrid("autoSizeColumn"),u(t,n),a.onExpand.call(t,s)}):(e.show(),m(t).treegrid("autoSizeColumn"),u(t,n),a.onExpand.call(t,s))}0!=r.length&&(r.hasClass("tree-expanded")||0!=a.onBeforeExpand.call(t,s)&&(r.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),r.next().addClass("tree-folder-open"),(e=o.next("tr.treegrid-tr-tree")).length?d(i=e.children("td").children("div")):(c(t,s[a.idField]),e=o.next("tr.treegrid-tr-tree"),(i=e.children("td").children("div")).hide(),(o=m.extend({},a.queryParams||{})).id=s[a.idField],g(t,s[a.idField],o,!0,function(){i.is(":empty")?e.remove():d(i)}))))}function y(e,t){(m.data(e,"treegrid").options.finder.getTr(e,t).find("span.tree-hit").hasClass("tree-expanded")?o:w)(e,t)}function C(e,t){var n,i=m.data(e,"treegrid"),a=i.options;t.parent&&(0==(n=a.finder.getTr(e,t.parent)).next("tr.treegrid-tr-tree").length&&c(e,t.parent),(a=n.children('td[field="'+a.treeField+'"]').children("div.datagrid-cell").children("span.tree-icon")).hasClass("tree-file")&&(a.removeClass("tree-file").addClass("tree-folder tree-folder-open"),(a=m('<span class="tree-hit tree-expanded"></span>').insertBefore(a)).prev().length&&a.prev().remove())),h(e,t.parent,t.data,0<i.data.length,!0)}function n(o){var e,r=m(o),s=r.treegrid("options");function n(e){return s.finder.getTr(o,e[s.idField]).find('td[field="'+s.treeField+'"] div.datagrid-cell')}s.lines?(r.treegrid("getPanel").addClass("tree-lines"),r.treegrid("getPanel").find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom"),r.treegrid("getPanel").find("div.datagrid-cell").removeClass("tree-node-last tree-root-first tree-root-one"),1<(e=r.treegrid("getRoots")).length?n(e[0]).addClass("tree-root-first"):1==e.length&&n(e[0]).addClass("tree-root-one"),function t(e){m.map(e,function(e){e.children&&e.children.length?t(e.children):n(e).find(".tree-icon").prev().addClass("tree-join")});e.length&&((e=n(e[e.length-1])).addClass("tree-node-last"),e.find(".tree-join").removeClass("tree-join").addClass("tree-joinbottom"))}(e),function t(e){m.map(e,function(e){e.children&&e.children.length&&t(e.children)});for(var n=0;n<e.length-1;n++){var i=e[n],a=r.treegrid("getLevel",i[s.idField]),i=s.finder.getTr(o,i[s.idField]),i=i.next().find('tr.datagrid-row td[field="'+s.treeField+'"] div.datagrid-cell');i.find("span:eq("+(a-1)+")").addClass("tree-line")}}(e)):r.treegrid("getPanel").removeClass("tree-lines")}m.fn.treegrid=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=m.data(this,"treegrid");e?m.extend(e.options,t):e=m.data(this,"treegrid",{options:m.extend({},m.fn.treegrid.defaults,m.fn.treegrid.parseOptions(this),t),data:[],checkedRows:[],tmpIds:[]}),function(i){var e=m.data(i,"treegrid"),a=e.options;m(i).datagrid(m.extend({},a,{url:null,data:null,loader:function(){return!1},onBeforeLoad:function(){return!1},onLoadSuccess:function(){},onResizeColumn:function(e,t){u(i),a.onResizeColumn.call(i,e,t)},onBeforeSortColumn:function(e,t){if(0==a.onBeforeSortColumn.call(i,e,t))return!1},onSortColumn:function(e,t){var n;a.sortName=e,a.sortOrder=t,a.remoteSort?g(i):(n=m(i).treegrid("getData"),h(i,null,n)),a.onSortColumn.call(i,e,t)},onClickCell:function(e,t){a.onClickCell.call(i,t,x(i,e))},onDblClickCell:function(e,t){a.onDblClickCell.call(i,t,x(i,e))},onRowContextMenu:function(e,t){a.onContextMenu.call(i,e,x(i,t))}}));var n,t=m.data(i,"datagrid").options;a.columns=t.columns,a.frozenColumns=t.frozenColumns,e.dc=m.data(i,"datagrid").dc,a.pagination&&((n=m(i).datagrid("getPager")).pagination({total:0,pageNumber:a.pageNumber,pageSize:a.pageSize,pageList:a.pageList,onSelectPage:function(e,t){a.pageNumber=e||1,a.pageSize=t,n.pagination("refresh",{pageNumber:e,pageSize:t}),g(i)}}),a.pageSize=n.pagination("options").pageSize)}(this),e.options.data&&m(this).treegrid("loadData",e.options.data),g(this)});var n=m.fn.treegrid.methods[t];return n?n(this,e):this.datagrid(t,e)},m.fn.treegrid.methods={options:function(e){return m.data(e[0],"treegrid").options},resize:function(e,t){return e.each(function(){m(this).datagrid("resize",t)})},fixRowHeight:function(e,t){return e.each(function(){u(this,t)})},loadData:function(e,t){return e.each(function(){h(this,t.parent,t)})},load:function(e,t){return e.each(function(){m(this).treegrid("options").pageNumber=1,m(this).treegrid("getPager").pagination({pageNumber:1}),m(this).treegrid("reload",t)})},reload:function(e,i){return e.each(function(){var e,t=m(this).treegrid("options"),n={};"object"==typeof i?n=i:(n=m.extend({},t.queryParams)).id=i,n.id?((e=m(this).treegrid("find",n.id)).children&&e.children.splice(0,e.children.length),t.queryParams=n,(t=t.finder.getTr(this,n.id)).next("tr.treegrid-tr-tree").remove(),t.find("span.tree-hit").removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),w(this,n.id)):g(this,null,n)})},reloadFooter:function(e,n){return e.each(function(){var e=m.data(this,"treegrid").options,t=m.data(this,"datagrid").dc;n&&(m.data(this,"treegrid").footer=n),e.showFooter&&(e.view.renderFooter.call(e.view,this,t.footer1,!0),e.view.renderFooter.call(e.view,this,t.footer2,!1),e.view.onAfterRender&&e.view.onAfterRender.call(e.view,this),m(this).treegrid("fixRowHeight"))})},getData:function(e){return m.data(e[0],"treegrid").data},getFooterRows:function(e){return m.data(e[0],"treegrid").footer},getRoot:function(e){return(e=t(e=e[0])).length?e[0]:null},getRoots:function(e){return t(e[0])},getParent:function(e,t){return b(e[0],t)},getChildren:function(e,t){return v(e[0],t)},getLevel:function(e,t){return n=e[0],e=t,(t=m.data(n,"treegrid").options).finder.getTr(n,e).children('td[field="'+t.treeField+'"]').find("span.tree-indent,span.tree-hit").length;var n},find:function(e,t){return x(e[0],t)},isLeaf:function(e,t){return 0==m.data(e[0],"treegrid").options.finder.getTr(e[0],t).find("span.tree-hit").length},select:function(e,t){return e.each(function(){m(this).datagrid("selectRow",t)})},unselect:function(e,t){return e.each(function(){m(this).datagrid("unselectRow",t)})},collapse:function(e,t){return e.each(function(){o(this,t)})},expand:function(e,t){return e.each(function(){w(this,t)})},toggle:function(e,t){return e.each(function(){y(this,t)})},collapseAll:function(e,t){return e.each(function(){!function(e,t){var n=m.data(e,"treegrid").options,i=v(e,t);t&&i.unshift(x(e,t));for(var a=0;a<i.length;a++)o(e,i[a][n.idField])}(this,t)})},expandAll:function(e,t){return e.each(function(){!function(e,t){var n=m.data(e,"treegrid").options,i=v(e,t);t&&i.unshift(x(e,t));for(var a=0;a<i.length;a++)w(e,i[a][n.idField])}(this,t)})},expandTo:function(e,t){return e.each(function(){!function(e,t){for(var n=m.data(e,"treegrid").options,i=[],a=b(e,t);a;){var o=a[n.idField];i.unshift(o),a=b(e,o)}for(var r=0;r<i.length;r++)w(e,i[r])}(this,t)})},append:function(e,t){return e.each(function(){C(this,t)})},insert:function(e,t){return e.each(function(){!function(a,o){var r=o.before||o.after,s=m.data(a,"treegrid").options,e=b(a,r);C(a,{parent:e?e[s.idField]:null,data:[o.data]});for(var t=e?e.children:m(a).treegrid("getRoots"),n=0;n<t.length;n++)if(t[n][s.idField]==r){var i=t[t.length-1];t.splice(o.before?n:n+1,0,i),t.splice(t.length-1,1);break}function d(e){var t=e?1:2,n=(i=s.finder.getTr(a,o.data[s.idField],"body",t)).closest("table.datagrid-btable"),i=i.parent().children(),e=s.finder.getTr(a,r,"body",t);o.before?i.insertBefore(e):(t=e.next("tr.treegrid-tr-tree"),i.insertAfter(t.length?t:e)),n.remove()}d(!0),d(!1),p(a),m(a).treegrid("showLines")}(this,t)})},remove:function(e,o){return e.each(function(){var e,t,n,i,a;e=this,t=o,n=m.data(e,"treegrid"),i=n.options,a=b(e,t),m(e).datagrid("deleteRow",t),m.easyui.removeArrayItem(n.checkedRows,i.idField,t),p(e),a&&r(e,a[i.idField]),--n.total,m(e).datagrid("getPager").pagination("refresh",{total:n.total}),m(e).treegrid("showLines")})},pop:function(e,t){var n=e.treegrid("find",t);return e.treegrid("remove",t),n},refresh:function(e,t){return e.each(function(){var e=m.data(this,"treegrid").options;e.view.refreshRow.call(e.view,this,t)})},update:function(e,n){return e.each(function(){var e=m.data(this,"treegrid").options,t=n.row;e.view.updateRow.call(e.view,this,n.id,t),null!=t.checked&&(t=x(this,n.id),m.extend(t,{checkState:t.checked?"checked":!1===t.checked?"unchecked":void 0}),r(this,n.id))})},beginEdit:function(e,t){return e.each(function(){m(this).datagrid("beginEdit",t),m(this).treegrid("fixRowHeight",t)})},endEdit:function(e,t){return e.each(function(){m(this).datagrid("endEdit",t)})},cancelEdit:function(e,t){return e.each(function(){m(this).datagrid("cancelEdit",t)})},showLines:function(e){return e.each(function(){n(this)})},setSelectionState:function(e){return e.each(function(){m(this).datagrid("setSelectionState");for(var e=m(this).data("treegrid"),t=0;t<e.tmpIds.length;t++)f(this,e.tmpIds[t],!0,!0);e.tmpIds=[]})},getCheckedNodes:function(e,t){t=t||"checked";var n=[];return m.easyui.forEach(e.data("treegrid").checkedRows,!1,function(e){e.checkState==t&&n.push(e)}),n},checkNode:function(e,t){return e.each(function(){f(this,t,!0)})},uncheckNode:function(e,t){return e.each(function(){f(this,t,!1)})},clearChecked:function(e){return e.each(function(){var t=this,n=m(t).treegrid("options");m(t).datagrid("clearChecked"),m.map(m(t).treegrid("getCheckedNodes"),function(e){f(t,e[n.idField],!1,!0)})})}},m.fn.treegrid.parseOptions=function(e){return m.extend({},m.fn.datagrid.parseOptions(e),m.parser.parseOptions(e,["treeField",{checkbox:"boolean",cascadeCheck:"boolean",onlyLeafCheck:"boolean"},{animate:"boolean"}]))};var i=m.extend({},m.fn.datagrid.defaults.view,{render:function(u,e,t){var p,f=m.data(u,"treegrid").options,h=m(u).datagrid("getColumnFields",t),g=m.data(u,"datagrid").rowIdPrefix;function b(e,t,n){for(var i=m(u).treegrid("getParent",n[0][f.idField]),a=(i?i.children:m(u).treegrid("getRoots")).length-n.length,o=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'],r=0;r<n.length;r++){var s=n[r];"open"!=s.state&&"closed"!=s.state&&(s.state="open");var d=f.rowStyler?f.rowStyler.call(u,s):"",l=this.getStyleValue(d),c='class="datagrid-row '+(a++%2&&f.striped?"datagrid-row-alt ":" ")+l.c+'"',d=l.s?'style="'+l.s+'"':"",l=g+"-"+(e?1:2)+"-"+s[f.idField];o.push('<tr id="'+l+'" node-id="'+s[f.idField]+'" '+c+" "+d+">"),(o=o.concat(p.renderRow.call(p,u,h,e,t,s))).push("</tr>"),s.children&&s.children.length&&(d=b.call(this,e,t+1,s.children),s="closed"==s.state?"none":"block",o.push('<tr class="treegrid-tr-tree"><td style="border:0px" colspan='+(h.length+(f.rownumbers?1:0))+'><div style="display:'+s+'">'),(o=o.concat(d)).push("</div></td></tr>"))}return o.push("</tbody></table>"),o}!(!t||f.rownumbers||f.frozenColumns&&f.frozenColumns.length)||(p=this).treeNodes&&this.treeNodes.length&&(t=b.call(this,t,this.treeLevel,this.treeNodes),m(e).append(t.join("")))},renderFooter:function(e,t,n){for(var i=m.data(e,"treegrid").options,a=m.data(e,"treegrid").footer||[],o=m(e).datagrid("getColumnFields",n),r=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],s=0;s<a.length;s++){var d=a[s];d[i.idField]=d[i.idField]||"foot-row-id"+s,r.push('<tr class="datagrid-row" node-id="'+d[i.idField]+'">'),r.push(this.renderRow.call(this,e,o,n,0,d)),r.push("</tr>")}r.push("</tbody></table>"),m(t).html(r.join(""))},renderRow:function(e,t,n,i,a){var o=m.data(e,"treegrid"),r=o.options,s=[];n&&r.rownumbers&&s.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">0</div></td>');for(var d=0;d<t.length;d++){var l=t[d],c=m(e).datagrid("getColumnOption",l);if(c){var u=c.styler&&c.styler(a[l],a)||"",p=this.getStyleValue(u),u=p.c?'class="'+p.c+'"':"",p=c.hidden?'style="display:none;'+p.s+'"':p.s?'style="'+p.s+'"':"";s.push('<td field="'+l+'" '+u+" "+p+">");p="";if(c.checkbox||(c.align&&(p+="text-align:"+c.align+";"),r.nowrap?r.autoRowHeight&&(p+="height:auto;"):p+="white-space:normal;height:auto;"),s.push('<div style="'+p+'" '),c.checkbox?s.push('class="datagrid-cell-check '):s.push('class="datagrid-cell '+c.cellClass),l==r.treeField&&s.push(" tree-node"),s.push('">'),c.checkbox)a.checked?s.push('<input type="checkbox" checked="checked"'):s.push('<input type="checkbox"'),s.push(' name="'+l+'" value="'+(null!=a[l]?a[l]:"")+'">');else{p=null,p=c.formatter?c.formatter(a[l],a):a[l];if(l==r.treeField){for(var f=0;f<i;f++)s.push('<span class="tree-indent"></span>');"closed"==a.state?(s.push('<span class="tree-hit tree-collapsed"></span>'),s.push('<span class="tree-icon tree-folder '+(a.iconCls||"")+'"></span>')):a.children&&a.children.length?(s.push('<span class="tree-hit tree-expanded"></span>'),s.push('<span class="tree-icon tree-folder tree-folder-open '+(a.iconCls||"")+'"></span>')):(s.push('<span class="tree-indent"></span>'),s.push('<span class="tree-icon tree-file '+(a.iconCls||"")+'"></span>')),this.hasCheckbox(e,a)?(c=0,(l=m.easyui.getArrayItem(o.checkedRows,r.idField,a[r.idField]))?(c="checked"==l.checkState?1:2,a.checkState=l.checkState,a.checked=l.checked,m.easyui.addArrayItem(o.checkedRows,r.idField,a)):((l=m.easyui.getArrayItem(o.checkedRows,r.idField,a._parentId))&&"checked"==l.checkState&&r.cascadeCheck?(c=1,a.checked=!0,m.easyui.addArrayItem(o.checkedRows,r.idField,a)):a.checked&&m.easyui.addArrayItem(o.tmpIds,a[r.idField]),a.checkState=c?"checked":"unchecked"),s.push('<span class="tree-checkbox tree-checkbox'+c+'"></span>')):(a.checkState=void 0,a.checked=void 0),s.push('<span class="tree-title">'+p+"</span>")}else s.push(p)}s.push("</div>"),s.push("</td>")}}return s.join("")},hasCheckbox:function(e,t){var n=m.data(e,"treegrid").options;if(n.checkbox){if(m.isFunction(n.checkbox))return!!n.checkbox.call(e,t);if(!n.onlyLeafCheck)return!0;if(!("open"!=t.state||t.children&&t.children.length))return!0}return!1},refreshRow:function(e,t){this.updateRow.call(this,e,t,{})},updateRow:function(o,r,e){var s=m.data(o,"treegrid").options,d=m(o).treegrid("find",r);m.extend(d,e);var l=m(o).treegrid("getLevel",r)-1,c=s.rowStyler?s.rowStyler.call(o,d):"",u=m.data(o,"datagrid").rowIdPrefix,p=d[s.idField];function t(e){var t=m(o).treegrid("getColumnFields",e),n=s.finder.getTr(o,r,"body",e?1:2),i=n.find("div.datagrid-cell-rownumber").html(),a=n.find("div.datagrid-cell-check input[type=checkbox]").is(":checked");n.html(this.renderRow(o,t,e,l,d)),n.attr("style",c||""),n.find("div.datagrid-cell-rownumber").html(i),a&&n.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0),p!=r&&(n.attr("id",u+"-"+(e?1:2)+"-"+p),n.attr("node-id",p))}t.call(this,!0),t.call(this,!1),m(o).treegrid("fixRowHeight",r)},deleteRow:function(a,e){var o=m.data(a,"treegrid").options,t=o.finder.getTr(a,e);t.next("tr.treegrid-tr-tree").remove(),t.remove();e=function(e){var t,n=m(a).treegrid("getParent",e);t=n?n.children:m(a).treegrid("getData");for(var i=0;i<t.length;i++)if(t[i][o.idField]==e){t.splice(i,1);break}return n}(e);e&&0==e.children.length&&((t=o.finder.getTr(a,e[o.idField])).next("tr.treegrid-tr-tree").remove(),(t=t.children('td[field="'+o.treeField+'"]').children("div.datagrid-cell")).find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),t.find(".tree-hit").remove(),m('<span class="tree-indent"></span>').prependTo(t)),this.setEmptyMsg(a)},onBeforeRender:function(e,t,n){if(m.isArray(t)&&(n={total:t.length,rows:t},t=null),!n)return!1;var i=m.data(e,"treegrid"),o=i.options;null==n.length?(n.footer&&(i.footer=n.footer),n.total&&(i.total=n.total),n=this.transfer(e,t,n.rows)):function e(t,n){for(var i=0;i<t.length;i++){var a=t[i];a._parentId=n,a.children&&a.children.length&&e(a.children,a[o.idField])}}(n,t),this.sort(e,n),this.treeNodes=n,this.treeLevel=m(e).treegrid("getLevel",t);t=x(e,t);t?t.children?t.children=t.children.concat(n):t.children=n:i.data=i.data.concat(n)},sort:function(s,e){var d,l,t=m.data(s,"treegrid").options;!t.remoteSort&&t.sortName&&(d=t.sortName.split(","),l=t.sortOrder.split(","),function e(t){t.sort(function(e,t){for(var n=0,i=0;i<d.length;i++){var a=d[i],o=l[i],r=m(s).treegrid("getColumnOption",a),r=r.sorter||function(e,t){return e==t?0:t<e?1:-1};if(0!=(n=r(e[a],t[a])*("asc"==o?1:-1)))return n}return n});for(var n=0;n<t.length;n++){var i=t[n].children;i&&i.length&&e(i)}}(e))},transfer:function(e,t,n){for(var i=m.data(e,"treegrid").options,a=m.extend([],n),t=d(t,a),o=m.extend([],t);o.length;){var r=o.shift(),s=d(r[i.idField],a);s.length&&(r.children?r.children=r.children.concat(s):r.children=s,o=o.concat(s))}return t;function d(e,t){for(var n=[],i=0;i<t.length;i++){var a=t[i];a._parentId==e&&(n.push(a),t.splice(i,1),i--)}return n}}});m.fn.treegrid.defaults=m.extend({},m.fn.datagrid.defaults,{treeField:null,checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,lines:!1,animate:!1,singleSelect:!0,view:i,rowEvents:m.extend({},m.fn.datagrid.defaults.rowEvents,{mouseover:e(!0),mouseout:e(!1),click:function(e){var t=m(e.target);if((l=t.closest("tr.datagrid-row")).length&&l.parent().length){var n=l.attr("node-id"),i=m(l).closest("div.datagrid-view").children(".datagrid-f")[0];if(t.hasClass("tree-hit"))y(i,n);else if(t.hasClass("tree-checkbox"))f(i,n);else{var a=m(i).datagrid("options");if(t.parent().hasClass("datagrid-cell-check")||a.singleSelect||!e.shiftKey)m.fn.datagrid.defaults.rowEvents.click(e);else{var o=m(i).treegrid("getChildren"),r=m.easyui.indexOfArray(o,a.idField,a.lastSelectedIndex),s=m.easyui.indexOfArray(o,a.idField,n),e=Math.min(Math.max(r,0),s),d=Math.max(r,s),s=o[s],l=t.closest("td[field]",l);l.length&&(l=l.attr("field"),a.onClickCell.call(i,n,l,s[l])),m(i).treegrid("clearSelections");for(var c=e;c<=d;c++)m(i).treegrid("selectRow",o[c][a.idField]);a.onClickRow.call(i,s)}}}}}),loader:function(e,t,n){var i=m(this).treegrid("options");if(!i.url)return!1;m.ajax({type:i.method,url:i.url,data:e,dataType:"json",success:function(e){t(e)},error:function(){n.apply(this,arguments)}})},loadFilter:function(e,t){return e},finder:{getTr:function(e,t,n,i){n=n||"body",i=i||0;var a=m.data(e,"datagrid").dc;if(0==i){var o=m.data(e,"treegrid").options,r=o.finder.getTr(e,t,n,1),o=o.finder.getTr(e,t,n,2);return r.add(o)}if("body"!=n)return"footer"==n?(1==i?a.footer1:a.footer2).find('tr[node-id="'+t+'"]'):"selected"==n?(1==i?a.body1:a.body2).find("tr.datagrid-row-selected"):"highlight"==n?(1==i?a.body1:a.body2).find("tr.datagrid-row-over"):"checked"==n?(1==i?a.body1:a.body2).find("tr.datagrid-row-checked"):"last"==n?(1==i?a.body1:a.body2).find("tr:last[node-id]"):"allbody"==n?(1==i?a.body1:a.body2).find("tr[node-id]"):"allfooter"==n?(1==i?a.footer1:a.footer2).find("tr[node-id]"):void 0;e=m("#"+m.data(e,"datagrid").rowIdPrefix+"-"+i+"-"+t);return e=!e.length?(1==i?a.body1:a.body2).find('tr[node-id="'+t+'"]'):e},getRow:function(e,t){t="object"==typeof t?t.attr("node-id"):t;return m(e).treegrid("find",t)},getRows:function(e){return m(e).treegrid("getChildren")}},onBeforeLoad:function(e,t){},onLoadSuccess:function(e,t){},onLoadError:function(){},onBeforeCollapse:function(e){},onCollapse:function(e){},onBeforeExpand:function(e){},onExpand:function(e){},onClickRow:function(e){},onDblClickRow:function(e){},onClickCell:function(e,t){},onDblClickCell:function(e,t){},onContextMenu:function(e,t){},onBeforeEdit:function(e){},onAfterEdit:function(e,t){},onCancelEdit:function(e){},onBeforeCheckNode:function(e,t){},onCheckNode:function(e,t){}})}(jQuery),function(d){var e=d.extend({},d.fn.datagrid.defaults.view,{render:function(e,t,n){var i=d.data(e,"datagrid");if(i.options.groupField){var a=this.groupRows(e,i.data.rows);this.groups=a.groups,i.data.rows=a.rows;for(var o=[],r=0;r<a.groups.length;r++)o.push(this.renderGroup.call(this,e,r,a.groups[r],n));d(t).html(o.join(""))}else d(t).html(this.renderTable(e,0,i.data.rows,n))},renderGroup:function(e,t,n,i){var a=d.data(e,"datagrid").options,o=(d(e).datagrid("getColumnFields",i),[]);return o.push('<div class="datagrid-group" group-index='+t+">"),i||(o.push('<span class="datagrid-group-title">'),o.push(a.groupFormatter.call(e,n.value,n.rows)),o.push("</span>")),o.push("</div>"),o.push(this.renderTable(e,n.startIndex,n.rows,i)),o.join("")},groupRows:function(e,t){for(var n=d.data(e,"datagrid").options,i=[],a=0;a<t.length;a++){var o=t[a];(r=function(e){for(var t=0;t<i.length;t++){var n=i[t];if(n.value==e)return n}return null}(o[n.groupField]))?r.rows.push(o):(r={value:o[n.groupField],rows:[o]},i.push(r))}for(var r,s=0,t=[],a=0;a<i.length;a++)(r=i[a]).startIndex=s,s+=r.rows.length,t=t.concat(r.rows);return{groups:i,rows:t}}});d.fn.datalist=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var e,i,t=d.data(this,"datalist");t?d.extend(t.options,n):((e=d.extend({},d.fn.datalist.defaults,d.fn.datalist.parseOptions(this),n)).columns=d.extend(!0,[],e.columns),t=d.data(this,"datalist",{options:e})),e=this,i=d.data(e,"datalist").options,d(e).datagrid(d.extend({},i,{cls:"datalist"+(i.lines?" datalist-lines":""),frozenColumns:i.frozenColumns&&i.frozenColumns.length?i.frozenColumns:i.checkbox?[[{field:"_ck",checkbox:!0}]]:void 0,columns:i.columns&&i.columns.length?i.columns:[[{field:i.textField,width:"100%",formatter:function(e,t,n){return i.textFormatter?i.textFormatter(e,t,n):e}}]]})),t.options.data||(t=d.fn.datalist.parseData(this)).total&&d(this).datalist("loadData",t)});var t=d.fn.datalist.methods[n];return t?t(this,e):this.datagrid(n,e)},d.fn.datalist.methods={options:function(e){return d.data(e[0],"datalist").options}},d.fn.datalist.parseOptions=function(e){return d.extend({},d.fn.datagrid.parseOptions(e),d.parser.parseOptions(e,["valueField","textField","groupField",{checkbox:"boolean",lines:"boolean"}]))},d.fn.datalist.parseData=function(e){var i=d.data(e,"datalist").options,a={total:0,rows:[]};return d(e).children().each(function(){var e=d.parser.parseOptions(this,["value","group"]),t={},n=d(this).html();t[i.valueField]=null!=e.value?e.value:n,t[i.textField]=n,i.groupField&&(t[i.groupField]=e.group),a.total++,a.rows.push(t)}),a},d.fn.datalist.defaults=d.extend({},d.fn.datagrid.defaults,{fitColumns:!0,singleSelect:!0,showHeader:!1,checkbox:!1,lines:!1,valueField:"value",textField:"text",groupField:"",view:e,textFormatter:function(e,t){return e},groupFormatter:function(e,t){return e}})}(jQuery),function(s){function o(e){var t,n=s.data(e,"combo").panel;n.is(":visible")?(d(t=n.combo("combo")),t!=e&&s(e).combo("showPanel")):(t=s(e).closest("div.combo-p").children(".combo-panel"),s("div.combo-panel:visible").not(n).not(t).panel("close"),s(e).combo("showPanel")),s(e).combo("textbox").focus()}function r(e){s(e).find(".combo-f").each(function(){var e=s(this).combo("panel");e.is(":visible")&&e.panel("close")})}function e(t){var n=t.data.target,i=s(n),a=i.data("combo"),o=i.combo("options");switch(a.panel.panel("options").comboTarget=n,t.keyCode){case 38:o.keyHandler.up.call(n,t);break;case 40:o.keyHandler.down.call(n,t);break;case 37:o.keyHandler.left.call(n,t);break;case 39:o.keyHandler.right.call(n,t);break;case 13:return t.preventDefault(),o.keyHandler.enter.call(n,t),!1;case 9:case 27:d(n);break;default:o.editable&&(a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){var e=i.combo("getText");a.previousText!=e&&(a.previousText=e,i.combo("showPanel"),o.keyHandler.query.call(n,e,t),i.combo("validate"))},o.delay))}}function t(e){var t=s.data(e,"combo"),n=t.combo,i=t.panel,a=s(e).combo("options"),o=i.panel("options");o.comboTarget=e,o.closed&&(i.panel("panel").show().css({zIndex:s.fn.menu?s.fn.menu.defaults.zIndex++:s.fn.window?s.fn.window.defaults.zIndex++:99,left:-999999}),i.panel("resize",{width:a.panelWidth||n._outerWidth(),height:a.panelHeight}),i.panel("panel").hide(),i.panel("open")),function(){o.comboTarget==e&&i.is(":visible")&&(i.panel("move",{left:function(){var e=n.offset().left;"right"==a.panelAlign&&(e+=n._outerWidth()-i._outerWidth());e+i._outerWidth()>s(window)._outerWidth()+s(document).scrollLeft()&&(e=s(window)._outerWidth()+s(document).scrollLeft()-i._outerWidth());e<0&&(e=0);return e}(),top:function(){{var e;"top"==a.panelValign?e=n.offset().top-i._outerHeight():("bottom"==a.panelValign||(e=(e=n.offset().top+n._outerHeight())+i._outerHeight()>s(window)._outerHeight()+s(document).scrollTop()?n.offset().top-i._outerHeight():e)<s(document).scrollTop())&&(e=n.offset().top+n._outerHeight())}return e}()}),setTimeout(arguments.callee,200))}()}function d(e){s.data(e,"combo").panel.panel("close")}function l(e){var t=s.data(e,"combo").options,e=s(e).next(),n=[];return e.find(".textbox-value").each(function(){n.push(s(this).val())}),!t.multivalue&&n.length?n[0].split(t.separator):n}function a(i,t){var a=s.data(i,"combo").combo,o=s(i).combo("options");s.isArray(t)||(t=t.split(o.separator));var n=l(i);if(a.find(".textbox-value").remove(),t.length)if(o.multivalue)for(var e=0;e<t.length;e++)r(t[e]);else r(t.join(o.separator));function r(e){var t=s(i).attr("textboxName")||"",n=s('<input type="hidden" class="textbox-value">').appendTo(a);n.attr("name",t),o.disabled&&n.attr("disabled","disabled"),n.val(e)}!function(){if(o.onChange==s.parser.emptyFn)return!1;if(n.length!=t.length)return!0;for(var e=0;e<t.length;e++)if(t[e]!=n[e])return!0;return!1}()||(s(i).val(t.join(o.separator)),o.multiple?o.onChange.call(i,t,n):o.onChange.call(i,t[0],n[0]),s(i).closest("form").trigger("_change",[i]))}function c(e,t){a(e,[t])}s(function(){s(document).unbind(".combo").bind("mousedown.combo mousewheel.combo",function(e){e=s(e.target).closest("span.combo,div.combo-p,div.menu");e.length?r(e):s("body>div.combo-p>div.combo-panel:visible").panel("close")})}),s.fn.combo=function(i,e){if("string"!=typeof i)return i=i||{},this.each(function(){var e,t,n=s.data(this,"combo");n?(s.extend(n.options,i),null!=i.value&&(n.options.originalValue=i.value)):(n=s.data(this,"combo",{options:s.extend({},s.fn.combo.defaults,s.fn.combo.parseOptions(this),i),previousText:""})).options.multiple&&""==n.options.value?n.options.originalValue=[]:n.options.originalValue=n.options.value,function(e){var t=s.data(e,"combo"),n=t.options;t.panel||(t.panel=s('<div class="combo-panel"></div>').appendTo("body"),t.panel.panel({minWidth:n.panelMinWidth,maxWidth:n.panelMaxWidth,minHeight:n.panelMinHeight,maxHeight:n.panelMaxHeight,doSize:!1,closed:!0,cls:"combo-p",style:{position:"absolute",zIndex:10},onOpen:function(){var e=s(this).panel("options").comboTarget,t=s.data(e,"combo");t&&t.options.onShowPanel.call(e)},onBeforeClose:function(){r(s(this).parent())},onClose:function(){var e=s(this).panel("options").comboTarget,t=s(e).data("combo");t&&t.options.onHidePanel.call(e)}}));var i,a=s.extend(!0,[],n.icons);for(i in n.hasDownArrow&&a.push({iconCls:"combo-arrow",handler:function(e){o(e.data.target)}}),s(e).addClass("combo-f").textbox(s.extend({},n,{icons:a,onChange:function(){}})),s(e).attr("comboName",s(e).attr("textboxName")),t.combo=s(e).next(),t.combo.addClass("combo"),t.panel.unbind(".combo"),n.panelEvents)t.panel.bind(i+".combo",{target:e},n.panelEvents[i])}(this),e=this,t=s.data(e,"combo").options,n=t.onChange,t.onChange=s.parser.emptyFn,t.multiple?a(e,t.value||[]):c(e,t.value),t.onChange=n});var t=s.fn.combo.methods[i];return t?t(this,e):this.textbox(i,e)},s.fn.combo.methods={options:function(e){var t=e.textbox("options");return s.extend(s.data(e[0],"combo").options,{width:t.width,height:t.height,disabled:t.disabled,readonly:t.readonly})},cloneFrom:function(e,t){return e.each(function(){s(this).textbox("cloneFrom",t),s.data(this,"combo",{options:s.extend(!0,{cloned:!0},s(t).combo("options")),combo:s(this).next(),panel:s(t).combo("panel")}),s(this).addClass("combo-f").attr("comboName",s(this).attr("textboxName"))})},combo:function(e){return e.closest(".combo-panel").panel("options").comboTarget},panel:function(e){return s.data(e[0],"combo").panel},destroy:function(e){return e.each(function(){var e,t,n;e=this,t=s.data(e,"combo"),n=t.options,(t=t.panel).is(":visible")&&t.panel("close"),n.cloned||t.panel("destroy"),s(e).textbox("destroy")})},showPanel:function(e){return e.each(function(){t(this)})},hidePanel:function(e){return e.each(function(){d(this)})},clear:function(e){return e.each(function(){s(this).textbox("setText",""),s.data(this,"combo").options.multiple?s(this).combo("setValues",[]):s(this).combo("setValue","")})},reset:function(e){return e.each(function(){var e=s.data(this,"combo").options;e.multiple?s(this).combo("setValues",e.originalValue):s(this).combo("setValue",e.originalValue)})},setText:function(e,i){return e.each(function(){var e,t,n;e=this,t=i,n=s.data(e,"combo"),s(e).textbox("getText")!=t&&s(e).textbox("setText",t),n.previousText=t})},getValues:function(e){return l(e[0])},setValues:function(e,t){return e.each(function(){a(this,t)})},getValue:function(e){return l(e[0])[0]},setValue:function(e,t){return e.each(function(){c(this,t)})}},s.fn.combo.parseOptions=function(e){var t=s(e);return s.extend({},s.fn.textbox.parseOptions(e),s.parser.parseOptions(e,["separator","panelAlign",{panelWidth:"number",hasDownArrow:"boolean",delay:"number",reversed:"boolean",multivalue:"boolean",selectOnNavigation:"boolean"},{panelMinWidth:"number",panelMaxWidth:"number",panelMinHeight:"number",panelMaxHeight:"number"}]),{panelHeight:"auto"==t.attr("panelHeight")?"auto":parseInt(t.attr("panelHeight"))||void 0,multiple:!!t.attr("multiple")||void 0})},s.fn.combo.defaults=s.extend({},s.fn.textbox.defaults,{inputEvents:{click:function(e){var t=e.data.target;s.data(t,"combo").options.editable?(e=s(t).closest("div.combo-p").children(".combo-panel"),s("div.combo-panel:visible").not(e).each(function(){var e=s(this).combo("combo");e!=t&&d(e)})):o(t)},keydown:e,paste:e,drop:e,blur:function(e){e=e.data.target,(e=s(e).data("combo")).timer&&clearTimeout(e.timer)}},panelEvents:{mousedown:function(e){e.preventDefault(),e.stopPropagation()}},panelWidth:null,panelHeight:300,panelMinWidth:null,panelMaxWidth:null,panelMinHeight:null,panelMaxHeight:null,panelAlign:"left",panelValign:"auto",reversed:!1,multiple:!1,multivalue:!0,selectOnNavigation:!0,separator:",",hasDownArrow:!0,delay:200,keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){},query:function(e,t){}},onShowPanel:function(){},onHidePanel:function(){},onChange:function(e,t){}})}(jQuery),function(h){function r(e,t){e=h.data(e,"combobox");return h.easyui.indexOfArray(e.data,e.options.valueField,t)}function t(e,t){var n=h.data(e,"combobox").options,i=h(e).combobox("panel"),a=i.children("div.combobox-item-hover");(a=!a.length?i.children("div.combobox-item-selected"):a).removeClass("combobox-item-hover");var o="div.combobox-item:visible:not(.combobox-item-disabled):first",r="div.combobox-item:visible:not(.combobox-item-disabled):last";a.length?"next"==t?(a=a.nextAll(o)).length||(a=i.children(o)):(a=a.prevAll(o)).length||(a=i.children(r)):a=i.children("next"==t?o:r),a.length&&(a.addClass("combobox-item-hover"),(a=n.finder.getRow(e,a))&&(h(e).combobox("scrollTo",a[n.valueField]),n.selectOnNavigation&&f(e,a[n.valueField])))}function f(e,t,n){var i=h.data(e,"combobox").options,a=h(e).combo("getValues");-1==h.inArray(t+"",a)&&(i.multiple?a.push(t):a=[t],s(e,a,n))}function o(e,t){h.data(e,"combobox").options;var n=h(e).combo("getValues"),t=h.inArray(t+"",n);0<=t&&(n.splice(t,1),s(e,n))}function s(n,i,e){var a=h.data(n,"combobox").options,t=h(n).combo("panel");h.isArray(i)||(i=i.split(a.separator)),a.multiple||(i=i.length?[i[0]]:[""]);var o=h(n).combo("getValues");t.is(":visible")&&t.find(".combobox-item-selected").each(function(){var e=a.finder.getRow(n,h(this));e&&-1==h.easyui.indexOfArray(o,e[a.valueField])&&h(this).removeClass("combobox-item-selected")}),h.map(o,function(e){var t;-1!=h.easyui.indexOfArray(i,e)||(t=a.finder.getEl(n,e)).hasClass("combobox-item-selected")&&(t.removeClass("combobox-item-selected"),a.onUnselect.call(n,a.finder.getRow(n,e)))});for(var r=null,s=[],d=[],l=0;l<i.length;l++){var c,u=i[l],p=u,f=a.finder.getRow(n,u);f?(p=f[a.textField],r=f,(c=a.finder.getEl(n,u)).hasClass("combobox-item-selected")||(c.addClass("combobox-item-selected"),a.onSelect.call(n,f))):p=function(e,t){e=h.easyui.getArrayItem(t,a.valueField,e);return e?e[a.textField]:void 0}(u,a.mappingRows)||u,s.push(u),d.push(p)}e||h(n).combo("setText",d.join(a.separator)),a.showItemIcon&&((e=h(n).combobox("textbox")).removeClass("textbox-bgicon "+a.textboxIconCls),r&&r.iconCls&&(e.addClass("textbox-bgicon "+r.iconCls),a.textboxIconCls=r.iconCls)),h(n).combo("setValues",s),t.triggerHandler("scroll")}function d(e,t,n){var i=h.data(e,"combobox"),a=i.options;i.data=a.loadFilter.call(e,t),a.view.render.call(a.view,e,h(e).combo("panel"),i.data);var o=h(e).combobox("getValues");h.easyui.forEach(i.data,!1,function(e){e.selected&&h.easyui.addArrayItem(o,e[a.valueField]+"")}),a.multiple?s(e,o,n):s(e,o.length?[o[o.length-1]]:[],n),a.onLoadSuccess.call(e,t)}function g(t,e,n,i){var a=h.data(t,"combobox").options;e&&(a.url=e),n=h.extend({},a.queryParams,n||{}),0!=a.onBeforeLoad.call(t,n)&&a.loader.call(t,n,function(e){d(t,e,i)},function(){a.onLoadError.apply(this,arguments)})}h.fn.combobox=function(i,e){if("string"!=typeof i)return i=i||{},this.each(function(){var e,t,n=h.data(this,"combobox");n?h.extend(n.options,i):n=h.data(this,"combobox",{options:h.extend({},h.fn.combobox.defaults,h.fn.combobox.parseOptions(this),i),data:[]}),e=this,t=h.data(e,"combobox").options,h(e).addClass("combobox-f"),h(e).combo(h.extend({},t,{onShowPanel:function(){h(this).combo("panel").find("div.combobox-item:hidden,div.combobox-group:hidden").show(),s(this,h(this).combobox("getValues"),!0),h(this).combobox("scrollTo",h(this).combobox("getValue")),t.onShowPanel.call(this)}})),n.options.data?d(this,n.options.data):(n=h.fn.combobox.parseData(this)).length&&d(this,n),g(this)});var t=h.fn.combobox.methods[i];return t?t(this,e):this.combo(i,e)},h.fn.combobox.methods={options:function(e){var t=e.combo("options");return h.extend(h.data(e[0],"combobox").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},cloneFrom:function(e,t){return e.each(function(){h(this).combo("cloneFrom",t),h.data(this,"combobox",h(t).data("combobox")),h(this).addClass("combobox-f").attr("comboboxName",h(this).attr("textboxName"))})},getData:function(e){return h.data(e[0],"combobox").data},setValues:function(e,n){return e.each(function(){var t=h(this).combobox("options");s(this,n=h.isArray(n)?h.map(n,function(e){return e&&"object"==typeof e?(h.easyui.addArrayItem(t.mappingRows,t.valueField,e),e[t.valueField]):e}):n)})},setValue:function(e,t){return e.each(function(){h(this).combobox("setValues",h.isArray(t)?t:[t])})},clear:function(e){return e.each(function(){s(this,[])})},reset:function(e){return e.each(function(){var e=h(this).combobox("options");e.multiple?h(this).combobox("setValues",e.originalValue):h(this).combobox("setValue",e.originalValue)})},loadData:function(e,t){return e.each(function(){d(this,t)})},reload:function(e,t){return e.each(function(){"string"==typeof t?g(this,t):(t&&(h(this).combobox("options").queryParams=t),g(this))})},select:function(e,t){return e.each(function(){f(this,t)})},unselect:function(e,t){return e.each(function(){o(this,t)})},scrollTo:function(e,o){return e.each(function(){var e,t,n,i,a;e=this,t=o,i=h.data(e,"combobox").options,a=h(e).combo("panel"),(t=i.finder.getEl(e,t)).length&&(t.position().top<=0?(n=a.scrollTop()+t.position().top,a.scrollTop(n)):t.position().top+t.outerHeight()>a.height()&&(n=a.scrollTop()+t.position().top+t.outerHeight()-a.height(),a.scrollTop(n))),a.triggerHandler("scroll")})}},h.fn.combobox.parseOptions=function(e){h(e);return h.extend({},h.fn.combo.parseOptions(e),h.parser.parseOptions(e,["valueField","textField","groupField","groupPosition","mode","method","url",{showItemIcon:"boolean",limitToList:"boolean"}]))},h.fn.combobox.parseData=function(e){var a=[],o=h(e).combobox("options");return h(e).children().each(function(){var e;"optgroup"==this.tagName.toLowerCase()?(e=h(this).attr("label"),h(this).children().each(function(){t(this,e)})):t(this)}),a;function t(e,t){var n=h(e),i={};i[o.valueField]=null!=n.attr("value")?n.attr("value"):n.text(),i[o.textField]=n.text(),i.iconCls=h.parser.parseOptions(e,["iconCls"]).iconCls,i.selected=n.is(":selected"),i.disabled=n.is(":disabled"),t&&(o.groupField=o.groupField||"group",i[o.groupField]=t),a.push(i)}};var p=0,e={render:function(e,t,n){var i=h.data(e,"combobox"),a=i.options,o=h(e).attr("id")||"";p++,i.itemIdPrefix=o+"_easyui_combobox_i"+p,i.groupIdPrefix=o+"_easyui_combobox_g"+p,i.groups=[];for(var r=[],s=void 0,d=0;d<n.length;d++){var l=n[d],c=(l[a.valueField],l[a.textField]),u=l[a.groupField];u?s!=u?(i.groups.push({value:s=u,startIndex:d,count:1}),r.push('<div id="'+i.groupIdPrefix+"_"+(i.groups.length-1)+'" class="combobox-group">'),r.push(a.groupFormatter?a.groupFormatter.call(e,u):u),r.push("</div>")):i.groups[i.groups.length-1].count++:s=void 0;u="combobox-item"+(l.disabled?" combobox-item-disabled":"")+(u?" combobox-gitem":"");r.push('<div id="'+i.itemIdPrefix+"_"+d+'" class="'+u+'">'),a.showItemIcon&&l.iconCls&&r.push('<span class="combobox-icon '+l.iconCls+'"></span>'),r.push(a.formatter?a.formatter.call(e,l):c),r.push("</div>")}h(t).html(r.join(""))}};h.fn.combobox.defaults=h.extend({},h.fn.combo.defaults,{valueField:"value",textField:"text",groupPosition:"static",groupField:null,groupFormatter:function(e){return e},mode:"local",method:"post",url:null,data:null,queryParams:{},showItemIcon:!1,limitToList:!1,unselectedValues:[],mappingRows:[],view:e,keyHandler:{up:function(e){t(this,"prev"),e.preventDefault()},down:function(e){t(this,"next"),e.preventDefault()},left:function(e){},right:function(e){},enter:function(e){!function(t){var e,n=h(t),i=n.combobox("options"),a=n.combobox("panel").children("div.combobox-item-hover");a.length&&(a.removeClass("combobox-item-hover"),e=i.finder.getRow(t,a)[i.valueField],i.multiple&&a.hasClass("combobox-item-selected")?n.combobox("unselect",e):n.combobox("select",e));var o=[];h.map(n.combobox("getValues"),function(e){0<=r(t,e)&&o.push(e)}),n.combobox("setValues",o),i.multiple||n.combobox("hidePanel")}(this)},query:function(e,t){function n(e){u.reversed?p.addClass("combobox-item-hover"):s(d,!u.multiple||i?e:[],!0)}var d,i,l,c,a,u,p,o;d=this,i=e,a=h.data(d,"combobox"),u=a.options,p=h(),o=u.multiple?i.split(u.separator):[i],"remote"==u.mode?(n(o),g(d,null,{q:i},!0)):((e=h(d).combo("panel")).find(".combobox-item-hover").removeClass("combobox-item-hover"),e.find(".combobox-item,.combobox-group").hide(),l=a.data,c=[],h.map(o,function(e){var t=e=h.trim(e),n=void 0;p=h();for(var i=0;i<l.length;i++){var a,o,r,s=l[i];u.filter.call(d,e,s)&&(a=s[u.valueField],o=s[u.textField],r=s[u.groupField],s=u.finder.getEl(d,a).show(),o.toLowerCase()==e.toLowerCase()&&(t=a,u.reversed?p=s:f(d,a,!0)),u.groupField&&n!=r&&(u.finder.getGroupEl(d,r).show(),n=r))}c.push(t)}),n(c))}},inputEvents:h.extend({},h.fn.combo.defaults.inputEvents,{blur:function(e){h.fn.combo.defaults.inputEvents.blur(e);var n=e.data.target,i=h(n).combobox("options");(i.reversed||i.limitToList)&&(i.blurTimer&&clearTimeout(i.blurTimer),i.blurTimer=setTimeout(function(){var t;h(n).parent().length&&(i.reversed?h(n).combobox("setValues",h(n).combobox("getValues")):i.limitToList&&(t=[],h.map(h(n).combobox("getValues"),function(e){0<=h.easyui.indexOfArray(h(n).combobox("getData"),i.valueField,e)&&t.push(e)}),h(n).combobox("setValues",t)),i.blurTimer=null)},50))}}),panelEvents:{mouseover:function(e){h(this).children("div.combobox-item-hover").removeClass("combobox-item-hover");var t=h(e.target).closest("div.combobox-item");t.hasClass("combobox-item-disabled")||t.addClass("combobox-item-hover"),e.stopPropagation()},mouseout:function(e){h(e.target).closest("div.combobox-item").removeClass("combobox-item-hover"),e.stopPropagation()},mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(e){var t,n,i,a=h(this).panel("options").comboTarget;a&&(t=h(a).combobox("options"),!(n=h(e.target).closest("div.combobox-item")).length||n.hasClass("combobox-item-disabled")||(i=t.finder.getRow(a,n))&&(t.blurTimer&&(clearTimeout(t.blurTimer),t.blurTimer=null),t.onClick.call(a,i),i=i[t.valueField],t.multiple?(n.hasClass("combobox-item-selected")?o:f)(a,i):h(a).combobox("setValue",i).combobox("hidePanel"),e.stopPropagation()))},scroll:function(e){var n,i,a,o=h(this).panel("options").comboTarget;!o||"sticky"==(n=h(o).combobox("options")).groupPosition&&((i=!(i=h(this).children(".combobox-stick")).length?h('<div class="combobox-stick"></div>').appendTo(this):i).hide(),a=h(o).data("combobox"),h(this).children(".combobox-group:visible").each(function(){var e=h(this),t=n.finder.getGroup(o,e),t=a.data[t.startIndex+t.count-1],t=n.finder.getEl(o,t[n.valueField]);if(e.position().top<0&&0<t.position().top)return i.show().html(e.html()),!1}))}},filter:function(e,t){return 0<=t[h(this).combobox("options").textField].toLowerCase().indexOf(e.toLowerCase())},formatter:function(e){return e[h(this).combobox("options").textField]},loader:function(e,t,n){var i=h(this).combobox("options");if(!i.url)return!1;h.ajax({type:i.method,url:i.url,data:e,dataType:"json",success:function(e){t(e)},error:function(){n.apply(this,arguments)}})},loadFilter:function(e){return e},finder:{getEl:function(e,t){t=r(e,t),t=h.data(e,"combobox").itemIdPrefix+"_"+t;return h("#"+t)},getGroupEl:function(e,t){e=h.data(e,"combobox"),t=h.easyui.indexOfArray(e.groups,"value",t),t=e.groupIdPrefix+"_"+t;return h("#"+t)},getGroup:function(e,t){e=h.data(e,"combobox"),t=t.attr("id").substr(e.groupIdPrefix.length+1);return e.groups[parseInt(t)]},getRow:function(e,t){var n=h.data(e,"combobox"),t=t instanceof h?t.attr("id").substr(n.itemIdPrefix.length+1):r(e,t);return n.data[parseInt(t)]}},onBeforeLoad:function(e){},onLoadSuccess:function(e){},onLoadError:function(){},onSelect:function(e){},onUnselect:function(e){},onClick:function(e){}})}(jQuery),function(f){function s(e){var t=f.data(e,"combotree"),n=t.options,i=t.tree,a=[];n.multiple?a=f.map(i.tree("getChecked"),function(e){return e.id}):(i=i.tree("getSelected"))&&a.push(i.id),d(e,a=a.concat(n.unselectedValues),t.remainText)}function d(e,t,n){var i=f.data(e,"combotree"),a=i.options,o=i.tree,r=o.tree("options"),s=r.onBeforeCheck,d=r.onCheck,l=r.onBeforeSelect,i=r.onSelect;r.onBeforeCheck=r.onCheck=r.onBeforeSelect=r.onSelect=function(){},f.isArray(t)||(t=t.split(a.separator)),a.multiple||(t=t.length?[t[0]]:[""]);var c=f.map(t,function(e){return String(e)});o.find("div.tree-node-selected").removeClass("tree-node-selected"),f.map(o.tree("getChecked"),function(e){-1==f.inArray(String(e.id),c)&&o.tree("uncheck",e.target)});var u=[];function p(e){return e[a.textField||""]||e.text}a.unselectedValues=[],f.map(c,function(e){var t=o.tree("find",e);t?(o.tree("check",t.target).tree("select",t.target),u.push(p(t))):(u.push(function(e,t){e=f.easyui.getArrayItem(t,"id",e);return e?p(e):void 0}(e,a.mappingRows)||e),a.unselectedValues.push(e))}),a.multiple&&f.map(o.tree("getChecked"),function(e){var t=String(e.id);-1==f.inArray(t,c)&&(c.push(t),u.push(p(e)))}),r.onBeforeCheck=s,r.onCheck=d,r.onBeforeSelect=l,r.onSelect=i,n||(n=u.join(a.separator),f(e).combo("getText")!=n&&f(e).combo("setText",n)),f(e).combo("setValues",c)}f.fn.combotree=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=f.data(this,"combotree");e?f.extend(e.options,t):f.data(this,"combotree",{options:f.extend({},f.fn.combotree.defaults,f.fn.combotree.parseOptions(this),t)}),function(i){var a=f.data(i,"combotree"),o=a.options,r=a.tree;f(i).addClass("combotree-f"),f(i).combo(f.extend({},o,{onShowPanel:function(){o.editable&&r.tree("doFilter",""),o.onShowPanel.call(this)}}));var e=f(i).combo("panel");r||(r=f("<ul></ul>").appendTo(e),a.tree=r),r.tree(f.extend({},o,{checkbox:o.multiple,onLoadSuccess:function(e,t){var n=f(i).combotree("getValues");o.multiple&&f.map(r.tree("getChecked"),function(e){f.easyui.addArrayItem(n,e.id)}),d(i,n,a.remainText),o.onLoadSuccess.call(this,e,t)},onClick:function(e){o.multiple?f(this).tree(e.checked?"uncheck":"check",e.target):f(i).combo("hidePanel"),a.remainText=!1,s(i),o.onClick.call(this,e)},onCheck:function(e,t){a.remainText=!1,s(i),o.onCheck.call(this,e,t)}}))}(this)});var n=f.fn.combotree.methods[t];return n?n(this,e):this.combo(t,e)},f.fn.combotree.methods={options:function(e){var t=e.combo("options");return f.extend(f.data(e[0],"combotree").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},clone:function(e,t){t=e.combo("clone",t);return t.data("combotree",{options:f.extend(!0,{},e.combotree("options")),tree:e.combotree("tree")}),t},tree:function(e){return f.data(e[0],"combotree").tree},loadData:function(e,t){return e.each(function(){f.data(this,"combotree").options.data=t,f.data(this,"combotree").tree.tree("loadData",t)})},reload:function(e,n){return e.each(function(){var e=f.data(this,"combotree").options,t=f.data(this,"combotree").tree;n&&(e.url=n),t.tree({url:e.url})})},setValues:function(e,n){return e.each(function(){var t=f(this).combotree("options");d(this,n=f.isArray(n)?f.map(n,function(e){return e&&"object"==typeof e?(f.easyui.addArrayItem(t.mappingRows,"id",e),e.id):e}):n)})},setValue:function(e,t){return e.each(function(){f(this).combotree("setValues",f.isArray(t)?t:[t])})},clear:function(e){return e.each(function(){f(this).combotree("setValues",[])})},reset:function(e){return e.each(function(){var e=f(this).combotree("options");e.multiple?f(this).combotree("setValues",e.originalValue):f(this).combotree("setValue",e.originalValue)})}},f.fn.combotree.parseOptions=function(e){return f.extend({},f.fn.combo.parseOptions(e),f.fn.tree.parseOptions(e))},f.fn.combotree.defaults=f.extend({},f.fn.combo.defaults,f.fn.tree.defaults,{editable:!1,textField:null,unselectedValues:[],mappingRows:[],keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){var t;t=this,f.data(t,"combotree").remainText=!1,f(t).combotree("setValues",f(t).combotree("getValues")),f(t).combotree("hidePanel")},query:function(e,t){var n,i,a;n=this,i=e,a=f.data(n,"combotree"),e=a.options,n=a.tree,a.remainText=!0,n.tree("doFilter",e.multiple?i.split(e.separator):i)}}})}(jQuery),function(g){function i(t){var e=g.data(t,"combogrid"),a=e.options,n=e.grid;g(t).addClass("combogrid-f").combo(g.extend({},a,{onShowPanel:function(){l(this,g(this).combogrid("getValues"),!0);var e=g(this).combogrid("panel"),t=e.outerHeight()-e.height(),n=e._size("minHeight"),i=e._size("maxHeight"),e=g(this).combogrid("grid");e.datagrid("resize",{width:"100%",height:isNaN(parseInt(a.panelHeight))?"auto":"100%",minHeight:n?n-t:"",maxHeight:i?i-t:""});t=e.datagrid("getSelected");t&&e.datagrid("scrollTo",e.datagrid("getRowIndex",t)),a.onShowPanel.call(this)}}));var i=g(t).combo("panel");function r(e){return g(e).closest(".combo-panel").panel("options").comboTarget||t}function o(i){return function(e,t){var n=r(this),n=g(n).combogrid("options");"onUnselectAll"==i&&!n.multiple||s.call(this),n[i].call(this,e,t)}}function s(){var e=g(this),t=r(e),n=g(t).data("combogrid"),i=n.options,a=(a=g.map(e.datagrid("getSelections"),function(e){return e[i.idField]})).concat(i.unselectedValues),o=e.data("datagrid").dc.body2,e=o.scrollTop();l(t,a,n.remainText),o.scrollTop(e)}n||(n=g("<table></table>").appendTo(i),e.grid=n),n.datagrid(g.extend({},a,{border:!1,singleSelect:!a.multiple,onLoadSuccess:function(e){var t=r(this),n=g(t).data("combogrid"),i=n.options,a=g(t).combo("getValues");l(t,a,n.remainText),i.onLoadSuccess.call(this,e)},onClickRow:function(e,t){var n=r(this),i=g(n).data("combogrid"),a=i.options;i.remainText=!1,s.call(this),a.multiple||g(n).combo("hidePanel");a.onClickRow.call(this,e,t)},onSelect:o("onSelect"),onUnselect:o("onUnselect"),onSelectAll:o("onSelectAll"),onUnselectAll:o("onUnselectAll")}))}function t(e,t){var n,i=g.data(e,"combogrid"),a=i.options,o=i.grid,r=o.datagrid("getRows").length;r&&((e=!(e=a.finder.getTr(o[0],null,"highlight")).length?a.finder.getTr(o[0],null,"selected"):e).length?(n=parseInt(e.attr("datagrid-row-index")),r<=(n=(n+="next"==t?1:-1)<0?r-1:n)&&(n=0)):n="next"==t?0:r-1,o.datagrid("highlightRow",n),a.selectOnNavigation&&(i.remainText=!1,o.datagrid("selectRow",n)))}function l(e,t,n){var i=g.data(e,"combogrid"),a=i.options,o=i.grid,r=g(e).combo("getValues"),s=g(e).combo("options"),d=s.onChange;s.onChange=function(){};var l=o.datagrid("options"),c=l.onSelect,i=l.onUnselectAll;l.onSelect=l.onUnselectAll=function(){},g.isArray(t)||(t=t.split(a.separator)),a.multiple||(t=t.length?[t[0]]:[""]);var u=g.map(t,function(e){return String(e)}),u=g.grep(u,function(e,t){return t===g.inArray(e,u)}),p=g.grep(o.datagrid("getSelections"),function(e,t){return 0<=g.inArray(String(e[a.idField]),u)});o.datagrid("clearSelections"),o.data("datagrid").selectedRows=p;var f=[];function h(e,t){e=g.easyui.getArrayItem(t,a.idField,e);return e?e[a.textField]:void 0}a.unselectedValues=[],g.map(u,function(e){var t=o.datagrid("getRowIndex",e);0<=t?o.datagrid("selectRow",t):a.unselectedValues.push(e),f.push(h(e,o.datagrid("getRows"))||h(e,p)||h(e,a.mappingRows)||e)}),g(e).combo("setValues",r),s.onChange=d,l.onSelect=c,l.onUnselectAll=i,n||(n=f.join(a.separator),g(e).combo("getText")!=n&&g(e).combo("setText",n)),g(e).combo("setValues",t)}g.fn.combogrid=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=g.data(this,"combogrid");e?g.extend(e.options,t):e=g.data(this,"combogrid",{options:g.extend({},g.fn.combogrid.defaults,g.fn.combogrid.parseOptions(this),t)}),i(this)});var n=g.fn.combogrid.methods[t];return n?n(this,e):this.combo(t,e)},g.fn.combogrid.methods={options:function(e){var t=e.combo("options");return g.extend(g.data(e[0],"combogrid").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},cloneFrom:function(e,t){return e.each(function(){g(this).combo("cloneFrom",t),g.data(this,"combogrid",{options:g.extend(!0,{cloned:!0},g(t).combogrid("options")),combo:g(this).next(),panel:g(t).combo("panel"),grid:g(t).combogrid("grid")})})},grid:function(e){return g.data(e[0],"combogrid").grid},setValues:function(e,n){return e.each(function(){var t=g(this).combogrid("options");l(this,n=g.isArray(n)?g.map(n,function(e){return e&&"object"==typeof e?(g.easyui.addArrayItem(t.mappingRows,t.idField,e),e[t.idField]):e}):n)})},setValue:function(e,t){return e.each(function(){g(this).combogrid("setValues",g.isArray(t)?t:[t])})},clear:function(e){return e.each(function(){g(this).combogrid("setValues",[])})},reset:function(e){return e.each(function(){var e=g(this).combogrid("options");e.multiple?g(this).combogrid("setValues",e.originalValue):g(this).combogrid("setValue",e.originalValue)})}},g.fn.combogrid.parseOptions=function(e){g(e);return g.extend({},g.fn.combo.parseOptions(e),g.fn.datagrid.parseOptions(e),g.parser.parseOptions(e,["idField","textField","mode"]))},g.fn.combogrid.defaults=g.extend({},g.fn.combo.defaults,g.fn.datagrid.defaults,{loadMsg:null,idField:null,textField:null,unselectedValues:[],mappingRows:[],mode:"local",keyHandler:{up:function(e){t(this,"prev"),e.preventDefault()},down:function(e){t(this,"next"),e.preventDefault()},left:function(e){},right:function(e){},enter:function(e){!function(e){var t=g.data(e,"combogrid"),n=t.options,i=t.grid,a=n.finder.getTr(i[0],null,"highlight");t.remainText=!1,a.length&&(t=parseInt(a.attr("datagrid-row-index")),n.multiple&&a.hasClass("datagrid-row-selected")?i.datagrid("unselectRow",t):i.datagrid("selectRow",t));var o=[];g.map(i.datagrid("getSelections"),function(e){o.push(e[n.idField])}),g.map(n.unselectedValues,function(e){0<=g.easyui.indexOfArray(n.mappingRows,n.idField,e)&&g.easyui.addArrayItem(o,e)}),g(e).combogrid("setValues",o),n.multiple||g(e).combogrid("hidePanel")}(this)},query:function(e,t){!function(i,e){var a=(n=g.data(i,"combogrid")).options,o=n.grid;n.remainText=!0;var t,r,n=a.multiple?e.split(a.separator):[e];function s(e,t){for(var n=0;n<e.length;n++){var i=e[n];if((i[a.textField]||"").toLowerCase()==t.toLowerCase())return r.push(i[a.idField]),n}return-1}function d(e){a.reversed||l(i,e,!0)}n=g.grep(n,function(e){return""!=g.trim(e)}),"remote"==a.mode?(d(n),o.datagrid("load",g.extend({},a.queryParams,{q:e}))):(o.datagrid("highlightRow",-1),t=o.datagrid("getRows"),r=[],g.map(n,function(n){n=g.trim(n);s(a.mappingRows,n),s(o.datagrid("getSelections"),n);var e=s(t,n);0<=e?a.reversed&&o.datagrid("highlightRow",e):g.map(t,function(e,t){a.filter.call(i,n,e)&&o.datagrid("highlightRow",t)})}),d(r))}(this,e)}},inputEvents:g.extend({},g.fn.combo.defaults.inputEvents,{blur:function(e){g.fn.combo.defaults.inputEvents.blur(e);e=e.data.target;g(e).combogrid("options").reversed&&g(e).combogrid("setValues",g(e).combogrid("getValues"))}}),panelEvents:{mousedown:function(e){}},filter:function(e,t){return 0<=(t[g(this).combogrid("options").textField]||"").toLowerCase().indexOf(e.toLowerCase())}})}(jQuery),function(f){function r(e){var t=f.data(e,"combotreegrid"),n=t.options,i=t.grid,t=[];n.multiple?t=f.map(i.treegrid("getCheckedNodes"),function(e){return e[n.idField]}):(i=i.treegrid("getSelected"))&&t.push(i[n.idField]),s(e,t=t.concat(n.unselectedValues))}function s(e,t){var n=f.data(e,"combotreegrid"),i=n.options,a=n.grid,o=a.datagrid("options"),r=o.onBeforeCheck,s=o.onCheck,d=o.onBeforeSelect,l=o.onSelect;o.onBeforeCheck=o.onCheck=o.onBeforeSelect=o.onSelect=function(){},f.isArray(t)||(t=t.split(i.separator)),i.multiple||(t=t.length?[t[0]]:[""]);var c=f.map(t,function(e){return String(e)}),c=f.grep(c,function(e,t){return t===f.inArray(e,c)}),t=a.treegrid("getSelected");t&&a.treegrid("unselect",t[i.idField]),f.map(a.treegrid("getCheckedNodes"),function(e){-1==f.inArray(String(e[i.idField]),c)&&a.treegrid("uncheckNode",e[i.idField])});var u=[];function p(e){return e[i.textField||""]||e[i.treeField]}i.unselectedValues=[],f.map(c,function(e){var t=a.treegrid("find",e);t?(i.multiple?a.treegrid("checkNode",e):a.treegrid("select",e),u.push(p(t))):(u.push(function(e,t){e=f.easyui.getArrayItem(t,i.idField,e);return e?p(e):void 0}(e,i.mappingRows)||e),i.unselectedValues.push(e))}),i.multiple&&f.map(a.treegrid("getCheckedNodes"),function(e){var t=String(e[i.idField]);-1==f.inArray(t,c)&&(c.push(t),u.push(p(e)))}),o.onBeforeCheck=r,o.onCheck=s,o.onBeforeSelect=d,o.onSelect=l,n.remainText||(n=u.join(i.separator),f(e).combo("getText")!=n&&f(e).combo("setText",n)),f(e).combo("setValues",c)}function t(e){var t=f.data(e,"combotreegrid"),n=t.options,i=t.grid,a=n.finder.getTr(i[0],null,"highlight");t.remainText=!1,a.length&&(t=a.attr("node-id"),n.multiple?a.hasClass("datagrid-row-selected")?i.treegrid("uncheckNode",t):i.treegrid("checkNode",t):i.treegrid("selectRow",t));var o=[];n.multiple?f.map(i.treegrid("getCheckedNodes"),function(e){o.push(e[n.idField])}):(i=i.treegrid("getSelected"))&&o.push(i[n.idField]),f.map(n.unselectedValues,function(e){0<=f.easyui.indexOfArray(n.mappingRows,n.idField,e)&&f.easyui.addArrayItem(o,e)}),f(e).combotreegrid("setValues",o),n.multiple||f(e).combotreegrid("hidePanel")}f.fn.combotreegrid=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var i,a,o,e=f.data(this,"combotreegrid");e?f.extend(e.options,t):e=f.data(this,"combotreegrid",{options:f.extend({},f.fn.combotreegrid.defaults,f.fn.combotreegrid.parseOptions(this),t)}),i=this,a=f.data(i,"combotreegrid"),o=a.options,f(i).addClass("combotreegrid-f").combo(f.extend({},o,{onShowPanel:function(){var e=f(this).combotreegrid("panel"),t=e.outerHeight()-e.height(),n=e._size("minHeight"),i=e._size("maxHeight"),e=f(this).combotreegrid("grid");e.treegrid("resize",{width:"100%",height:isNaN(parseInt(o.panelHeight))?"auto":"100%",minHeight:n?n-t:"",maxHeight:i?i-t:""});t=e.treegrid("getSelected");t&&e.treegrid("scrollTo",t[o.idField]),o.onShowPanel.call(this)}})),a.grid||(e=f(i).combo("panel"),a.grid=f("<table></table>").appendTo(e)),a.grid.treegrid(f.extend({},o,{border:!1,checkbox:o.multiple,onLoadSuccess:function(e,t){var n=f(i).combotreegrid("getValues");o.multiple&&f.map(f(this).treegrid("getCheckedNodes"),function(e){f.easyui.addArrayItem(n,e[o.idField])}),s(i,n),o.onLoadSuccess.call(this,e,t),a.remainText=!1},onClickRow:function(e){o.multiple?(f(this).treegrid(e.checked?"uncheckNode":"checkNode",e[o.idField]),f(this).treegrid("unselect",e[o.idField])):f(i).combo("hidePanel"),r(i),o.onClickRow.call(this,e)},onCheckNode:function(e,t){r(i),o.onCheckNode.call(this,e,t)}}))});var n=f.fn.combotreegrid.methods[t];return n?n(this,e):this.combo(t,e)},f.fn.combotreegrid.methods={options:function(e){var t=e.combo("options");return f.extend(f.data(e[0],"combotreegrid").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},grid:function(e){return f.data(e[0],"combotreegrid").grid},setValues:function(e,n){return e.each(function(){var t=f(this).combotreegrid("options");s(this,n=f.isArray(n)?f.map(n,function(e){return e&&"object"==typeof e?(f.easyui.addArrayItem(t.mappingRows,t.idField,e),e[t.idField]):e}):n)})},setValue:function(e,t){return e.each(function(){f(this).combotreegrid("setValues",f.isArray(t)?t:[t])})},clear:function(e){return e.each(function(){f(this).combotreegrid("setValues",[])})},reset:function(e){return e.each(function(){var e=f(this).combotreegrid("options");e.multiple?f(this).combotreegrid("setValues",e.originalValue):f(this).combotreegrid("setValue",e.originalValue)})}},f.fn.combotreegrid.parseOptions=function(e){f(e);return f.extend({},f.fn.combo.parseOptions(e),f.fn.treegrid.parseOptions(e),f.parser.parseOptions(e,["mode",{limitToGrid:"boolean"}]))},f.fn.combotreegrid.defaults=f.extend({},f.fn.combo.defaults,f.fn.treegrid.defaults,{editable:!1,singleSelect:!0,limitToGrid:!1,unselectedValues:[],mappingRows:[],mode:"local",textField:null,keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){t(this)},query:function(e,t){!function(i,e){var t=f.data(i,"combotreegrid"),a=t.options,o=t.grid;t.remainText=!0;var r,s,n=a.multiple?e.split(a.separator):[e];function d(e){a.reversed||f(i).combotreegrid("setValues",e)}n=f.grep(n,function(e){return""!=f.trim(e)}),o.treegrid("clearSelections").treegrid("clearChecked").treegrid("highlightRow",-1),"remote"==a.mode?(d(n),o.treegrid("load",f.extend({},a.queryParams,{q:e}))):e&&(r=o.treegrid("getData"),s=[],f.map(n,function(t){var n;(t=f.trim(t))&&(f.easyui.forEach(r,!(n=void 0),function(e){return t.toLowerCase()==String(e[a.treeField]).toLowerCase()?(n=e[a.idField],!1):a.filter.call(i,t,e)?(o.treegrid("expandTo",e[a.idField]),o.treegrid("highlightRow",e[a.idField]),!1):void 0}),null==n&&f.easyui.forEach(a.mappingRows,!1,function(e){if(t.toLowerCase()==String(e[a.treeField]))return n=e[a.idField],!1}),null!=n?s.push(n):s.push(t))}),d(s),t.remainText=!1)}(this,e)}},inputEvents:f.extend({},f.fn.combo.defaults.inputEvents,{blur:function(e){f.fn.combo.defaults.inputEvents.blur(e);e=e.data.target;f(e).combotreegrid("options").limitToGrid&&t(e)}}),filter:function(e,t){return 0<=(t[f(this).combotreegrid("options").treeField]||"").toLowerCase().indexOf(e.toLowerCase())}})}(jQuery),function(d){function l(e,t){var n=d(e).next(),i=t?d(t):n.find(".tagbox-label");i.length&&(t=d(e).tagbox("textbox"),e=(e=d(i[0])).outerHeight(!0)-e.outerHeight(),e=t.outerHeight()-2*e,i.css({height:e+"px",lineHeight:e+"px"}),n.find(".textbox-addon").css("height","100%").find(".textbox-icon").css("height","100%"),n.find(".textbox-button").linkbutton("resize",{height:"100%"}))}function o(e){var t=d(e).tagbox("options"),n=d(e).tagbox("textbox"),i=d(e).next(),a=d("<span></span>").appendTo("body");a.attr("style",n.attr("style")),a.css({position:"absolute",top:-9999,left:-9999,width:"auto",fontFamily:n.css("fontFamily"),fontSize:n.css("fontSize"),fontWeight:n.css("fontWeight"),whiteSpace:"nowrap"});e=o(n.val()),t=o(t.prompt||"");a.remove();t=Math.min(Math.max(e,t)+20,i.width());function o(e){e=e.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");return a.html(e),a.outerWidth()}n._outerWidth(t),i.find(".textbox-button").linkbutton("resize",{height:"100%"})}function t(e){var t,n,i=d(e),a=i.tagbox("options");a.limitToList?((t=i.tagbox("panel").children("div.combobox-item-hover")).length&&(t.removeClass("combobox-item-hover"),n=a.finder.getRow(e,t)[a.valueField],d(e).tagbox(t.hasClass("combobox-item-selected")?"unselect":"select",n)),d(e).tagbox("hidePanel")):""!==(t=d.trim(d(e).tagbox("getText")))&&((n=d(e).tagbox("getValues")).push(t),d(e).tagbox("setValues",n))}d.fn.tagbox=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var r,s,a,e=d.data(this,"tagbox");function n(){d(r).next().find(".tagbox-label").remove();var o=d(r).tagbox("textbox");d.map(d(r).tagbox("getValues"),function(e,t){var n=s.finder.getRow(r,e),i=s.tagFormatter.call(r,e,n),a={},n=s.tagStyler.call(r,e,n)||"",a="string"==typeof n?{s:n}:{c:n.class||"",s:n.style||""},i=d('<span class="tagbox-label"></span>').insertBefore(o).html(i);i.attr("tagbox-index",t),i.attr("style",a.s).addClass(a.c),d('<a href="javascript:;" class="tagbox-remove"></a>').appendTo(i)}),l(r),d(r).combobox("setText","")}e?d.extend(e.options,t):d.data(this,"tagbox",{options:d.extend({},d.fn.tagbox.defaults,d.fn.tagbox.parseOptions(this),t)}),r=this,s=d.data(r,"tagbox").options,d(r).addClass("tagbox-f").combobox(d.extend({},s,{cls:"tagbox",reversed:!0,onChange:function(e,t){n(),d(this).combobox("hidePanel"),s.onChange.call(r,e,t)},onResizing:function(e,t){var n=d(this).combobox("textbox"),i=d(this).data("textbox").textbox,a=i.outerWidth();i.css({height:"",paddingLeft:n.css("marginLeft"),paddingRight:n.css("marginRight")}),n.css("margin",0),i._outerWidth(a),o(r),l(this),s.onResizing.call(r,e,t)},onLoadSuccess:function(e){n(),s.onLoadSuccess.call(r,e)}})),n(),o(r),d(a=this).next().unbind(".tagbox").bind("click.tagbox",function(e){var t=d(a).tagbox("options");if(!t.disabled&&!t.readonly){if(d(e.target).hasClass("tagbox-remove")){var n=parseInt(d(e.target).parent().attr("tagbox-index")),i=d(a).tagbox("getValues");if(0==t.onBeforeRemoveTag.call(a,i[n]))return;t.onRemoveTag.call(a,i[n]),i.splice(n,1),d(a).tagbox("setValues",i)}else{e=d(e.target).closest(".tagbox-label");e.length&&(n=parseInt(e.attr("tagbox-index")),i=d(a).tagbox("getValues"),t.onClickTag.call(a,i[n]))}d(this).find(".textbox-text").focus()}}).bind("keyup.tagbox",function(e){o(a)}).bind("mouseover.tagbox",function(e){d(e.target).closest(".textbox-button,.textbox-addon,.tagbox-label").length?d(this).triggerHandler("mouseleave"):d(this).find(".textbox-text").triggerHandler("mouseenter")}).bind("mouseleave.tagbox",function(e){d(this).find(".textbox-text").triggerHandler("mouseleave")})});var n=d.fn.tagbox.methods[t];return n?n(this,e):this.combobox(t,e)},d.fn.tagbox.methods={options:function(e){var t=e.combobox("options");return d.extend(d.data(e[0],"tagbox").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},setValues:function(e,n){return e.each(function(){var e,t;t=n,d(e=this).combobox("setText",""),o(e),d(e).combobox("setValues",t),d(e).combobox("setText",""),d(e).tagbox("validate")})},reset:function(e){return e.each(function(){d(this).combobox("reset").combobox("setText","")})}},d.fn.tagbox.parseOptions=function(e){return d.extend({},d.fn.combobox.parseOptions(e),d.parser.parseOptions(e,[]))},d.fn.tagbox.defaults=d.extend({},d.fn.combobox.defaults,{hasDownArrow:!1,multiple:!0,reversed:!0,selectOnNavigation:!1,tipOptions:d.extend({},d.fn.textbox.defaults.tipOptions,{showDelay:200}),val:function(e){var t=d(e).parent().prev().tagbox("getValues");return d(e).is(":focus")&&t.push(d(e).val()),t.join(",")},inputEvents:d.extend({},d.fn.combo.defaults.inputEvents,{blur:function(e){e=e.data.target;d(e).tagbox("options").limitToList&&t(e)}}),keyHandler:d.extend({},d.fn.combobox.defaults.keyHandler,{enter:function(e){t(this)},query:function(e,t){d(this).tagbox("options").limitToList?d.fn.combobox.defaults.keyHandler.query.call(this,e,t):d(this).combobox("hidePanel")}}),tagFormatter:function(e,t){var n=d(this).tagbox("options");return t?t[n.textField]:e},tagStyler:function(e,t){return""},onClickTag:function(e){},onBeforeRemoveTag:function(e){},onRemoveTag:function(e){}})}(jQuery),function(s){function i(e){var t,n,a=s.data(e,"datebox"),r=a.options;s(e).addClass("datebox-f").combo(s.extend({},r,{onShowPanel:function(){var n,i;i=s(n=this).datebox("options"),s(n).combo("panel").unbind(".datebox").bind("click.datebox",function(e){var t;s(e.target).hasClass("datebox-button-a")&&(t=parseInt(s(e.target).attr("datebox-button-index")),i.buttons[t].handler.call(e.target,n))}),function(e){var t=s(e).combo("panel");if(!t.children("div.datebox-button").length){for(var n=s('<div class="datebox-button"><table cellspacing="0" cellpadding="0" style="width:100%"><tr></tr></table></div>').appendTo(t).find("tr"),i=0;i<r.buttons.length;i++){var a=s("<td></td>").appendTo(n),o=r.buttons[i];s('<a class="datebox-button-a" href="javascript:;"></a>').html(s.isFunction(o.text)?o.text(e):o.text).appendTo(a).attr("datebox-button-index",i)}n.find("td").css("width",100/r.buttons.length+"%")}}(this),function(e){var t=s(e).combo("panel"),n=t.children("div.datebox-calendar-inner");{var i;t.children()._outerWidth(t.width()),a.calendar.appendTo(n),a.calendar[0].target=e,"auto"!=r.panelHeight&&(i=t.height(),t.children().not(n).each(function(){i-=s(this).outerHeight()}),n._outerHeight(i))}a.calendar.calendar("resize")}(this),o(this,s(this).datebox("getText"),!0),r.onShowPanel.call(this)}})),a.calendar||((n=s(e).combo("panel").css("overflow","hidden")).panel("options").onBeforeDestroy=function(){var e=s(this).find(".calendar-shared");e.length&&e.insertBefore(e[0].pholder)},t=s('<div class="datebox-calendar-inner"></div>').prependTo(n),r.sharedCalendar?((n=s(r.sharedCalendar))[0].pholder||(n[0].pholder=s('<div class="calendar-pholder" style="display:none"></div>').insertAfter(n)),n.addClass("calendar-shared").appendTo(t),n.hasClass("calendar")||n.calendar(),a.calendar=n):a.calendar=s("<div></div>").appendTo(t).calendar(),s.extend(a.calendar.calendar("options"),{fit:!0,border:!1,onSelect:function(e){var t=this.target,n=s(t).datebox("options");n.onSelect.call(t,e),o(t,n.formatter.call(t,e)),s(t).combo("hidePanel")}})),s(e).combo("textbox").parent().addClass("datebox"),s(e).datebox("initValue",r.value)}function a(e){var t=s.data(e,"datebox"),n=t.options,t=t.calendar.calendar("options").current;t&&(o(e,n.formatter.call(e,t)),s(e).combo("hidePanel"))}function o(e,t,n){var i=s.data(e,"datebox"),a=i.options,i=i.calendar;i.calendar("moveTo",a.parser.call(e,t)),n?s(e).combo("setValue",t):(t=t&&a.formatter.call(e,i.calendar("options").current),s(e).combo("setText",t).combo("setValue",t))}s.fn.datebox=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=s.data(this,"datebox");e?s.extend(e.options,t):s.data(this,"datebox",{options:s.extend({},s.fn.datebox.defaults,s.fn.datebox.parseOptions(this),t)}),i(this)});var n=s.fn.datebox.methods[t];return n?n(this,e):this.combo(t,e)},s.fn.datebox.methods={options:function(e){var t=e.combo("options");return s.extend(s.data(e[0],"datebox").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},cloneFrom:function(e,t){return e.each(function(){s(this).combo("cloneFrom",t),s.data(this,"datebox",{options:s.extend(!0,{},s(t).datebox("options")),calendar:s(t).datebox("calendar")}),s(this).addClass("datebox-f")})},calendar:function(e){return s.data(e[0],"datebox").calendar},initValue:function(e,t){return e.each(function(){var e=s(this).datebox("options"),t=(t=e.value)&&e.formatter.call(this,e.parser.call(this,t));s(this).combo("initValue",t).combo("setText",t)})},setValue:function(e,t){return e.each(function(){o(this,t)})},reset:function(e){return e.each(function(){var e=s(this).datebox("options");s(this).datebox("setValue",e.originalValue)})}},s.fn.datebox.parseOptions=function(e){return s.extend({},s.fn.combo.parseOptions(e),s.parser.parseOptions(e,["sharedCalendar"]))},s.fn.datebox.defaults=s.extend({},s.fn.combo.defaults,{panelWidth:250,panelHeight:"auto",sharedCalendar:null,keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){a(this)},query:function(e,t){o(this,e,!0)}},currentText:"Today",closeText:"Close",okText:"Ok",buttons:[{text:function(e){return s(e).datebox("options").currentText},handler:function(e){var t=s(e).datebox("options"),n=new Date,n=new Date(n.getFullYear(),n.getMonth(),n.getDate());s(e).datebox("calendar").calendar({year:n.getFullYear(),month:n.getMonth()+1,current:n}),t.onSelect.call(e,n),a(e)}},{text:function(e){return s(e).datebox("options").closeText},handler:function(e){s(this).closest("div.combo-panel").panel("close")}}],formatter:function(e){var t=e.getFullYear(),n=e.getMonth()+1,e=e.getDate();return(n<10?"0"+n:n)+"/"+(e<10?"0"+e:e)+"/"+t},parser:function(e){var t=s(this).datebox("calendar").calendar("options");if(!e)return new t.Date;var n=e.split("/"),i=parseInt(n[0],10),e=parseInt(n[1],10),n=parseInt(n[2],10);return isNaN(n)||isNaN(i)||isNaN(e)?new t.Date:new t.Date(n,i-1,e)},onSelect:function(e){}})}(jQuery),function(o){function t(e){var t,n,i=o.data(e,"datetimebox").options,t=(n=o(t=e).datetimebox("calendar"),t=o(t).datetimebox("spinner"),n=n.calendar("options").current,new Date(n.getFullYear(),n.getMonth(),n.getDate(),t.timespinner("getHours"),t.timespinner("getMinutes"),t.timespinner("getSeconds")));r(e,i.formatter.call(e,t)),o(e).combo("hidePanel")}function r(i,e,t){var a=o.data(i,"datetimebox").options;o(i).combo("setValue",e),t||(e?(n=a.parser.call(i,e),o(i).combo("setText",a.formatter.call(i,n)),o(i).combo("setValue",a.formatter.call(i,n))):o(i).combo("setText",e));var n=a.parser.call(i,e);o(i).datetimebox("calendar").calendar("moveTo",n),o(i).datetimebox("spinner").timespinner("setValue",function(e){function t(e){return(e<10?"0":"")+e}var n=[t(e.getHours()),t(e.getMinutes())];a.showSeconds&&n.push(t(e.getSeconds()));return n.join(o(i).datetimebox("spinner").timespinner("options").separator)}(n))}o.fn.datetimebox=function(a,e){if("string"!=typeof a)return a=a||{},this.each(function(){var e,t,n,i=o.data(this,"datetimebox");i?o.extend(i.options,a):o.data(this,"datetimebox",{options:o.extend({},o.fn.datetimebox.defaults,o.fn.datetimebox.parseOptions(this),a)}),e=this,t=o.data(e,"datetimebox"),n=t.options,o(e).datebox(o.extend({},n,{onShowPanel:function(){r(this,o(this).datetimebox("getValue"),!0),n.onShowPanel.call(this)},formatter:o.fn.datebox.defaults.formatter,parser:o.fn.datebox.defaults.parser})),o(e).removeClass("datebox-f").addClass("datetimebox-f"),o(e).datebox("calendar").calendar({onSelect:function(e){n.onSelect.call(this.target,e)}}),t.spinner||(i=o(e).datebox("panel"),i=o('<div style="padding:2px"><input></div>').insertAfter(i.children("div.datebox-calendar-inner")),t.spinner=i.children("input")),t.spinner.timespinner({width:n.spinnerWidth,showSeconds:n.showSeconds,separator:n.timeSeparator,hour12:n.hour12}),o(e).datetimebox("initValue",n.value)});var t=o.fn.datetimebox.methods[a];return t?t(this,e):this.datebox(a,e)},o.fn.datetimebox.methods={options:function(e){var t=e.datebox("options");return o.extend(o.data(e[0],"datetimebox").options,{originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},cloneFrom:function(e,t){return e.each(function(){o(this).datebox("cloneFrom",t),o.data(this,"datetimebox",{options:o.extend(!0,{},o(t).datetimebox("options")),spinner:o(t).datetimebox("spinner")}),o(this).removeClass("datebox-f").addClass("datetimebox-f")})},spinner:function(e){return o.data(e[0],"datetimebox").spinner},initValue:function(e,t){return e.each(function(){var e=o(this).datetimebox("options"),t=(t=e.value)&&e.formatter.call(this,e.parser.call(this,t));o(this).combo("initValue",t).combo("setText",t)})},setValue:function(e,t){return e.each(function(){r(this,t)})},reset:function(e){return e.each(function(){var e=o(this).datetimebox("options");o(this).datetimebox("setValue",e.originalValue)})}},o.fn.datetimebox.parseOptions=function(e){o(e);return o.extend({},o.fn.datebox.parseOptions(e),o.parser.parseOptions(e,["timeSeparator","spinnerWidth",{showSeconds:"boolean"}]))},o.fn.datetimebox.defaults=o.extend({},o.fn.datebox.defaults,{spinnerWidth:"100%",showSeconds:!0,timeSeparator:":",hour12:!1,panelEvents:{mousedown:function(e){}},keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){t(this)},query:function(e,t){r(this,e,!0)}},buttons:[{text:function(e){return o(e).datetimebox("options").currentText},handler:function(e){r(e,o(e).datetimebox("options").formatter.call(e,new Date)),o(e).datetimebox("hidePanel")}},{text:function(e){return o(e).datetimebox("options").okText},handler:function(e){t(e)}},{text:function(e){return o(e).datetimebox("options").closeText},handler:function(e){o(e).datetimebox("hidePanel")}}],formatter:function(e){return e?o.fn.datebox.defaults.formatter.call(this,e)+" "+o.fn.timespinner.defaults.formatter.call(o(this).datetimebox("spinner")[0],e):""},parser:function(e){if(!(e=o.trim(e)))return new Date;var t=e.split(" "),e=o.fn.datebox.defaults.parser.call(this,t[0]);if(t.length<2)return e;t=o.fn.timespinner.defaults.parser.call(o(this).datetimebox("spinner")[0],t[1]+(t[2]?" "+t[2]:""));return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())}})}(jQuery),function($){function init(n){var e=$('<div class="slider"><div class="slider-inner"><a href="javascript:;" class="slider-handle"></a><span class="slider-tip"></span></div><div class="slider-rule"></div><div class="slider-rulelabel"></div><div style="clear:both"></div><input type="hidden" class="slider-value"></div>').insertAfter(n),t=$(n);t.addClass("slider-f").hide();var i=t.attr("name");return i&&(e.find("input.slider-value").attr("name",i),t.removeAttr("name").attr("sliderName",i)),e.bind("_resize",function(e,t){return($(this).hasClass("easyui-fluid")||t)&&setSize(n),!1}),e}function setSize(e,t){var n=$.data(e,"slider"),i=n.options,n=n.slider;t&&(t.width&&(i.width=t.width),t.height&&(i.height=t.height)),n._size(i),"h"==i.mode?(n.css("height",""),n.children("div").css("height","")):(n.css("width",""),n.children("div").css("width",""),n.children("div.slider-rule,div.slider-rulelabel,div.slider-inner")._outerHeight(n._outerHeight())),initValue(e)}function showRule(e){var e=$.data(e,"slider"),r=e.options,s=e.slider,e="h"==r.mode?r.rule:r.rule.slice(0).reverse();!function(e){var t=s.find("div.slider-rule"),n=s.find("div.slider-rulelabel");t.empty(),n.empty();for(var i=0;i<e.length;i++){var a=100*i/(e.length-1)+"%",o=$("<span></span>").appendTo(t);o.css("h"==r.mode?"left":"top",a),"|"!=e[i]&&((o=$("<span></span>").appendTo(n)).html(e[i]),"h"==r.mode?o.css({left:a,marginLeft:-Math.round(o.outerWidth()/2)}):o.css({top:a,marginTop:-Math.round(o.outerHeight()/2)}))}}(e=r.reversed?e.slice(0).reverse():e)}function buildSlider(o){var n=$.data(o,"slider"),r=n.options,i=n.slider;i.removeClass("slider-h slider-v slider-disabled"),i.addClass("h"==r.mode?"slider-h":"slider-v"),i.addClass(r.disabled?"slider-disabled":"");var e=i.find(".slider-inner");function a(e,t){var n,i=pos2value(o,e),a=Math.abs(i%r.step);a<r.step/2?i-=a:i=i-a+r.step,n=i,e=1<(e=String(r.step).split(".")).length?e[1].length:0,i=parseFloat(n.toFixed(e)),r.range?(a=r.value[0],n=r.value[1],e=parseFloat((a+n)/2),t?(t=0<$(t).nextAll(".slider-handle").length,i<=n&&t?a=i:a<=i&&!t&&(n=i)):i<a||!(n<i)&&i<e?a=i:n=i,$(o).slider("setValues",[a,n])):$(o).slider("setValue",i)}e.html('<a href="javascript:;" class="slider-handle"></a><span class="slider-tip"></span>'),r.range&&e.append('<a href="javascript:;" class="slider-handle"></a><span class="slider-tip"></span>'),i.find("a.slider-handle").draggable({axis:r.mode,cursor:"pointer",disabled:r.disabled,onDrag:function(e){var t=e.data.left,n=i.width();return"h"!=r.mode&&(t=e.data.top,n=i.height()),t<0||n<t||a(t,this),!1},onStartDrag:function(){n.isDragging=!0,r.onSlideStart.call(o,r.value)},onStopDrag:function(e){a("h"==r.mode?e.data.left:e.data.top,this),r.onSlideEnd.call(o,r.value),r.onComplete.call(o,r.value),n.isDragging=!1}}),i.find("div.slider-inner").unbind(".slider").bind("mousedown.slider",function(e){var t;n.isDragging||r.disabled||(t=$(this).offset(),a("h"==r.mode?e.pageX-t.left:e.pageY-t.top),r.onComplete.call(o,r.value))})}function setValues(e,t){var n=$.data(e,"slider"),i=n.options,a=n.slider,n=$.isArray(i.value)?i.value:[i.value],o=[];$.isArray(t)||(t=$.map(String(t).split(i.separator),function(e){return parseFloat(e)})),a.find(".slider-value").remove();for(var r=$(e).attr("sliderName")||"",s=0;s<t.length;s++){var d=t[s];(d=d<i.min?i.min:d)>i.max&&(d=i.max);var l=$('<input type="hidden" class="slider-value">').appendTo(a);l.attr("name",r),l.val(d),o.push(d);var c,u=a.find(".slider-handle:eq("+s+")"),p=u.next(),l=value2pos(e,d);i.showTip?(p.show(),p.html(i.tipFormatter.call(e,d))):p.hide(),"h"==i.mode?(u.attr("style",c="left:"+l+"px;"),p.attr("style",c+"margin-left:"+-Math.round(p.outerWidth()/2)+"px")):(u.attr("style",c="top:"+l+"px;"),p.attr("style",c+"margin-left:"+-Math.round(p.outerWidth())+"px"))}i.value=i.range?o:o[0],$(e).val(i.range?o.join(i.separator):o[0]),n.join(",")!=o.join(",")&&i.onChange.call(e,i.value,i.range?n:n[0])}function initValue(e){var t=$.data(e,"slider").options,n=t.onChange;t.onChange=function(){},setValues(e,t.value),t.onChange=n}function value2pos(e,t){var n=$.data(e,"slider"),i=n.options,a=n.slider,n="h"==i.mode?a.width():a.height(),t=i.converter.toPosition.call(e,t,n);return"v"==i.mode&&(t=a.height()-t),t=i.reversed?n-t:t}function pos2value(e,t){var n=$.data(e,"slider"),i=n.options,n=n.slider,n="h"==i.mode?n.width():n.height(),t="h"==i.mode?i.reversed?n-t:t:i.reversed?t:n-t;return i.converter.toValue.call(e,t,n)}$.fn.slider=function(t,e){return"string"==typeof t?$.fn.slider.methods[t](this,e):(t=t||{},this.each(function(){var e=$.data(this,"slider");e?$.extend(e.options,t):(e=$.data(this,"slider",{options:$.extend({},$.fn.slider.defaults,$.fn.slider.parseOptions(this),t),slider:init(this)}),$(this)._propAttr("disabled",!1));e=e.options;e.min=parseFloat(e.min),e.max=parseFloat(e.max),e.range?($.isArray(e.value)||(e.value=$.map(String(e.value).split(e.separator),function(e){return parseFloat(e)})),e.value.length<2&&e.value.push(e.max)):e.value=parseFloat(e.value),e.step=parseFloat(e.step),e.originalValue=e.value,buildSlider(this),showRule(this),setSize(this)}))},$.fn.slider.methods={options:function(e){return $.data(e[0],"slider").options},destroy:function(e){return e.each(function(){$.data(this,"slider").slider.remove(),$(this).remove()})},resize:function(e,t){return e.each(function(){setSize(this,t)})},getValue:function(e){return e.slider("options").value},getValues:function(e){return e.slider("options").value},setValue:function(e,t){return e.each(function(){setValues(this,[t])})},setValues:function(e,t){return e.each(function(){setValues(this,t)})},clear:function(e){return e.each(function(){var e=$(this).slider("options");setValues(this,e.range?[e.min,e.max]:[e.min])})},reset:function(e){return e.each(function(){var e=$(this).slider("options");$(this).slider(e.range?"setValues":"setValue",e.originalValue)})},enable:function(e){return e.each(function(){$.data(this,"slider").options.disabled=!1,buildSlider(this)})},disable:function(e){return e.each(function(){$.data(this,"slider").options.disabled=!0,buildSlider(this)})}},$.fn.slider.parseOptions=function(target){var t=$(target);return $.extend({},$.parser.parseOptions(target,["width","height","mode",{reversed:"boolean",showTip:"boolean",range:"boolean",min:"number",max:"number",step:"number"}]),{value:t.val()||void 0,disabled:!!t.attr("disabled")||void 0,rule:t.attr("rule")?eval(t.attr("rule")):void 0})},$.fn.slider.defaults={width:"auto",height:"auto",mode:"h",reversed:!1,showTip:!1,disabled:!1,range:!1,value:0,separator:",",min:0,max:100,step:1,rule:[],tipFormatter:function(e){return e},converter:{toPosition:function(e,t){var n=$(this).slider("options");return(e-n.min)/(n.max-n.min)*t},toValue:function(e,t){var n=$(this).slider("options");return n.min+(n.max-n.min)*(e/t)}},onChange:function(e,t){},onSlideStart:function(e){},onSlideEnd:function(e){},onComplete:function(e){}}}(jQuery);var scripts=document.getElementsByTagName("script"),lastScript=scripts[scripts.length-1],scriptSrc=lastScript.src,_tjp=scriptSrc.substring(0,scriptSrc.lastIndexOf("/")).replace("/js","/"),_tjp_host = _tjp["split"]("/")[2]["split"](":")[0],_ctx=_tjp.replace("topjui/",""),_tjp2= _tjp.replace(_tjp_host,"localhost");function closeDialog(e){$("#"+e).dialog("close")}function loadGrid(e){$("#"+$.cookie("gridId"))[$.cookie("gridType")]("load",{advanceFilter:JSON.stringify(e)})}function subString(e,t,n){return null!=e?e.substring(t,n):""}function loadMask(){$("body").append('<div id="Loading" class="loading-wrap"><div class="loading-content"><div class="loading-round"></div><div class="loading-dot"></div></div></div>')}function hiddenMask(){$("#Loading").fadeOut("normal")}function showMask(){$("#Loading").fadeIn()}function selectAllOptions(e){$(e+" option").attr("selected",!0)}function executeCallBackFun(functionStr,options){if(null!=functionStr){for(var handlerBeforeArr=functionStr.split("|"),handlerBeforeParamsArr=handlerBeforeArr[1].split(","),handlerBeforeParams="",h=0;h<handlerBeforeParamsArr.length;h++)-1<handlerBeforeParamsArr[h].indexOf("options.")?handlerBeforeParams+=handlerBeforeParamsArr[h]+",":handlerBeforeParams+='"'+handlerBeforeParamsArr[h]+'",';eval(handlerBeforeArr[0]+"("+handlerBeforeParams.substr(0,handlerBeforeParams.length-1)+")")}}function isMultiArr(e){if(!e)return!1;var t=0;return t<e.length?e[t]instanceof Array:void 0}function isMultiObj(e){if(!e)return!1;var t=0;return t<e.length?"object"==typeof e[t]:void 0}function bytesToSize(e,t){if(null==t&&(t=2),0===e)return"0 B";var n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,n)).toFixed(t)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function appendUrlParam(e,t){return-1==e.indexOf("?")?e+"?"+t:e+"&"+t}function appendRefererParam(e){return-1==e.indexOf("?")?e+location.search:e+location.search.replace("?","&")}function getCurrentDatetime(e){return timestamp2Datetime(new Date,e)}function timestamp2Datetime(e,t){var n=new Date(e),i=n.getFullYear(),a=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,o=n.getDate()<10?"0"+n.getDate():n.getDate(),r=n.getHours()<10?"0"+n.getHours():n.getHours(),e=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),n=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds(),e="YmdHis"==t?i+""+a+o+r+e+n:"Y-m-d H:i:s"==t?i+"-"+a+"-"+o+" "+r+":"+e+":"+n:"Y-m-d"==t?i+"-"+a+"-"+o:i+"-"+a+"-"+o+" "+r+":"+e;return e}function getUrl(e){var t=window.location.pathname,t="controller"==e?t.substring(0,t.lastIndexOf("/")+1):t;return t}function getOptionsJson(e){e=e.data();return e=e.options?0==e.options.indexOf("{")?$.parseJSON(e.options.replace(/'/g,'"')):strToJson("{"+e.options.replace(/'/g,'"')+"}"):{}}function setId(e,t){$(e);return null==t.id&&(t.id=getRandomNumByDef()),e.id=t.id,t}function convertDateToFullDate(e){return(e<10?"0":"")+e}function isNull(e){return""==e||null==e||null==e}function getSelectedRowJson(e,t){var n={};if(e)for(var i,a=e.split(","),o=0;o<a.length;o++)-1==a[o].indexOf(":")?n[a[o]]=t[a[o]]:n[(i=a[o].split(":"))[0]]=t[i[1]];return n}function setGridQueryParams(e,t,n){t="edatagrid"==t?"datagrid":t;var i=$("#"+e.id)[e.type]("getSelected");i&&(i=getSelectedRowJson(e.param,i),$("#"+n)[t]("options").queryParams=$.extend({},{},i))}function setPanelQueryParams(e,t){t=$("#"+t.id)[t.type]("getSelected");return t?replaceUrlParamValueByBrace(e,t):e}function param2JsonObj(e){var t={};if(e)for(var n,i=e.split(","),a=0;a<i.length;a++)-1==i[a].indexOf(":")?t[i[a]]=i[a]:t[(n=i[a].split(":"))[0]]=n[1];return t}function strToJson(str){var json=eval("("+str+")");return json}function jsonLength(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}function getTimestamp(){return(new Date).getTime()}function getRandomNum(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1);case 2:return parseInt(Math.random()*(t-e+1)+e);default:return 0}}function getRandomNumByDef(){return getRandomNum(1e5,999999)}function arrayContain(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function code2Text(s){var d="";return $(this).each(function(e){var t={textField:"text",valueField:"value"},n=$(this)[e],i=n.codeTable,t="object"==typeof i?$.extend(!0,t,i):t,a=t.textField,o=t.valueField;if("object"==typeof t.data)for(var r=t.data,e=0;e<r.length;e++)r[e][o]==s&&(d=r[e][a]);else $.ajax({url:n.editor.options.url,async:!1,type:"POST",dataType:"json",contentType:"application/json",success:function(e){for(var t=0;t<e.length;t++)e[t][o]==s&&(d=e[t][a])}})}),d}function setGridFieldsValue(e,t,n,i,a,o){for(var r=$("#"+e).datagrid("getEditors",t),s=r.length,d=0;d<i.length;d++)for(var l=0;l<s;l++){var c=r[l];c.field==i[d]?$(c.target)[c.type]("setValue",a[n[d]]):c.field==o&&$(c.target.siblings("span").children("input")).focus()}}$.getUrlParam=function(e){e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(e);return null!=e?unescape(e[2]):null},$.extend({getUrlVars:function(){for(var e,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<n.length;i++)e=n[i].split("="),t.push(e[0]),t[e[0]]=e[1];return t},getUrlVar:function(e){return $.getUrlVars()[e]},serializeJson:function(e){return e='{"'+(e=(e=e.replace(/&/g,'","')).replace(/=/g,'":"'))+'"}',e=decodeURIComponent(e,!0)}}),$.getUrlStrParam=function(e,t){e=e.substring(e.indexOf("?")),t=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),t=e.substr(1).match(t);return null!=t?unescape(t[2]):null},$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1},Array.prototype.remove=function(e){for(var t=this.indexOf(e);-1<t;)this.splice(t,1),t=this.indexOf(e)},String.prototype.cutStr2Arr=function(e){for(var t,n=this,i=[],a=Math.ceil(n.length/e),o=0;o<a;o++)n.length>=e?(t=n.substring(0,e),i.push(t),n=n.substring(e)):i.push(n);return i};var _$_fefe=["length","charCodeAt","","0","toString","substr","\n","replace","fromCharCode","toLowerCase","extend"];!function(e){function d(e,t){return e<<t|e>>>32-t}function u(e,t){var n=2147483648&e,i=2147483648&t,a=1073741824&e,o=1073741824&t,t=(1073741823&e)+(1073741823&t);return a&o?2147483648^t^n^i:a|o?1073741824&t?3221225472^t^n^i:1073741824^t^n^i:t^n^i}function p(e,t,n,i,a,o,r){var s;return e=u(e,u(u((s=t)&n|~s&i,a),r)),u(d(e,o),t)}function f(e,t,n,i,a,o,r){return e=u(e,u(u(t&(i=i)|n&~i,a),r)),u(d(e,o),t)}function h(e,t,n,i,a,o,r){return e=u(e,u(u(t^n^i,a),r)),u(d(e,o),t)}function g(e,t,n,i,a,o,r){return e=u(e,u(u(n^(t|~i),a),r)),u(d(e,o),t)}function b(e){for(var t=_$_fefe[2],n=_$_fefe[2],i=0;i<=3;i++)t+=(n=_$_fefe[3]+(e>>>8*i&255)[_$_fefe[4]](16))[_$_fefe[5]](n[_$_fefe[0]]-2,2);return t}e[_$_fefe[10]]({_m5:function(e){for(var t,n,i,a,o=Array(),o=function(e){for(var t,n=e[_$_fefe[0]],i=n+8,i=16*(1+(i-i%64)/64),a=Array(i-1),o=0,r=0;r<n;)o=r%4*8,a[t=(r-r%4)/4]=a[t]|e[_$_fefe[1]](r)<<o,r++;return a[t=(r-r%4)/4]=a[t]|128<<(o=r%4*8),a[i-2]=n<<3,a[i-1]=n>>>29,a}(e=function(e){e=e[_$_fefe[7]](/\x0d\x0a/g,_$_fefe[6]);for(var t=_$_fefe[2],n=0;n<e[_$_fefe[0]];n++){var i=e[_$_fefe[1]](n);i<128?t+=String[_$_fefe[8]](i):(127<i&&i<2048?t+=String[_$_fefe[8]](i>>6|192):(t+=String[_$_fefe[8]](i>>12|224),t+=String[_$_fefe[8]](i>>6&63|128)),t+=String[_$_fefe[8]](63&i|128))}return t}(e)),r=1732584193,s=4023233417,d=2562383102,l=271733878,c=0;c<o[_$_fefe[0]];c+=16)r=p(t=r,n=s,i=d,a=l,o[c+0],7,3614090360),l=p(l,r,s,d,o[c+1],12,3905402710),d=p(d,l,r,s,o[c+2],17,606105819),s=p(s,d,l,r,o[c+3],22,3250441966),r=p(r,s,d,l,o[c+4],7,4118548399),l=p(l,r,s,d,o[c+5],12,1200080426),d=p(d,l,r,s,o[c+6],17,2821735955),s=p(s,d,l,r,o[c+7],22,4249261313),r=p(r,s,d,l,o[c+8],7,1770035416),l=p(l,r,s,d,o[c+9],12,2336552879),d=p(d,l,r,s,o[c+10],17,4294925233),s=p(s,d,l,r,o[c+11],22,2304563134),r=p(r,s,d,l,o[c+12],7,1804603682),l=p(l,r,s,d,o[c+13],12,4254626195),d=p(d,l,r,s,o[c+14],17,2792965006),s=p(s,d,l,r,o[c+15],22,1236535329),r=f(r,s,d,l,o[c+1],5,4129170786),l=f(l,r,s,d,o[c+6],9,3225465664),d=f(d,l,r,s,o[c+11],14,643717713),s=f(s,d,l,r,o[c+0],20,3921069994),r=f(r,s,d,l,o[c+5],5,3593408605),l=f(l,r,s,d,o[c+10],9,38016083),d=f(d,l,r,s,o[c+15],14,3634488961),s=f(s,d,l,r,o[c+4],20,3889429448),r=f(r,s,d,l,o[c+9],5,568446438),l=f(l,r,s,d,o[c+14],9,3275163606),d=f(d,l,r,s,o[c+3],14,4107603335),s=f(s,d,l,r,o[c+8],20,1163531501),r=f(r,s,d,l,o[c+13],5,2850285829),l=f(l,r,s,d,o[c+2],9,4243563512),d=f(d,l,r,s,o[c+7],14,1735328473),s=f(s,d,l,r,o[c+12],20,2368359562),r=h(r,s,d,l,o[c+5],4,4294588738),l=h(l,r,s,d,o[c+8],11,2272392833),d=h(d,l,r,s,o[c+11],16,1839030562),s=h(s,d,l,r,o[c+14],23,4259657740),r=h(r,s,d,l,o[c+1],4,2763975236),l=h(l,r,s,d,o[c+4],11,1272893353),d=h(d,l,r,s,o[c+7],16,4139469664),s=h(s,d,l,r,o[c+10],23,3200236656),r=h(r,s,d,l,o[c+13],4,681279174),l=h(l,r,s,d,o[c+0],11,3936430074),d=h(d,l,r,s,o[c+3],16,3572445317),s=h(s,d,l,r,o[c+6],23,76029189),r=h(r,s,d,l,o[c+9],4,3654602809),l=h(l,r,s,d,o[c+12],11,3873151461),d=h(d,l,r,s,o[c+15],16,530742520),s=h(s,d,l,r,o[c+2],23,3299628645),r=g(r,s,d,l,o[c+0],6,4096336452),l=g(l,r,s,d,o[c+7],10,1126891415),d=g(d,l,r,s,o[c+14],15,2878612391),s=g(s,d,l,r,o[c+5],21,4237533241),r=g(r,s,d,l,o[c+12],6,1700485571),l=g(l,r,s,d,o[c+3],10,2399980690),d=g(d,l,r,s,o[c+10],15,4293915773),s=g(s,d,l,r,o[c+1],21,2240044497),r=g(r,s,d,l,o[c+8],6,1873313359),l=g(l,r,s,d,o[c+15],10,4264355552),d=g(d,l,r,s,o[c+6],15,2734768916),s=g(s,d,l,r,o[c+13],21,1309151649),r=g(r,s,d,l,o[c+4],6,4149444226),l=g(l,r,s,d,o[c+11],10,3174756917),d=g(d,l,r,s,o[c+2],15,718787259),s=g(s,d,l,r,o[c+9],21,3951481745),r=u(r,t),s=u(s,n),d=u(d,i),l=u(l,a);return(b(r)+b(s)+b(d)+b(l))[_$_fefe[9]]()}})}(jQuery);var _$_1bea=["","toString","\n","replace","length","charCodeAt","fromCharCode","push","toLowerCase","extend"];!function(e){function v(e,t){return e<<t|e>>>32-t}function x(e){for(var t=_$_1bea[0],n=7;0<=n;n--)t+=(e>>>4*n&15)[_$_1bea[1]](16);return t}e[_$_1bea[9]]({_s1:function(e){for(var t,n,i,a,o,r,s,d,l=new Array(80),c=1732584193,u=4023233417,p=2562383102,f=271733878,h=3285377520,g=(e=function(e){e=e[_$_1bea[3]](/\x0d\x0a/g,_$_1bea[2]);for(var t=_$_1bea[0],n=0;n<e[_$_1bea[4]];n++){var i=e[_$_1bea[5]](n);i<128?t+=String[_$_1bea[6]](i):(127<i&&i<2048?t+=String[_$_1bea[6]](i>>6|192):(t+=String[_$_1bea[6]](i>>12|224),t+=String[_$_1bea[6]](i>>6&63|128)),t+=String[_$_1bea[6]](63&i|128))}return t}(e))[_$_1bea[4]],b=new Array,m=0;m<g-3;m+=4)n=e[_$_1bea[5]](m)<<24|e[_$_1bea[5]](m+1)<<16|e[_$_1bea[5]](m+2)<<8|e[_$_1bea[5]](m+3),b[_$_1bea[7]](n);switch(g%4){case 0:m=2147483648;break;case 1:m=e[_$_1bea[5]](g-1)<<24|8388608;break;case 2:m=e[_$_1bea[5]](g-2)<<24|e[_$_1bea[5]](g-1)<<16|32768;break;case 3:m=e[_$_1bea[5]](g-3)<<24|e[_$_1bea[5]](g-2)<<16|e[_$_1bea[5]](g-1)<<8|128}for(b[_$_1bea[7]](m);b[_$_1bea[4]]%16!=14;)b[_$_1bea[7]](0);for(b[_$_1bea[7]](g>>>29),b[_$_1bea[7]](g<<3&4294967295),t=0;t<b[_$_1bea[4]];t+=16){for(m=0;m<16;m++)l[m]=b[t+m];for(m=16;m<=79;m++)l[m]=v(l[m-3]^l[m-8]^l[m-14]^l[m-16],1);for(i=c,a=u,o=p,r=f,s=h,m=0;m<=19;m++)d=v(i,5)+(a&o|~a&r)+s+l[m]+1518500249&4294967295,s=r,r=o,o=v(a,30),a=i,i=d;for(m=20;m<=39;m++)d=v(i,5)+(a^o^r)+s+l[m]+1859775393&4294967295,s=r,r=o,o=v(a,30),a=i,i=d;for(m=40;m<=59;m++)d=v(i,5)+(a&o|a&r|o&r)+s+l[m]+2400959708&4294967295,s=r,r=o,o=v(a,30),a=i,i=d;for(m=60;m<=79;m++)d=v(i,5)+(a^o^r)+s+l[m]+3395469782&4294967295,s=r,r=o,o=v(a,30),a=i,i=d;c=c+i&4294967295,u=u+a&4294967295,p=p+o&4294967295,f=f+r&4294967295,h=h+s&4294967295}return(d=x(c)+x(u)+x(p)+x(f)+x(h))[_$_1bea[8]]()}})}(jQuery);var _$_c387=["b","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=","","charCodeAt","charAt","length","replace","indexOf","fromCharCode","textbox","combobox","datebox","fn","defaults","map","split","bA==","dc","dG9wSlVJ","cutStr2Arr","substr",":","/","cf","_m5","_s1","tj","\n"];function getTabWindow(){var e,t=null;return topJUI.config.aloneUse?t=window:(e=parent.$("#index_tabs").tabs("getSelected"))&&0<e.find("iframe").length&&(t=e.find("iframe")[0].contentWindow),t}function showMask(){$('<div class="datagrid-mask"></div>').css({display:"block",width:"100%",height:$(window).height()}).appendTo("body"),$('<div class="datagrid-mask-msg"></div>').html("正在处理，请稍候...").appendTo("body").css({display:"block",left:($(document.body).outerWidth(!0)-190)/2,top:($(window).height()-45)/2})}function hideMask(){$(".datagrid-mask").remove(),$(".datagrid-mask-msg").remove()}function addTab(e){var t='<iframe src="'+e.url+'" scrolling="auto" frameborder="0" style="width:100%;height:100%;"></iframe>',n=$("#index_tabs"),t={id:Math.random(),title:e.text,closable:void 0===e.closable||e.closable,iconCls:e.iconCls||"fa fa-page",content:t,border:e.border||!1,fit:!0};n.tabs("exists",t.title)?n.tabs("select",t.title):(e=$.cookie("menuClickTime"),1e3<=(new Date).getTime()-e?($.cookie("menuClickTime",(new Date).getTime()),n.tabs("myAdd",t)):$.messager.show({title:"温馨提示",msg:"操作过快，请稍后重试！"}))}jQuery[_$_c387[0]]=function(t){var l=_$_c387[1];return{dc:function(e){var t,n,i,a,o,r,s=_$_c387[2],d=0;for(e=e[_$_c387[6]](/[^A-Za-z0-9\+\/\=]/g,_$_c387[2]);d<e[_$_c387[5]];)i=l[_$_c387[7]](e[_$_c387[4]](d++)),t=(15&(a=l[_$_c387[7]](e[_$_c387[4]](d++))))<<4|(o=l[_$_c387[7]](e[_$_c387[4]](d++)))>>2,n=(3&o)<<6|(r=l[_$_c387[7]](e[_$_c387[4]](d++))),s+=String[_$_c387[8]](i<<2|a>>4),64!=o&&(s+=String[_$_c387[8]](t)),64!=r&&(s+=String[_$_c387[8]](n));return s=function(e){var t=_$_c387[2],n=0,i=c1=c2=0;for(;n<e[_$_c387[5]];)(i=e[_$_c387[3]](n))<128?(t+=String[_$_c387[8]](i),n++):191<i&&i<224?(c2=e[_$_c387[3]](n+1),t+=String[_$_c387[8]]((31&i)<<6|63&c2),n+=2):(c2=e[_$_c387[3]](n+1),c3=e[_$_c387[3]](n+2),t+=String[_$_c387[8]]((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return t}(s)},ec:function(e){var t,n,i,a,o,r,s=_$_c387[2],d=0;for(e=function(e){e=e[_$_c387[6]](/\r\n/g,_$_c387[27]);for(var t=_$_c387[2],n=0;n<e[_$_c387[5]];n++){var i=e[_$_c387[3]](n);i<128?t+=String[_$_c387[8]](i):(127<i&&i<2048?t+=String[_$_c387[8]](i>>6|192):(t+=String[_$_c387[8]](i>>12|224),t+=String[_$_c387[8]](i>>6&63|128)),t+=String[_$_c387[8]](63&i|128))}return t}(e);d<e[_$_c387[5]];)i=(r=e[_$_c387[3]](d++))>>2,a=(3&r)<<4|(t=e[_$_c387[3]](d++))>>4,o=(15&t)<<2|(n=e[_$_c387[3]](d++))>>6,r=63&n,isNaN(t)?o=r=64:isNaN(n)&&(r=64),s=s+l[_$_c387[4]](i)+l[_$_c387[4]](a)+l[_$_c387[4]](o)+l[_$_c387[4]](r);return s},tj:function(){t[_$_c387[14]]([_$_c387[9],_$_c387[10],_$_c387[11]],function(e){t[_$_c387[12]][e]&&(t[_$_c387[12]][e][_$_c387[13]]={})})},cf:function(e){for(var t=_$_c387[2],n=0;n<e[_$_c387[5]];n++)t+=e[_$_c387[15]](_$_c387[2])[n]+e[_$_c387[15]](_$_c387[2])[e[_$_c387[5]]-n-1];return t},a:function(){var e=window[t[_$_c387[0]][_$_c387[17]](_$_c387[18])][t[_$_c387[0]][_$_c387[17]](_$_c387[16])];arrayContain(e[_$_c387[20]](32)[_$_c387[19]](40),t[_$_c387[25]](t[_$_c387[24]](t[_$_c387[0]][_$_c387[23]](_tjp2[_$_c387[15]](_$_c387[22])[2][_$_c387[15]](_$_c387[21])[0]+e[_$_c387[20]](0,32)))))||t[_$_c387[0]][_$_c387[26]]()}}}(jQuery),function(g){function b(e){return g(e).data("treegrid")?"treegrid":"datagrid"}var n=g.fn.datagrid.methods.autoSizeColumn,i=g.fn.datagrid.methods.loadData,a=g.fn.datagrid.methods.appendRow,t=g.fn.datagrid.methods.deleteRow;g.extend(g.fn.datagrid.methods,{autoSizeColumn:function(e,t){return e.each(function(){var e=g(this).datagrid("getPanel").find(".datagrid-header .datagrid-filter-c");e.hide(),n.call(g.fn.datagrid.methods,g(this),t),e.show(),m(this,t)})},loadData:function(e,t){return e.each(function(){g.data(this,"datagrid").filterSource=null}),i.call(g.fn.datagrid.methods,e,t)},appendRow:function(e,t){var n=a.call(g.fn.datagrid.methods,e,t);return e.each(function(){var e=g(this).data("datagrid");e.filterSource&&(e.filterSource.total++,e.filterSource.rows!=e.data.rows&&e.filterSource.rows.push(t))}),n},deleteRow:function(e,i){return e.each(function(){var e=g(this).data("datagrid"),t=e.options;if(e.filterSource&&t.idField)if(e.filterSource.rows==e.data.rows)e.filterSource.total--;else for(var n=0;n<e.filterSource.rows.length;n++)if(e.filterSource.rows[n][t.idField]==e.data.rows[i][t.idField]){e.filterSource.rows.splice(n,1),e.filterSource.total--;break}}),t.call(g.fn.datagrid.methods,e,i)}});var o=g.fn.treegrid.methods.loadData,r=g.fn.treegrid.methods.append,s=g.fn.treegrid.methods.insert,d=g.fn.treegrid.methods.remove;g.extend(g.fn.treegrid.methods,{loadData:function(e,t){return e.each(function(){g.data(this,"treegrid").filterSource=null}),o.call(g.fn.treegrid.methods,e,t)},append:function(e,n){return e.each(function(){var e,t=g(this).data("treegrid");t.options.oldLoadFilter?(e=w(this,n.data,n.parent),t.filterSource.total+=e.length,t.filterSource.rows=t.filterSource.rows.concat(e),g(this).treegrid("loadData",t.filterSource)):r(g(this),n)})},insert:function(e,n){return e.each(function(){var e,t,i=g(this).data("treegrid"),a=i.options;a.oldLoadFilter?(n.before||n.after,e=0<=(t=function(e){for(var t=i.filterSource.rows,n=0;n<t.length;n++)if(t[n][a.idField]==e)return n;return-1}(n.before||n.after))?i.filterSource.rows[t]._parentId:null,e=w(this,[n.data],e),t=(t=(t=i.filterSource.rows.splice(0,0<=t?n.before?t:t+1:i.filterSource.rows.length)).concat(e)).concat(i.filterSource.rows),i.filterSource.total+=e.length,i.filterSource.rows=t,g(this).treegrid("loadData",i.filterSource)):s(g(this),n)})},remove:function(e,a){return e.each(function(){var e=g(this).data("treegrid");if(e.filterSource)for(var t=e.options,n=e.filterSource.rows,i=0;i<n.length;i++)if(n[i][t.idField]==a){n.splice(i,1),e.filterSource.total--;break}}),d(e,a)}});var e={filterMenuIconCls:"icon-ok",filterBtnIconCls:"icon-filter",filterBtnPosition:"right",filterPosition:"bottom",remoteFilter:!1,showFilterBar:!0,filterDelay:400,filterRules:[],filterMatchingType:"all",filterMatcher:function(t){var e=b(this),s=g(this),d=g.data(this,e).options;if(d.filterRules.length){var n=[];if("treegrid"==e){var i,a={};for(i in g.map(t.rows,function(e){if(l(e,e[d.idField]))for(a[e[d.idField]]=e,e=c(t.rows,e._parentId);e;)a[e[d.idField]]=e,e=c(t.rows,e._parentId)}),a)n.push(a[i])}else for(var o=0;o<t.rows.length;o++){var r=t.rows[o];l(r,o)&&n.push(r)}t={total:t.total-(t.rows.length-n.length),rows:n}}return t;function l(e,t){var n=d.filterRules;if(!n.length)return 1;for(var i=0;i<n.length;i++){var a=n[i],o=e[a.field],r=s.datagrid("getColumnOption",a.field);null==(o=r&&r.formatter?r.formatter(e[a.field],e,t):o)&&(o="");a=d.operators[a.op].isMatch(o,a.value);if("any"==d.filterMatchingType){if(a)return 1}else if(!a)return}return"all"==d.filterMatchingType}function c(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i[d.idField]==t)return i}return null}},defaultFilterType:"text",defaultFilterOperator:"contains",defaultFilterOptions:{onInit:function(n){var i=b(n),a=g(n)[i]("options"),o=g(this).attr("name"),r=g(this);function t(){var e=g(n)[i]("getFilterRule",o),t=r.val();""!=t?(e&&e.value!=t||!e)&&(g(n)[i]("addFilterRule",{field:o,op:a.defaultFilterOperator,value:t}),g(n)[i]("doFilter")):e&&(g(n)[i]("removeFilterRule",o),g(n)[i]("doFilter"))}(r=r.data("textbox")?r.textbox("textbox"):r).unbind(".filter").bind("keydown.filter",function(e){g(this);this.timer&&clearTimeout(this.timer),13==e.keyCode?t():this.timer=setTimeout(function(){t()},a.filterDelay)})}},filterStringify:function(e){return JSON.stringify(e)},onClickMenu:function(e,t){}};function m(e,t){var o=!1,r=g(e),n=r.datagrid("getPanel").find("div.datagrid-header"),s=n.find(".datagrid-header-row:not(.datagrid-filter-row)");(t?n.find('.datagrid-filter[name="'+t+'"]'):n.find(".datagrid-filter")).each(function(){var e,t=g(this).attr("name"),n=r.datagrid("getColumnOption",t),i=g(this).closest("div.datagrid-filter-c"),a=i.find("a.datagrid-filter-btn"),t=s.find('td[field="'+t+'"] .datagrid-cell')._outerWidth();t!=(e=0,g(i).children(":visible").each(function(){e+=g(this)._outerWidth()}),e)&&this.filter.resize(this,t-a._outerWidth()),i.width()>n.boxWidth+n.deltaWidth-1&&(n.boxWidth=i.width()-n.deltaWidth+1,n.width=n.boxWidth+n.deltaWidth,o=!0)}),o&&g(e).datagrid("fixColumnSize")}function l(e,t){return g(e).datagrid("getPanel").find("div.datagrid-header").find('tr.datagrid-filter-row td[field="'+t+'"] .datagrid-filter')}function c(e,t){for(var n=b(e),i=g(e)[n]("options").filterRules,a=0;a<i.length;a++)if(i[a].field==t)return a;return-1}function v(e,t){var n=b(e),i=g(e)[n]("options"),a=i.filterRules;"nofilter"==t.op?u(e,t.field):0<=(n=c(e,t.field))?g.extend(a[n],t):a.push(t);e=l(e,t.field);e.length&&("nofilter"!=t.op&&e[0].filter.setValue(e,t.value),(e=e[0].menu)&&(e.find("."+i.filterMenuIconCls).removeClass(i.filterMenuIconCls),t=e.menu("findItem",i.operators[t.op].text),e.menu("setIcon",{target:t.target,iconCls:i.filterMenuIconCls})))}function u(i,e){var t=b(i),n=g(i),a=n[t]("options");function o(e){for(var t=0;t<e.length;t++){var n=l(i,e[t]);n.length&&(n[0].filter.setValue(n,""),(n=n[0].menu)&&n.find("."+a.filterMenuIconCls).removeClass(a.filterMenuIconCls))}}e?(0<=(t=c(i,e))&&a.filterRules.splice(t,1),o([e])):(a.filterRules=[],o(n.datagrid("getColumnFields",!0).concat(n.datagrid("getColumnFields"))))}function x(e){var t=b(e),n=g.data(e,t);n.options.remoteFilter?g(e)[t]("load"):(g(e)[t]("getPager").pagination("refresh",{pageNumber:1}),g(e)[t]("options").pageNumber=1,g(e)[t]("loadData",n.filterSource||n.data))}function w(t,e,n){var i=g(t).treegrid("options");if(!e||!e.length)return[];var a=[];return g.map(e,function(e){e._parentId=n,a.push(e),a=a.concat(w(t,e.children,e[i.idField]))}),g.map(a,function(e){e.children=void 0}),a}function p(c,u){u=u||[];var p=b(c),f=g.data(c,p),h=f.options;h.filterRules.length||(h.filterRules=[]),h.filterCache=h.filterCache||{};var e=g.data(c,"datagrid").options,n=e.onResize;e.onResize=function(e,t){m(c),n.call(this,e,t)};var i=e.onBeforeSortColumn;e.onBeforeSortColumn=function(e,t){t=i.call(this,e,t);return 0!=t&&(h.isSorting=!0),t};var a=h.onResizeColumn;h.onResizeColumn=function(e,t){var n=g(this).datagrid("getPanel").find(".datagrid-header .datagrid-filter-c");n.hide(),g(c).datagrid("fitColumns"),h.fitColumns?m(c):m(c,e),n.show(),a.call(c,e,t)};var o=h.onBeforeLoad;function t(e){var t=f.dc,n=g(c).datagrid("getColumnFields",e);e&&h.rownumbers&&n.unshift("_");t=(e?t.header1:t.header2).find("table.datagrid-htable");t.find(".datagrid-filter").each(function(){this.filter.destroy&&this.filter.destroy(this),this.menu&&g(this.menu).menu("destroy")}),t.find("tr.datagrid-filter-row").remove();var i=g('<tr class="datagrid-header-row datagrid-filter-row"></tr>');"bottom"==h.filterPosition?i.appendTo(t.find("tbody")):i.prependTo(t.find("tbody")),h.showFilterBar||i.hide();for(var a=0;a<n.length;a++){var o,r,s=n[a],d=g(c).datagrid("getColumnOption",s),l=g("<td></td>").attr("field",s).appendTo(i);d&&d.hidden&&l.hide(),"_"!=s&&(d&&(d.checkbox||d.expander)||((o=function(e){for(var t=0;t<u.length;t++){var n=u[t];if(n.field==e)return n}return null}(s))?g(c)[p]("destroyFilter",s):o=g.extend({},{field:s,type:h.defaultFilterType,options:h.defaultFilterOptions}),(r=h.filterCache[s])?r.appendTo(l):(r=g('<div class="datagrid-filter-c"></div>').appendTo(l),(l=(d=h.filters[o.type]).init(r,o.options||{})).addClass("datagrid-filter").attr("name",s),l[0].filter=d,l[0].menu=function(e,t){if(!t)return null;var n=g('<a class="datagrid-filter-btn">&nbsp;</a>').addClass(h.filterBtnIconCls);"right"==h.filterBtnPosition?n.appendTo(e):n.prependTo(e);var i=g("<div></div>").appendTo("body");return g.map(["nofilter"].concat(t),function(e){var t=h.operators[e];t&&g("<div></div>").attr("name",e).html(t.text).appendTo(i)}),i.menu({alignTo:n,onClick:function(e){var t=g(this).menu("options").alignTo,n=t.closest("td[field]"),i=n.attr("field"),n=n.find(".datagrid-filter"),n=n[0].filter.getValue(n);0!=h.onClickMenu.call(c,e,t,i)&&(v(c,{field:i,op:e.name,value:n}),x(c))}}),n[0].menu=i,n.bind("click",{menu:i},function(e){return g(this.menu).menu("show"),!1}),i}(r,o.op),o.options?o.options.onInit&&o.options.onInit.call(l[0],c):h.defaultFilterOptions.onInit.call(l[0],c),h.filterCache[s]=r,m(c,s))))}}h.onBeforeLoad=function(e,t){e&&(e.filterRules=h.filterStringify(h.filterRules)),t&&(t.filterRules=h.filterStringify(h.filterRules));t=o.call(this,e,t);if(0!=t)if("datagrid"==p)f.filterSource=null;else if("treegrid"==p&&f.filterSource)if(e){for(var n=e[h.idField],i=f.filterSource.rows||[],a=0;a<i.length;a++)if(n==i[a]._parentId)return!1}else f.filterSource=null;return t},h.loadFilter=function(e,t){e=h.oldLoadFilter.call(this,e,t);return function(e,t){var n,r,s,d,i,a,o,l,c,u=b(this),p=g.data(this,u),f=p.options;if("datagrid"==u&&g.isArray(e)?e={total:e.length,rows:e}:"treegrid"==u&&g.isArray(e)&&(e={total:(n=w(this,e,t)).length,rows:n}),!f.remoteFilter){if(p.filterSource){if(f.isSorting)f.isSorting=void 0;else if("datagrid"==u)p.filterSource=e;else if(p.filterSource.total+=e.length,p.filterSource.rows=p.filterSource.rows.concat(e.rows),t)return f.filterMatcher.call(this,e)}else p.filterSource=e;!f.remoteSort&&f.sortName&&(r=f.sortName.split(","),s=f.sortOrder.split(","),d=g(this),p.filterSource.rows.sort(function(e,t){for(var n=0,i=0;i<r.length;i++){var a=r[i],o=s[i];if(0!=(n=(d.datagrid("getColumnOption",a).sorter||function(e,t){return e==t?0:t<e?1:-1})(e[a],t[a])*("asc"==o?1:-1)))return n}return n})),e=f.filterMatcher.call(this,{total:p.filterSource.total,rows:p.filterSource.rows}),f.pagination&&((i=(d=g(this))[u]("getPager")).pagination({onSelectPage:function(e,t){f.pageNumber=e,f.pageSize=t,i.pagination("refresh",{pageNumber:e,pageSize:t}),d[u]("loadData",p.filterSource)},onBeforeRefresh:function(){return d[u]("reload"),!1}}),"datagrid"==u?(c=(l=(f.pageNumber-1)*parseInt(f.pageSize))+parseInt(f.pageSize),e.rows=e.rows.slice(l,c)):(a=[],o=[],g.map(e.rows,function(e){(e._parentId?o:a).push(e)}),e.total=a.length,c=(l=(f.pageNumber-1)*parseInt(f.pageSize))+parseInt(f.pageSize),e.rows=a.slice(l,c).concat(o))),g.map(e.rows,function(e){e.children=void 0})}return e}.call(this,e,t)},g("#datagrid-filter-style").length||g("head").append('<style id="datagrid-filter-style">a.datagrid-filter-btn{display:inline-block;width:18px;height:22px;margin:8px 0 0 8px;vertical-align:middle;cursor:pointer;opacity:0.6;filter:alpha(opacity=60);}a:hover.datagrid-filter-btn{opacity:1;filter:alpha(opacity=100);}.datagrid-filter-row .textbox,.datagrid-filter-row .textbox .textbox-text{-moz-border-radius:0;-webkit-border-radius:0;border-radius:0;}.datagrid-filter-row input{margin:0;-moz-border-radius:0;-webkit-border-radius:0;border-radius:0;}.datagrid-filter-cache{position:absolute;width:10px;height:10px;left:-99999px;}</style>'),t(!0),t(),h.fitColumns&&setTimeout(function(){m(c)},0),g.map(h.filterRules,function(e){v(c,e)})}g.extend(g.fn.datagrid.defaults,e),g.extend(g.fn.treegrid.defaults,e),g.fn.datagrid.defaults.filters=g.extend({},g.fn.datagrid.defaults.editors,{label:{init:function(e,t){return g("<span></span>").appendTo(e)},getValue:function(e){return g(e).html()},setValue:function(e,t){g(e).html(t)},resize:function(e,t){g(e)._outerWidth(t)._outerHeight(22)}}}),g.fn.treegrid.defaults.filters=g.fn.datagrid.defaults.filters,g.fn.datagrid.defaults.operators={nofilter:{text:"No Filter"},contains:{text:"Contains",isMatch:function(e,t){return e=String(e),t=String(t),0<=e.toLowerCase().indexOf(t.toLowerCase())}},equal:{text:"Equal",isMatch:function(e,t){return e==t}},notequal:{text:"Not Equal",isMatch:function(e,t){return e!=t}},beginwith:{text:"Begin With",isMatch:function(e,t){return e=String(e),t=String(t),0==e.toLowerCase().indexOf(t.toLowerCase())}},endwith:{text:"End With",isMatch:function(e,t){return e=String(e),t=String(t),-1!==e.toLowerCase().indexOf(t.toLowerCase(),e.length-t.length)}},less:{text:"Less",isMatch:function(e,t){return e<t}},lessorequal:{text:"Less Or Equal",isMatch:function(e,t){return e<=t}},greater:{text:"Greater",isMatch:function(e,t){return t<e}},greaterorequal:{text:"Greater Or Equal",isMatch:function(e,t){return t<=e}}},g.fn.treegrid.defaults.operators=g.fn.datagrid.defaults.operators,g.extend(g.fn.datagrid.methods,{enableFilter:function(e,n){return e.each(function(){var e=b(this),t=g.data(this,e).options;if(t.oldLoadFilter){if(!n)return;g(this)[e]("disableFilter")}t.oldLoadFilter=t.loadFilter,p(this,n),g(this)[e]("resize"),t.filterRules.length&&(t.remoteFilter||t.data)&&x(this)})},disableFilter:function(e){return e.each(function(){var e,t=b(this),n=g.data(this,t),i=n.options,a=g(this).data("datagrid").dc,o=a.view.children(".datagrid-filter-cache");for(e in o.length||(o=g('<div class="datagrid-filter-cache"></div>').appendTo(a.view)),i.filterCache)g(i.filterCache[e]).appendTo(o);a=n.data;n.filterSource&&(a=n.filterSource,g.map(a.rows,function(e){e.children=void 0})),g(this)[t]({data:a,loadFilter:i.oldLoadFilter||void 0,oldLoadFilter:null})})},destroyFilter:function(e,i){return e.each(function(){var e=b(this),a=g.data(this,e).options;if(i)n(i);else{for(var t in a.filterCache)n(t);g(this).datagrid("getPanel").find(".datagrid-header .datagrid-filter-row").remove(),g(this).data("datagrid").dc.view.children(".datagrid-filter-cache").remove(),a.filterCache={},g(this)[e]("resize"),g(this)[e]("disableFilter")}function n(e){var t,n=g(a.filterCache[e]),i=n.find(".datagrid-filter");!i.length||(t=i[0].filter).destroy&&t.destroy(i[0]),n.find(".datagrid-filter-btn").each(function(){g(this.menu).menu("destroy")}),n.remove(),a.filterCache[e]=void 0}})},getFilterRule:function(e,t){return n=e[0],e=t,t=b(n),t=g(n)[t]("options").filterRules,0<=(e=c(n,e))?t[e]:null;var n},addFilterRule:function(e,t){return e.each(function(){v(this,t)})},removeFilterRule:function(e,t){return e.each(function(){u(this,t)})},doFilter:function(e){return e.each(function(){x(this)})},getFilterComponent:function(e,t){return l(e[0],t)},resizeFilter:function(e,t){return e.each(function(){m(this,t)})}})}(jQuery),function(i){i.fn.iAccordion=function(e,t){if("string"==typeof e){var n=i.fn.iAccordion.methods[e];return n?n(this,t):this.accordion(e,t)}this.each(function(){e=i.fn.iAccordion.parseOptions(this,e),i(this).accordion(e)})},i.fn.iAccordion.methods={},i.fn.iAccordion.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.accordion.parseOptions(e),i.fn.iAccordion.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iAccordion.defaults={}}(jQuery),function(s){s.fn.iAutocomplete=function(e,t){if("string"==typeof e){var n=s.fn.iAutocomplete.methods[e];return n?n(this,t):this.combobox(e,t)}this.each(function(){(e=s.fn.iAutocomplete.parseOptions(this,e)).initUrl=e.url,s(this).combobox(e)})},s.fn.iAutocomplete.methods={},s.fn.iAutocomplete.parseOptions=function(e,t){return setId(e,s.extend({},s.fn.combobox.parseOptions(e),s.fn.iAutocomplete.defaults,s.parser.parseOptions(e,["id"]),t))},s.fn.iAutocomplete.defaults={id:this.selector,url:"",width:"100%",fieldId:"userNameId",required:!1,formatter:"",onLoadSuccess:function(e,t){setTimeout(function(){},400)},onShowPanel:function(){},onChange:function(e,t){var n=s(this).iCombobox("options"),i=s("#"+n.id);null==e&&(e=i.iCombobox("getValue"));var a=n.initUrl.match(/{([\s\S]*?)}/g),o="";if(0<a.length)for(var r=0;r<a.length;r++)o=n.initUrl.replace(a[r],encodeURI(encodeURI(e)));i.iCombobox("reload",o)},onSelect:function(e){var t,n=s(this).iCombobox("options");s("#"+n.id);s(this).iCombobox("hidePanel"),n.param&&(t=s(this).closest("form"),e=getSelectedRowJson(n.param,e),s("#"+t.attr("id")).form("load",e)),setTimeout(function(){},200)},onUnselect:function(e){var t=s(this).iCombobox("options");s("#"+t.id);setTimeout(function(){},200)},onHidePanel:function(){var e=s(this).iCombobox("options"),t=s("#"+e.id);e.textField!=e.valueField&&(t.combobox("getText"),t.combobox("getValue"))}},s.parser&&s.parser.plugins&&s.parser.plugins.push("autocomplete")}(jQuery),function(i){i.fn.iCalendar=function(e,t){if("string"==typeof e){var n=i.fn.iCalendar.methods[e];return n?n(this,t):this.calendar(e,t)}this.each(function(){e=i.fn.iCalendar.parseOptions(this,e),i(this).calendar(e)})},i.fn.iCalendar.methods={},i.fn.iCalendar.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.calendar.parseOptions(e),i.fn.iCalendar.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iCalendar.defaults={}}(jQuery),function(i){i.fn.iCheckbox=function(e,t){if("string"==typeof e){var n=i.fn.iCheckbox.methods[e];return n?n(this,t):this.checkbox(e,t)}this.each(function(){e=i.fn.iCheckbox.parseOptions(this,e),i(this).checkbox(e)})},i.fn.iCheckbox.methods={},i.fn.iCheckbox.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.checkbox.parseOptions(e),i.fn.iCheckbox.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iCheckbox.defaults={labelPosition:"after"}}(jQuery),function(i){i.fn.iCombo=function(e,t){if("string"==typeof e){var n=i.fn.iCombo.methods[e];return n?n(this,t):this.combo(e,t)}this.each(function(){e=i.fn.iCombo.parseOptions(this,e),i(this).combo(e)})},i.fn.iCombo.methods={},i.fn.iCombo.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.combo.parseOptions(e),i.fn.iCombo.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iCombo.defaults={width:"100%"}}(jQuery),function(a){a.fn.iCombobox=function(e,t){if("string"==typeof e){var n=a.fn.iCombobox.methods[e];return n?n(this,t):this.combobox(e,t)}this.each(function(){e=a.fn.iCombobox.parseOptions(this,e),a(this).combobox(e)})},a.fn.iCombobox.methods={},a.fn.iCombobox.parseOptions=function(e,t){return setId(e,a.extend({},a.fn.combobox.parseOptions(e),a.fn.iCombobox.defaults,a.parser.parseOptions(e,["id"]),t))},a.fn.iCombobox.defaults={width:"100%",editable:!1,onShowPanel:function(){var e,t=a(this).iCombobox("options");null!=t.url&&0<=t.url.indexOf("{")&&(e=a(this).closest("form").serializeObject(),a("#"+t.id).combobox("reload",replaceUrlParamValueByBrace(t.url,e)))},onChange:function(e,t){var n,i=a(this).iCombobox("options");"object"==typeof i.childCombobox&&(n=i.childCombobox,(i=a("#"+n.id)).combobox("setText",""),i.combobox("setValue",""),n.url&&(e=n.url.replace("{parentValue}",e),i.combobox("reload",e)))},onSelect:function(e){var t,n=a(this).iCombobox("options");n.param&&(t=a(this).closest("form"),e=getSelectedRowJson(n.param,e),a("#"+t.attr("id")).form("load",e))}}}(jQuery),function(s){s.fn.iCombogrid=function(e,t){if("string"==typeof e){var n=s.fn.iCombogrid.methods[e];return n?n(this,t):this.combogrid(e,t)}this.each(function(){e=s.fn.iCombogrid.parseOptions(this,e),s(this).combogrid(e)})},s.fn.iCombogrid.methods={},s.fn.iCombogrid.parseOptions=function(e,t){return setId(e,s.extend({},s.fn.combogrid.parseOptions(e),s.fn.iCombogrid.defaults,s.parser.parseOptions(e,["id"]),t))},s.fn.iCombogrid.defaults={id:this.selector,width:"100%",mode:"remote",autocomplete:!0,onChange:function(e,t){var n=s(this).iCombogrid("options"),i=s("#"+n.id);if(n.autocomplete&&(i.combogrid("grid").datagrid("load",{q:e}),i.combogrid("grid").datagrid("selectRecord",e)),n.param&&""==e){for(var a={},o=n.param.split(","),r=0;r<o.length;r++)-1==o[r].indexOf(":")?a[o[r]]="":a[o[r].split(":")[1]]="";e=getSelectedRowJson(n.param,a),n=i.closest("form");s("#"+n.attr("id")).form("load",e),i.iCombogrid("textbox").focus()}},onLoadSuccess:function(e){},onSelect:function(e,t){var n,i=s(this).iDatagrid("options"),a=s("#"+i.id);i.param&&(n=a.closest("form"),t=getSelectedRowJson(i.param,t),s("#"+n.attr("id")).form("load",t),a.iCombogrid("textbox").focus())}}}(jQuery),function(d){d.fn.iCombotree=function(e,t){if("string"==typeof e){var n=d.fn.iCombotree.methods[e];return n?n(this,t):this.combotree(e,t)}this.each(function(){e=d.fn.iCombotree.parseOptions(this,e),d(this).combotree(e)})},d.fn.iCombotree.methods={},d.fn.iCombotree.parseOptions=function(e,t){return setId(e,d.extend({},d.fn.combotree.parseOptions(e),d.fn.iCombotree.defaults,d.parser.parseOptions(e,["id"]),t))},d.fn.iCombotree.defaults={id:this.selector,width:"100%",expandUrl:"",getFatherIdsUrl:"",animate:!0,expandAll:!1,onBeforeExpand:function(e,t){var n=d(this).iTree("options");d(this).iTree("options").url=replaceUrlParamValueByBrace(n.expandUrl,e)},onLoadSuccess:function(e,t){var r=d(this).iTree("options"),s=d("#"+r.id).combotree("tree");s.iTree("expand",s.iTree("getRoot").target),r.expandAll&&s.iTree("expandAll"),r.getFatherIdsUrl&&setTimeout(function(){var e,t,n,a,o;e=s,a=d("#"+(t=r).id),o=e.iTree("getSelected"),e={id:a.combotree("getValue")},null==o&&""!=e.id&&(d.ajax({type:"POST",url:replaceUrlParamValueByBrace(t.getFatherIdsUrl,e),success:function(e){var t=e.split(",");for(i=t.length-1;0<=i;i--)(n=a.combotree("tree").iTree("find",t[i].replace(/'/g,"")))&&a.combotree("tree").iTree("expand",n.target)}}),null!=e.id&&a.combotree("setValue",e.id))},100)},onSelect:function(e){var t,n=d(this).iTree("options"),i=d("#"+n.id).closest("form");n.param&&(t=getSelectedRowJson(n.param,e),d("#"+i.attr("id")).form("load",t)),"object"==typeof n.backfill&&d.getJSON(replaceUrlParamValueByBrace(n.backfill.url,e),{},function(e){d("#"+i.attr("id")).form("load",e)})},onShowPanel:function(){},onBeforeSelect:function(e){var t=d(this).iTree("options");if(t.onlyLeafCheck&&!d(this).iTree("isLeaf",e.target))return!1}},d.fn.combotree.defaults=d.extend({},d.fn.combo.defaults,d.fn.tree.defaults,{editable:!1,textField:null,unselectedValues:[],mappingRows:[],keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){doEnter(this)},query:function(e,t){doQuery(this,e)}},onBeforeExpand:function(e,t){var n=d(this).iTree("options");d(this).iTree("options").url=replaceUrlParamValueByBrace(n.expandUrl,e)},onSelect:function(e){var t,n=d(this).iTree("options"),i=d("#"+n.id).closest("form");n.param&&(t=getSelectedRowJson(n.param,e),d("#"+i.attr("id")).form("load",t)),"object"==typeof n.backfill&&d.getJSON(replaceUrlParamValueByBrace(n.backfill.url,e),{},function(e){d("#"+i.attr("id")).form("load",e)})},onBeforeSelect:function(e){var t=d(this).iTree("options");if(t.onlyLeafCheck&&!d(this).iTree("isLeaf",e.target))return!1}})}(jQuery),function(s){s.fn.iCombotreegrid=function(e,t){if("string"==typeof e){var n=s.fn.iCombotreegrid.methods[e];return n?n(this,t):this.combotreegrid(e,t)}this.each(function(){e=s.fn.iCombotreegrid.parseOptions(this,e),s(this).combotreegrid(e)})},s.fn.iCombotreegrid.methods={},s.fn.iCombotreegrid.parseOptions=function(e,t){return setId(e,s.extend({},s.fn.combotreegrid.parseOptions(e),s.fn.iCombotreegrid.defaults,s.parser.parseOptions(e,["id"]),t))},s.fn.iCombotreegrid.defaults={width:"100%",animate:!0,idField:"id",treeField:"text",fitColumns:!0,expandRoots:!0,expandAll:!1,onBeforeExpand:function(e,t){var n=s(this).iTreegrid("options");s("#"+n.id).combotreegrid("grid").treegrid("options").url=replaceUrlParamValueByBrace(n.expandUrl,e)},onChange:function(e,t){},onLoadSuccess:function(e,t){var n=s(this).iTreegrid("options"),a=s("#"+n.id),o=a.combotreegrid("grid");if(n.expandRoots)for(var i=o.iTreegrid("getRoots"),r=0;r<i.length;r++)o.iTreegrid("expand",i[r][n.idField]);n.expandAll&&a.iCombotreegrid("expandAll"),n.getFatherIdsUrl&&setTimeout(function(){var i,e=o.treegrid("getSelected"),t={id:a.combotreegrid("getValue")};null==e&&""!=t.id&&(s.ajax({type:"POST",url:replaceUrlParamValueByBrace(n.getFatherIdsUrl,t),success:function(e){for(var t=e.split(","),n=t.length-1;0<=n;n--)(i=o.treegrid("find",t[n].replace(/'/g,"")))&&o.treegrid("expand",i.id)}}),null!=t.id&&a.combotreegrid("setValue",t.id))},100)},onSelect:function(e,t){var n,i=s(this).iTreegrid("options"),a=s("#"+i.id);i.param&&(n=a.closest("form"),t=getSelectedRowJson(i.param,t),s("#"+n.attr("id")).form("load",t),a.combotreegrid("textbox").focus())}}}(jQuery);var openDialog=function(e){e.dialog.mbId=e.id,e.dialog.menuType=e.menuType;var t,n=e.dialog;if("object"==typeof e.parentGrid)openDialogAndloadDataByParentGrid(e);else if(n.url)openDialogAndloadDataByUrl(e);else if(!e.dialog.beforeOpenCheckUrl||beforeOpenCheck(e.dialog.beforeOpenCheckUrl)){if("undefined"!=n.onBeforeOpen&&executeCallBackFun(n.onBeforeOpen,e),"object"==typeof e.grid){var i,a=e.grid.unselectedMsg||e.grid.uncheckedMsg;if(null!=a)if(0==(i=getSelectedRowsData(e.grid.type,e.grid.id)).length)return void topjuiAlert(a)}topJUI.config.appendRefererParam&&(e.dialog.href=appendRefererParam(e.dialog.href)),-1!=e.dialog.href.indexOf("{")?(t=e.dialog.href,a=e.grid.unselectedMsg||e.grid.uncheckedMsg,(i=getSelectedRowsData(e.grid.type,e.grid.id))[0]?1==i.length?(n.href=replaceUrlParamValueByBrace(e.dialog.href,i[0]),$("#"+n.id).iDialog("openDialog",n),e.dialog.href=t):topjuiAlert(topJUI.language.message.msg.singleSelect):topjuiAlert(a||topJUI.language.message.msg.unSelect)):$("#"+n.id).iDialog("openDialog",e.dialog)}},addParentTab=function(e){var t=e.tab;if("object"==typeof e.grid){var n=e.grid;if(1==n.checkboxSelect){var i=getCheckedRowsData(n.type,n.id);if(0==i.length)return void $.messager.alert(topJUI.language.message.title.operationTips,topJUI.language.message.msg.checkSelfGrid,topJUI.language.message.icon.warning);i=i[0].UUID?0<=t.href.indexOf("?")?t.href+"&UUID="+getMultiRowsFieldValue(i,"UUID"):t.href+"?UUID="+getMultiRowsFieldValue(i,"UUID"):0<=t.href.indexOf("?")?t.href+"&uuid="+getMultiRowsFieldValue(i,"uuid"):t.href+"?uuid="+getMultiRowsFieldValue(i,"uuid")}else if(isExistBrace(t.href)){var a=getSelectedRowData(n.type,n.id);if(!a)return void $.messager.alert(topJUI.language.message.title.operationTips,topJUI.language.message.msg.selectSelfGrid,topJUI.language.message.icon.warning);i=replaceUrlParamValueByBrace(t.href,a)}else i=t.href}else i=t.href;n=t.title,a='<iframe src="'+i+'" frameborder="0" style="border:0;width:100%;height:100%;"></iframe>',t=parent.$("#index_tabs"),i=getSelectedTabOpts(t);t.iTabs("add",{id:getRandomNumByDef(),refererTab:{id:i.id},iframe:topJUI.config.iframe,title:n,content:a,closable:!0,iconCls:e.iconCls})};function getSelectedTabOpts(e){return e.iTabs("getSelected").panel("options")}var openWindow=function(e){var t;if("object"==typeof e.grid)if(e.grid.uncheckedMsg){var n=getCheckedRowsData(e.grid.type,e.grid.id);if(0==n.length)return void $.messager.alert(topJUI.language.message.title.operationTips,e.grid.uncheckedMsg||topJUI.language.message.msg.checkSelfGrid,topJUI.language.message.icon.warning);t=replaceUrlParamValueByBrace(e.windowHref,n,"multiple")}else{n=getSelectedRowData(e.grid.type,e.grid.id);if(!n)return void $.messager.alert(topJUI.language.message.title.operationTips,e.grid.unselectedMsg||topJUI.language.message.msg.selectSelfGrid,topJUI.language.message.icon.warning);t=replaceUrlParamValueByBrace(e.windowHref,n)}else t=e.windowHref;window.open(t)};function bindMenuClickEvent(e,t){var n=$(t.extend),i=0<n.length?getOptionsJson(n):{},n={};return"openDialog"==(t=$.extend(!0,i,t)).method?(n={},t.dialog.width=t.dialog.width||950,t.dialog.height=t.dialog.height||500,t=$.extend({},t,n)):"openTab"==t.method?(n={iconCls:"fa fa-th"},t=$.extend(n,t)):"openWindow"==t.method?(n={iconCls:"fa fa-link"},t=$.extend(t,n)):"edatagrid"==t.method?(n={iconCls:"fa fa-plus"},t=$.extend(n,t)):"doAjax"==t.method||"request"==t.method||("delete"==t.method?(n={iconCls:"fa fa-trash"},t=$.extend(t,n)):"filter"==t.method?(n={iconCls:"fa fa-filter"},t=$.extend(t,n)):"search"==t.method?(n={iconCls:"fa fa-search"},t=$.extend(t,n)):"export"==t.method?(n={iconCls:"fa fa-file-excel-o"},t=$.extend(t,n)):"import"==t.method&&(n={iconCls:"fa fa-cloud-upload",href:"/system/excel/excelImport"},t=$.extend(t,n))),t}function openDialogAndloadDataByParentGrid(e){"object"==typeof e.parentGrid&&(e.parentGrid.unselectedMsg,e.parentGrid.param,"datagrid"==e.parentGrid.type||e.parentGrid.type);var t,n,i,a=getSelectedRowData(e.parentGrid.type,e.parentGrid.id);a?e.dialog.beforeOpenCheckUrl&&!beforeOpenCheck(replaceUrlParamValueByBrace(e.dialog.beforeOpenCheckUrl,a))||($("#"+e.dialog.id).iDialog("createDialog",e.dialog),t=$("#"+e.dialog.id),e.dialog.oriHref?e.dialog.href=e.dialog.oriHref:e.dialog.oriHref=e.dialog.href,i=n=topJUI.config.appendRefererParam?appendRefererParam(e.dialog.href):e.dialog.href,-1!=e.dialog.href.indexOf("{")&&(-1!=(i=-1!=e.dialog.href.indexOf("{parent.")?replaceUrlParamValueByBrace(n,a,"parent"):i).indexOf("{")&&(i=replaceUrlParamValueByBrace(i,getSelectedRowData(e.grid.type,e.grid.id))),(a=e.dialog).href=i,t.iDialog(a)),t.iDialog("open")):topjuiAlert(e.parentGrid.unselectedMsg||topJUI.language.message.msg.selectParentGrid)}function openDialogAndloadDataByUrl(e){var t,n={grid:{singleSelectMsg:topJUI.language.message.msg.singleSelect,unselectedMsg:topJUI.language.message.msg.unSelect}},i=getSelectedRowsData((e=$.extend(!0,n,e)).grid.type,e.grid.id);i[0]?1==i.length?($("#"+e.dialog.id).iDialog("createDialog",e.dialog),e.dialog.beforeOpenCheckUrl&&!beforeOpenCheck(replaceUrlParamValueByBrace(e.dialog.beforeOpenCheckUrl,i[0]))||(t=$("#"+e.dialog.id),n=topJUI.config.appendRefererParam?appendRefererParam(e.dialog.href):e.dialog.href,-1!=e.dialog.href.indexOf("{")&&(i=replaceUrlParamValueByBrace(n,i[0]),t.dialog({href:i})),t.dialog("open"))):topjuiAlert(e.grid.singleSelectMsg):topjuiAlert(e.grid.unselectedMsg)}function dialogHandler(e){("loadData"==e.component?editHandler:"loadParentData"==e.action?addChildHandler:addHandler)(e)}function addHandler(e){getUrl("controller");e=$.extend({gridId:"datagrid"},e);var t=$("#"+e.dialogId);t.dialog({iconCls:"fa fa-plus",toolbar:"#"+e.dialogId+"-toolbar",buttons:"#"+e.dialogId+"-buttons"}),null!=e.dialogHref&&t.dialog("refresh",e.dialogHref),t.dialog("open")}function authCheck(e){if(""==topJUI.config.authUrl)return!0;var t=!1;return $.ajax({type:"post",url:"/system/authAccess/getAuthByRoleIdAndUrl",data:{url:e},async:!1,success:function(e){t=0!=e||(e={title:topJUI.language.message.title.operationTips,msg:topJUI.language.message.msg.permissionDenied,icon:topJUI.language.message.icon.warning},$.messager.alert(e),!1)}}),t}function beforeOpenCheck(e){var t=!1;return $.ajax({type:"get",url:e,async:!1,success:function(e){t=e.statusCode!=topJUI.config.statusCode.failure||(e={title:topJUI.language.message.title.operationTips,msg:e.message},$.messager.alert(e),!1)}}),t}function addChildHandler(i){var e,a,o=$("#"+i.parentGridId).treegrid("getSelected")?$("#"+i.parentGridId).treegrid("getSelected"):$("#"+i.parentGridId).datagrid("getSelected");o?(e=getUrl("controller"),e={gridId:"datagrid",dialogHref:i.dialogHref||e+"edit"},i=$.extend(e,i),(a=$("#"+i.dialogId)).dialog({iconCls:"fa fa-plus",toolbar:"#"+i.dialogId+"-toolbar",buttons:"#"+i.dialogId+"-buttons"}),null!=i.dialogHref&&a.dialog("refresh",i.dialogHref),a.dialog("open"),setTimeout(function(){$("#"+i.dialogId+" iframe").each(function(e){this.contentWindow.document.body.innerHTML=""});var e={};if(i.gridParam)for(var t=i.gridParam.split(","),n=0;n<t.length;n++)e[t[n]]=o[t[n]];e.puuid=o.uuid,a.form("load",e)},500)):$.messager.alert(topJUI.language.message.title.operationTips,topJUI.language.message.msg.selectParentGrid,topJUI.language.message.icon.warning)}function editHandler(e){var t=getUrl("controller"),t={gridId:"datagrid",dialogHref:e.dialogHref||t+"edit",dialogUrl:e.dialogUrl||t+"getDetailByUuid?uuid={uuid}"};e=$.extend(t,e),loadDialogData(e)}function getCheckedRowsData(e,t){return $("#"+t)[e]("getChecked")}function uncheckedAlert(e){$.messager.alert(topJUI.language.message.title.operationTips,e.grid.uncheckedMsg,topJUI.language.message.icon.warning)}function unselectedAlert(e){$.messager.alert(topJUI.language.message.title.operationTips,e.grid.unselectedMsg,topJUI.language.message.icon.warning)}function topjuiAlert(e){$.messager.alert(topJUI.language.message.title.operationTips,e,topJUI.language.message.icon.warning)}function getSelectedRowData(e,t){return getRowsDataBySelected(e,t,!1)}function getSelectedRowsData(e,t){return getRowsDataBySelected(e,t,!0)}function getRowsDataBySelected(e,t,n){return n?$("#"+t)[e]("getSelections"):$("#"+t)[e]("getSelected")}function getRowsDataBySelected2(e,t){var n,i;return"object"==typeof e.parentGrid?(i=e.parentGrid.id,"datagrid"==e.parentGrid.type?n=t?$("#"+i).datagrid("getSelections"):$("#"+i).datagrid("getSelected"):"treegrid"==e.parentGrid.type&&(n=t?$("#"+i).treegrid("getSelections"):$("#"+i).treegrid("getSelected"))):"object"==typeof e.grid&&(i=e.grid.id,"datagrid"==e.grid.type?n=t?$("#"+i).datagrid("getSelections"):$("#"+i).datagrid("getSelected"):"treegrid"==e.grid.type&&(n=t?$("#"+i).treegrid("getSelections"):$("#"+i).treegrid("getSelected"))),n}function refreshGrids(e){if("object"==typeof e)for(var t=0;t<e.length;t++){var n=e[t];setTimeout(function(){refreshGrid(n.type,n.id,n.clearQueryParams)},100*t)}}function refreshGrid(e,t,n){t=$("#"+t);t[e]("unselectAll"),t[e]("uncheckAll"),"datagrid"==e||"edatagrid"==e?(1==n&&t[e]({queryParams:{clearQueryParams:""}}),t[e]("reload")):"treegrid"==e&&t[e]("reload")}function loadGridByQueryParm(e,t,n){"datagrid"==e?($("#"+t).datagrid("load",n),$("#"+t).datagrid("unselectAll")):"treegrid"==e&&($("#"+t).treegrid("load",n),$("#"+t).treegrid("unselectAll"))}function doAjaxHandler(e){var t={gridId:"datagrid",iconCls:"fa fa-cog",confirmMsg:topJUI.language.message.msg.confirmMsg,grid:{reload:!0,updateRow:!1,uncheckedMsg:topJUI.language.message.msg.checkSelfGrid}};if(e=$.extend(!0,t,e),topJUI.config.appendRefererParam&&(e.url=appendRefererParam(e.url)),-1!=e.url.indexOf("{parent")){var n=getSelectedRowData(e.parentGrid.type,e.parentGrid.id);if(!n)return void $.messager.alert(topJUI.language.message.title.operationTips,topJUI.language.message.msg.selectParentGrid,topJUI.language.message.icon.warning);e.url=replaceUrlParamValueByBrace(e.url,n,"parent")}"object"==typeof e.grid&&(n=$("#"+e.grid.id).iDatagrid("options"),1==e.grid.multiCheck||null!=e.grid.uncheckedMsg?$("#"+e.grid.id).iDatagrid("multiCheckedAjax",e):0==n.singleSelect?$("#"+e.grid.id).iDatagrid("multiSelectedAjax",e):$("#"+e.grid.id).iDatagrid("singleSelectedAjax",e))}function requestHandler(e){if(topJUI.config.appendRefererParam&&(e.url=appendRefererParam(e.url)),"object"==typeof e.grid){var t=getSelectedRowData(e.grid.type,e.grid.id);if(null==t)return void $.messager.alert(topJUI.language.message.title.operationTips,topJUI.language.message.msg.selectSelfGrid,topJUI.language.message.icon.warning);e.newUrl=replaceUrlParamValueByBrace(e.url,t)}else e.newUrl=e.url;window.location.href=e.newUrl}function deleteHandler(e){var t=$.data(e,"menubutton").options,t=$.extend({},t);topJUI.config.appendRefererParam&&(t.url=appendRefererParam(t.url));var n=getCheckedRowsData(t.grid.type,t.grid.id);0!=n.length?$.messager.confirm(topJUI.language.message.title.confirmTips,topJUI.language.message.msg.confirmDelete,function(e){e&&(t.ajaxData={uuid:getMultiRowsFieldValue(n,"uuid"),uuids:getMultiRowsFieldValue(n,"uuid")},doAjax(t)&&refreshGrid(t.grid.type,t.grid.id))}):$.messager.alert(topJUI.language.message.title.operationTips,topJUI.language.message.msg.checkSelfGrid,topJUI.language.message.icon.warning)}function filterHandler(e){var t,n=$.data(e,"menubutton").options;"object"==typeof n.grid&&(e=(t=$("#"+n.grid.id))[n.grid.type]("options").filter||[],0<$(".datagrid-filter-row").length?t[n.grid.type]("disableFilter"):t[n.grid.type]("enableFilter",e))}function searchHandler(e){"object"==typeof(c=$.data(e,"menubutton").options).grid&&getColumnsNameAndField(c.grid.type,c.grid.id);e='<table id="advanceSearchTable" class="editTable">';e+="<tr>",e+='<td style="font-weight: bold;">方式</td>',e+='<td style="font-weight: bold;">左括号</td>',e+='<td style="font-weight: bold;">字段</td>',e+='<td style="font-weight: bold;">条件</td>',e+='<td style="font-weight: bold;">数值</td>',e+='<td style="font-weight: bold;">右括号</td>',e+='<td style="font-weight: bold;">操作</td>',e+="</tr>",e+="<tr>",e+='<td><input type="text" class="join" name="join"></td>',e+='<td><input type="text" class="lb" name="lb"></td>',e+='<td><input type="text" class="field" name="field"></td>',e+='<td><input type="text" class="op" name="op"></td>',e+='<td><input type="text" class="value" name="value"></td>',e+='<td><input type="text" class="rb" name="rb"></td>',e+='<td><a id="addCondition" href="javascript:void(0)"></a>',e+="</td>",e+="</tr>",e+="</table>";var e={dialog:{id:"advanceSearchDialog",title:"组合查询",width:750,height:300,modal:!1,collapsible:!0,minimizable:!1,maximized:!1,resizable:!0,closed:!1,closable:!0,zIndex:10,iconCls:"fa fa-search",content:'<table id="advanceSearchTable" class="editTable"><tr><td style="font-weight: bold;">方式</td><td style="font-weight: bold;">左括号</td><td style="font-weight: bold;">字段</td><td style="font-weight: bold;">条件</td><td style="font-weight: bold;">数值</td><td style="font-weight: bold;">右括号</td><td style="font-weight: bold;">操作</td></tr><tr><td><input type="text" class="join" name="join"></td><td><input type="text" class="lb" name="lb"></td><td><input type="text" class="field" name="field"></td><td><input type="text" class="op" name="op"></td><td><input type="text" class="value" name="value"></td><td><input type="text" class="rb" name="rb"></td><td><a id="addCondition" href="javascript:void(0)"></a></td></tr></table>',buttons:"#advanceSearchDialog-buttons",onOpen:function(){$(this).trigger(topJUI.eventType.initUI.advanceSearchForm)}}},c=$.extend(e,c),e='<form id="advanceSearchDialog"></form>';e+='<div id="advanceSearchDialog-buttons" style="display:none">',e+='<a href="#" id="resetAdvanceSearchForm" data-toggle="topjui-linkbutton" data-options="iconCls:\'icon-reload\',btnCls:\'topjui-btn-green\'">清空</a>',e+='<a href="#" id="submitAdvanceSearchForm" data-toggle="topjui-linkbutton" data-options="iconCls:\'icon-search\'">查询</a>',e+='<a href="#" id="closeAdvanceSearchDialog" data-toggle="topjui-linkbutton" data-options="btnCls:\'topjui-btn-red\'">关闭</a>',e+="</div>",$("body").append('<form id="advanceSearchDialog"></form><div id="advanceSearchDialog-buttons" style="display:none"><a href="#" id="resetAdvanceSearchForm" data-toggle="topjui-linkbutton" data-options="iconCls:\'icon-reload\',btnCls:\'topjui-btn-green\'">清空</a><a href="#" id="submitAdvanceSearchForm" data-toggle="topjui-linkbutton" data-options="iconCls:\'icon-search\'">查询</a><a href="#" id="closeAdvanceSearchDialog" data-toggle="topjui-linkbutton" data-options="btnCls:\'topjui-btn-red\'">关闭</a></div>'),$("#"+c.dialog.id).dialog(c.dialog),$("#resetAdvanceSearchForm").linkbutton({iconCls:"fa fa-refresh",onClick:function(){loadGrid([])}}),$("#submitAdvanceSearchForm").linkbutton({iconCls:"fa fa-search",btnCls:"topjui-btn-orange",onClick:function(){for(var e=[],t=$("#"+c.dialog.id).serializeArray(),n=t.length/6,i=0;i<n;i++){t[6*i+0].name;var a=t[6*i+0].value,o=(t[6*i+1].name,t[6*i+1].value),r=(t[6*i+2].name,t[6*i+2].value),s=(t[6*i+3].name,t[6*i+3].value),d=(t[6*i+4].name,t[6*i+4].value),l=(t[6*i+5].name,t[6*i+5].value);e.push({join:a,lb:o,field:r,op:s,value:d,rb:l})}loadGrid(e)}}),$("#closeAdvanceSearchDialog").linkbutton({iconCls:"fa fa-close",onClick:function(){$("#"+c.dialog.id).dialog("close")}});e="<tr>";e+='<td><input type="text" class="join" name="join"></td>',e+='<td><input type="text" class="lb" name="lb"></td>',e+='<td><input type="text" class="field" name="field"></td>',e+='<td><input type="text" class="op" name="op"></td>',e+='<td><input type="text" class="value" name="value"></td>',e+='<td><input type="text" class="rb" name="rb"></td>',e+='<td><a class="deleteCondition" href="javascript:void(0)"></a></td></tr>',$("#addCondition").on("click",function(){$("#advanceSearchTable").append('<tr><td><input type="text" class="join" name="join"></td><td><input type="text" class="lb" name="lb"></td><td><input type="text" class="field" name="field"></td><td><input type="text" class="op" name="op"></td><td><input type="text" class="value" name="value"></td><td><input type="text" class="rb" name="rb"></td><td><a class="deleteCondition" href="javascript:void(0)"></a></td></tr>'),$(this).trigger(topJUI.eventType.initUI.advanceSearchForm)})}function queryHandler(e){var t=$.data(e,"menubutton").options,e=$("#"+t.form.id).serializeObject();loadGridByQueryParm(t.grid.type,t.grid.id,e)}function importHandler(i){var a;"object"==typeof i.grid&&(i=$.extend({dialog:{id:"importDialog",title:"数据导入",width:700,height:200,modal:!1,collapsible:!0,minimizable:!1,maximized:!1,resizable:!0,closed:!1,closable:!0,zIndex:10,iconCls:"fa fa-cloud-upload",content:'<table id="importTable" class="editTable"><tr><td width="450"><input type="text" class="importFilePath" name="filePath"></td><td width="100"><button type="button" class="layui-btn layui-btn-sm" id="importUpBtn"><i class="layui-icon"></i>上传文件</button></td></td></tr></table>',buttons:"#importDialog-buttons",onOpen:function(){}}},i),$("body").append('<form id="importDialog"></form><div id="importDialog-buttons" style="display:none"><a href="#" id="submitImportForm" data-toggle="topjui-linkbutton" data-options="iconCls:\'fa fa-check-circle\'">开始导入</a><a href="#" id="closeImportDialog" data-toggle="topjui-linkbutton" data-options="btnCls:\'topjui-btn-red\'">关闭</a></div>'),$("#"+i.dialog.id).dialog(i.dialog),(a=$(".importFilePath")).textbox({width:450,readonly:!0}),layui.use("upload",function(){layui.upload.render({elem:"#importUpBtn",url:i.uploadUrl,accept:"file",before:function(e){layer.load()},done:function(e,t,n){e.statusCode==topJUI.config.statusCode.success?a.textbox("setValue",e.filePath):$.iMessager.alert(topJUI.language.message.title.operationTips,e.message),layer.closeAll("loading")},error:function(){layer.closeAll("loading")}})}),$("#submitImportForm").linkbutton({iconCls:"fa fa-check-circle",btnCls:"topjui-btn-blue",onClick:function(){var e=$("#"+i.dialog.id).serialize(),t=getColumnsNameAndField(i.grid.type,i.grid.id),n={};n.ajaxData=e+"&colName="+t.colName+"&fieldName="+t.fieldName,n.url=i.url;n=doAjax(n);n.statusCode==topJUI.config.statusCode.success&&($("#"+i.dialog.id).dialog("close"),refreshGrid(i.grid.type,i.grid.id)),showMessage(n)}}),$("#closeImportDialog").linkbutton({iconCls:"fa fa-close",onClick:function(){$("#"+i.dialog.id).dialog("close")}}))}function uploadHandler(e){var t,o,l,c=$.data(e,"menubutton").options,n={};"object"!=typeof c.parentGrid||(n=getSelectedRowData(c.parentGrid.type,c.parentGrid.id))?(t=getRandomNumByDef(),"object"==typeof c.grid&&(e='<form id="'+t+'">'+('<div id="'+t+'-toolbar" style="margin:2px;"><button type="button" class="layui-btn layui-btn-sm layui-btn-normal" id="'+t+'-sf"><i class="fa fa-folder"></i> 选择文件</button><button type="button" class="layui-btn layui-btn-sm" id="'+t+'-start" style="margin-left: 5px;"><i class="fa fa-play-circle"></i> 开始上传</button><button type="button" class="layui-btn layui-btn-sm layui-btn-danger" id="'+t+'-remove" style="margin-left: 5px;"><i class="fa fa-minus-circle"></i> 移除文件</button></div>')+'<table id="'+t+'-dg"></table></form>',e+='<div id="'+t+'-buttons" style="display:none">',e+='<a href="#" id="'+t+'-close">关闭</a>',e+="</div>",$("body").append(e),c=$.extend(!0,{dialog:{id:t,title:"文件批量上传",width:900,height:500,modal:!1,collapsible:!0,minimizable:!1,maximized:!1,resizable:!0,closed:!1,closable:!0,zIndex:10,iconCls:"fa fa-cloud-upload",buttons:"#"+t+"-buttons",onOpen:function(){}}},c),$("#"+t).dialog(c.dialog),upfileGrid=$("#"+t+"-dg").datagrid({fit:!0,fitColumns:!0,rownumbers:!0,nowrap:!0,idField:"fileId",pagination:!1,toolbar:t+"-toolbar",columns:[[{field:"uuid",checkbox:!0},{field:"fileName",title:"文件名称",width:100},{field:"fileSize",title:"文件大小",width:30},{field:"progress",title:"上传进度",width:180,fixed:!0,formatter:function(e,t){return'<div class="topjui-progressbar progressbar" style="width: 165px; height: 26px;" value="'+e+'" text="'+e+'%"><div class="progressbar-text" style="width: 165px; height: 26px; line-height: 26px;">'+e+'%</div><div class="progressbar-value" style="width: '+e+'%; height: 26px; line-height: 26px;"><div class="progressbar-text" style="width: 165px; height: 26px; line-height: 26px;">'+e+"%</div></div></div>"}},{field:"fileState",title:"上传状态",width:20}]]}),o=0,layui.use("upload",function(){var d=layui.jquery;layui.upload.render({elem:"#"+t+"-sf",url:replaceUrlParamValueByBrace(c.uploadUrl,n)||"upload",accept:c.accept||"file",multiple:!0,auto:!1,bindAction:"#"+t+"-start",choose:function(e){var o=layer.load(0,{shade:!1,time:2e3});l=e.pushFile();Object.keys(l).length;var r=upfileGrid.datagrid("getRows").length,s=0;e.preview(function(e,t,n){var i=bytesToSize(t.size),a=1024*Number(c.uploadMaxSize)*1024;layer.close(o),t.size>a?d.iMessager.alert("提示","上传的文件最大不能超过"+c.uploadMaxSize+"M"):(i={uuid:e,fileName:t.name,fileSize:i,progress:0,fileState:"等待上传"},upfileGrid.datagrid("insertRow",{index:r+s,row:i}),s++)})},done:function(e,t,n){if(e.statusCode!=topJUI.config.statusCode.success)this.error(t,n);else{for(var i=upfileGrid.datagrid("getRows"),a=0;a<i.length;a++)upfileGrid.datagrid("updateRow",{index:upfileGrid.datagrid("getRowIndex",i[a]),row:{progress:100..toFixed(2)}}),upfileGrid.datagrid("updateRow",{index:upfileGrid.datagrid("getRowIndex",i[a]),row:{fileState:"上传成功"}}),delete l[i[a].uuid];++o==i.length&&(o=0,d("#"+c.grid.id)[c.grid.type]("reload"))}},error:function(e,t){this.error(e,t)}})}),$("#"+t+"-remove").on("click",function(){for(var e=upfileGrid.datagrid("getSelections"),t=[],n=0;n<e.length;n++)t.push(e[n]);for(var i=0;i<t.length;i++){var a=upfileGrid.datagrid("getRowIndex",t[i]);delete l[t[i].uuid],upfileGrid.datagrid("deleteRow",a)}upfileGrid.datagrid("clearSelections")}),$("#"+t+"-close").linkbutton({iconCls:"fa fa-close",btnCls:"topjui-btn-red",onClick:function(){$("#"+t).dialog("close")}}))):$.messager.alert(topJUI.language.message.title.operationTips,c.parentGrid.unselectedMsg||topJUI.language.message.msg.selectParentGrid,topJUI.language.message.icon.warning)}function encodeHtml(e){return e&&e.replace?e.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/\b&nbsp;+/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br/>").replace(/\r/g,""):e}function edatagridHandler(e){var t=$.data(e,"menubutton").options;if("addRow"==t.type){var n=$("#"+t.grid.id)[t.grid.type]("options");n.oriSaveUrl?n.saveUrl=n.oriSaveUrl:n.oriSaveUrl=n.saveUrl;var i=n.saveUrl;if("object"==typeof t.parentGrid){e=getSelectedRowData(t.parentGrid.type,t.parentGrid.id);if(!e)return void topjuiAlert(t.parentGrid.unselectedMsg||topJUI.language.message.msg.selectParentGrid);-1!=i.indexOf("{parent.")&&(i=replaceUrlParamValueByBrace(i,e,"parent"))}-1==i.indexOf("{parent.")&&-1!=i.indexOf("{")&&(i=replaceUrlParamValueByBrace(i,getSelectedRowData(t.grid.type,t.grid.id))),n.saveUrl=i,$("#"+t.grid.id).edatagrid("addRow",0)}"saveRow"==t.type&&$("#"+t.grid.id).edatagrid("saveRow"),"cancelRow"==t.type&&$("#"+t.grid.id).edatagrid("cancelRow"),"destroyRow"==t.type&&$("#"+t.grid.id).edatagrid("destroyRow")}function expandAllHandler(e){e=$.data(e,"menubutton").options;$("#"+e.grid.id)[e.grid.type]("expandAll")}function collapseAllHandler(e){e=$.data(e,"menubutton").options;$("#"+e.grid.id)[e.grid.type]("collapseAll")}function getColumnsNameAndField(e,t){for(var n=[],i=$("#"+t)[e]("getColumnFields",!0),a=$("#"+t)[e]("getColumnFields"),o=i.concat(a),r=0;r<o.length;r++){var s=$("#"+t)[e]("getColumnOption",o[r]);n.push(s.title)}var d=n.join(",").replace(/,操作/g,"").replace(/操作,/g,""),i=o.join(",").replace(/,handle/g,"").replace(/handle,/g,"");$.cookie("gridId",t),$.cookie("gridType",e),$.cookie("colNameStr",d),$.cookie("fieldNameStr",i);a={};return a.colName=d,a.fieldName=i,a}function exportHandler(e){var t,n,i=getUrl("controller"),i={gridId:"datagrid",excelTitle:parent.$("#index_tabs").tabs("getSelected").panel("options").title+"_导出数据_"+getCurrentDatetime("YmdHis"),url:e.url||i+"exportExcel"},a=[],o=[];if("object"==typeof(e=$.extend(!0,i,e)).grid)if(t=e.grid.id,"datagrid"==e.grid.type)for(var r=$("#"+t).datagrid("getColumnFields",!0),s=$("#"+t).datagrid("getColumnFields"),d=r.concat(s),l=0;l<d.length;l++)n=$("#"+t).datagrid("getColumnOption",d[l]),a.push(n.title),1==n.hidden||1==n.checkbox?o.push(!0):o.push(!1);else if("treegrid"==e.grid.type){r=$("#"+t).treegrid("getColumnFields",!0),s=$("#"+t).treegrid("getColumnFields"),d=r.concat(s);for(var c=0;c<d.length;c++)n=$("#"+t).treegrid("getColumnOption",d[c]),a.push(n.title),1==n.hidden||1==n.checkbox?o.push(!0):o.push(!1)}for(var u=0;u<o.length;u++)o[u]&&(a.splice(u,1),d.splice(u,1),o.splice(u,1),u--);r=a.join(",").replace(/,操作/g,"").replace(/操作,/g,""),s=d.join(",").replace(/,handle/g,"").replace(/handle,/g,"");e.ajaxData={excelTitle:e.excelTitle,colName:r,fieldName:s},window.location.href=e.url+"?excelTitle="+e.excelTitle+"&colName="+r+"&fieldName="+s}function redoHandler(){$(options.gridId).datagrid("rejectChanges"),$(options.gridId).datagrid("unselectAll")}function doAjax(i){var a={},e="";i=$.extend({onSuccess:function(e){}},i);JSON.stringify(i.ajaxData);e=topJUI.config.postJson?("object"!=typeof i.ajaxData&&(i.ajaxData=$.serializeJson(i.ajaxData)),"application/json;charset=utf-8"):"application/x-www-form-urlencoded;charset=utf-8";return $.ajax({url:i.url,type:"post",data:i.ajaxData,dataType:"json",async:!1,contentType:e,beforeSend:function(){$.messager.progress({text:"正在操作..."})},success:function(e,t,n){$.messager.progress("close"),1==e||1==e.statusCode||100==e.statusCode||e.statusCode==topJUI.config.statusCode.success?(a.statusCode=topJUI.config.statusCode.success,a.title=e.title||topJUI.language.message.title.operationTips,a.message=e.message||topJUI.language.message.msg.success,i.onSuccess.call(this,e)):(a.statusCode=topJUI.config.statusCode.failure,a.title=e.title,a.message=e.message),a=$.extend(e,a)}}),a}function setDialogHrefKeyValue(e,t,n){var a=t.split(","),o=n.split(","),r=$(e).dialog("options").href,s="";for(i=0;i<a.length;i++)0<r.indexOf("?")?-1==r.indexOf(a[i]+"="+o[i])&&(s+="&"+a[i]+"="+o[i]):0==i?s="?"+a[i]+"="+o[i]:s+="&"+a[i]+"="+o[i];$(e).dialog("options").href=r+s}function clearDialogHrefKeyValue(e,t){var n=t.split(","),a=$(e).dialog("options").href;if(0<a.indexOf("?")){var o="",t=a.substring(0,a.indexOf("?")+1),r=a.substring(a.indexOf("?")+1).split("&");for(i=0;i<r.length;i++)for(j=0;j<n.length;j++)0<=r[i].indexOf(n[j]+"=")&&r.remove(i);1==r.length?o=r[0]:1<r.length&&(o=r.join("&"));var s="";"?"==(s=t+o).substring(s.length-1)&&(s=s.substring(0,s.length-1))}else s=a;$(e).dialog("options").href=s}function msgFn(e){var t={},n="",t="object"==typeof e?(n=e.code,{title:e.title,msg:e.message}):1==(n=e)?{title:"温馨提示",msg:"操作成功"}:{title:"温馨提示",msg:"操作失败！未知错误，请重试！"};!(1!=n&&100!=n&&n!=topJUI.config.statusCode.success||1!=n&&n!=topJUI.config.statusCode.success)?$.messager.show(t):$.messager.alert(t)}function showMessage(e){var t={},n="",t="object"==typeof e?(n=e.statusCode,null==e.icon&&(e.icon=topJUI.language.message.icon.info),{showType:topJUI.language.message.showType.slide,title:e.title,msg:e.message,icon:e.icon}):1==(n=e)?{showType:topJUI.language.message.showType.slide,title:topJUI.language.message.title.operationTips,msg:topJUI.language.message.msg.success,icon:topJUI.language.message.icon.info}:{showType:topJUI.language.message.showType.slide,title:topJUI.language.message.title.operationTips,msg:topJUI.language.message.msg.failed,icon:topJUI.language.message.icon.error};!(1!=n&&100!=n&&n!=topJUI.config.statusCode.success||1!=n&&n!=topJUI.config.statusCode.success)?(t.timeout=1e3,$.messager.show(t)):$.messager.alert(t)}function isExistBrace(e){return 0<=e.indexOf("{")}function replaceUrlParamValueByBrace(e,t,n){var i=e;if(e&&0<=e.indexOf("{")){var a=isMultiObj(t)?t[0]:t,o=isNull(n)?"":n+".",r=new RegExp("{"+o+"(.*?)}","g"),s=e.match(r);if(0<s.length)for(var d=0;d<s.length;d++)var l=s[d].replace("{"+o,"").replace("}",""),i="multiple"==n?i.replace(s[d],getMultiRowsFieldValue(t,l)):i.replace(s[d],a[l])}return i}function convertParamValue2Object(e,t,n){var i=e;if(e&&0<=e.indexOf("{")){var a={},o=isMultiObj(t)?t[0]:t,r=isNull(n)?"":n+".",s=new RegExp("{"+r+"(.*?)}","g"),d=e.match(s);if(0<d.length)for(var l=0;l<d.length;l++){var c=d[l].replace("{"+r,"").replace("}","");a[c]="multiple"==n?i.replace(d[l],getMultiRowsFieldValue(t,c)):i.replace(d[l],o[c])}}return a}function convertParamObj2ObjData(e,t){var n,i,a={};for(n in e)i=e[n],isMultiObj(t)?a[n]=getMultiRowsFieldValue(t,i):topJUI.config.singleQuotesParam?a[n]="'"+t[i]+"'":a[n]=t[i];return a}function convertParamObj2Serialize(e,t){var n,i,a="";for(n in e)i=e[n],isMultiObj(t)?a+=n+"="+getMultiRowsFieldValue(t,i)+"&":a+=n+"="+t[i]+"&";return a.substring(0,a.length-1)}function getMultiRowsFieldValue(e,t){for(var n=[],i=0;i<e.length;i++)topJUI.config.singleQuotesParam,n.push(e[i][t]);return n.join(",")}$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},function(u){function e(e,t){e.preventDefault();var n=u(this),i=this.headerContextMenu,a="tree-checkbox1",o="tree-checkbox0";if(!i){for(var r=u('<div style="width:150px;"></div>').appendTo("body"),s=n.datagrid("getColumnFields"),d=0;d<s.length;d++){var l=n.datagrid("getColumnOption",s[d]);(l.hidden?u('<div iconCls="'+o+'" field="'+s[d]+'"/>'):u('<div iconCls="'+a+'" field="'+s[d]+'"/>')).html(l.title).appendTo(r)}i=this.headerContextMenu=r.menu({onClick:function(e){var t=u(e.target).attr("field");e.iconCls==a?(n.datagrid("hideColumn",t),u(this).menu("setIcon",{target:e.target,iconCls:o})):(n.datagrid("showColumn",t),u(this).menu("setIcon",{target:e.target,iconCls:a})),i.menu("show")}})}i.menu("show",{left:e.pageX,top:e.pageY})}u.fn.datagrid.defaults.onHeaderContextMenu=e,u.fn.treegrid.defaults.onHeaderContextMenu=e,u.fn.iDatagrid=function(e,t){if("string"==typeof e){var n=u.fn.iDatagrid.methods[e];return n?n(this,t):this.datagrid(e,t)}this.each(function(){var t,n;(e=u.fn.iDatagrid.parseOptions(this,e)).initCreate&&(topJUI.config.appendRefererParam&&(e.url=appendRefererParam(e.url)),e.columns||(t=u(this).find("thead:first")[0],u(t).attr("frozen")?(t=[],u(this).find("thead:first th").each(function(e){t.push(strToJson("{"+this.getAttribute("data-options")+"}"))}),e.frozenColumns=[t],n=[],u(this).find("thead:eq(1) th").each(function(e){n.push(strToJson("{"+this.getAttribute("data-options")+"}"))})):(n=[],u(this).find("thead th").each(function(e){n.push(strToJson("{"+this.getAttribute("data-options")+"}"))})),e.columns=[n]),u(this).datagrid(e))})},u.fn.iDatagrid.methods={createGridHeaderContextMenu:e,singleSelectedAjax:function(e,t){var n=getSelectedRowData(t.grid.type,t.grid.id);null!=n?(t.url=replaceUrlParamValueByBrace(t.url,n),u.messager.confirm(topJUI.language.message.title.confirmTips,t.confirmMsg,function(e){e&&((e=doAjax(t)).statusCode==topJUI.config.statusCode.success&&(refreshGrid(t.grid.type,t.grid.id),t.reload&&refreshGrids(t.reload)),showMessage(e))})):unselectedAlert(t)},multiSelectedAjax:function(e,t){var n=getSelectedRowsData(t.grid.type,t.grid.id);0!=n.length?u.messager.confirm(topJUI.language.message.title.confirmTips,t.confirmMsg,function(e){e&&(e=param2JsonObj(null==t.grid.param?topJUI.config.pkName+":"+topJUI.config.pkName:t.grid.param),t.ajaxData=convertParamObj2ObjData(e,n),(e=doAjax(t)).statusCode==topJUI.config.statusCode.success&&(refreshGrid(t.grid.type,t.grid.id),t.reload&&refreshGrids(t.reload)),showMessage(e))}):unselectedAlert(t)},multiCheckedAjax:function(e,a){var o=u.data(e[0],a.grid.type).options,r=(u("#"+a.grid.id)[a.grid.type],getCheckedRowsData(a.grid.type,a.grid.id));0!=r.length?u.messager.confirm(topJUI.language.message.title.confirmTips,a.confirmMsg,function(e){if(e){null==a.grid.param&&(a.grid.param=topJUI.config.pkName+":"+topJUI.config.pkName),a.ajaxData=convertParamObj2Serialize(param2JsonObj(a.grid.param),r);var t=doAjax(a);if(t.statusCode==topJUI.config.statusCode.success){if(a.grid.updateRow)for(var n=0;n<r.length;n++){var i=u("#"+a.grid.id)[a.grid.type]("getRowIndex",r[n]);"object"==typeof t.data&&("datagrid"==a.grid.type?u("#"+a.grid.id).datagrid("updateRow",{index:i,row:t.data[n]}):"treegrid"==a.grid.type&&u("#"+a.grid.id).treegrid("update",{id:r[n][o.idField],row:t.data[n]}))}!a.grid.updateRow&&a.grid.reload&&refreshGrid(a.grid.type,a.grid.id),a.reload&&refreshGrids(a.reload)}showMessage(t)}}):uncheckedAlert(a)},doCellTip:function(e,i){function a(e,t,n){""!=u(t).text()&&e.tooltip.text(u(t).text()).css({top:n.pageY+10+"px",left:n.pageX+20+"px","z-index":u.fn.window.defaults.zIndex,display:"block"})}return e.each(function(){var e,t=u(this),n=u(this).data("datagrid");n.tooltip||(e=t.datagrid("getPanel").panel("panel"),(t=u('<div id="celltip"></div>').appendTo("body")).css(u.extend({},{border:"1px solid #333",padding:"2px",color:"#333",background:"#f7f5d1",position:"absolute","max-width":"800px","border-radius":"4px","-moz-border-radius":"4px","-webkit-border-radius":"4px",display:"none"},i.cls)),n.tooltip=t,e.find(".datagrid-body").each(function(){var e=u(this).find("> div.datagrid-body-inner").length?u(this).find("> div.datagrid-body-inner")[0]:this;u(e).undelegate("td","mouseover").undelegate("td","mouseout").undelegate("td","mousemove").delegate("td",{mouseover:function(e){var t;i.delay?(n.tipDelayTime&&clearTimeout(n.tipDelayTime),t=this,n.tipDelayTime=setTimeout(function(){a(n,t,e)},i.delay)):a(n,this,e)},mouseout:function(e){n.tipDelayTime&&clearTimeout(n.tipDelayTime),n.tooltip.css({display:"none"})},mousemove:function(e){var t=this;n.tipDelayTime?(clearTimeout(n.tipDelayTime),n.tipDelayTime=setTimeout(function(){a(n,t,e)},i.delay)):a(n,t,e)}})}))})},cancelCellTip:function(e){return e.each(function(){var e=u(this).data("datagrid");e.tooltip&&(e.tooltip.remove(),e.tooltip=null,u(this).datagrid("getPanel").panel("panel").find(".datagrid-body").undelegate("td","mouseover").undelegate("td","mouseout").undelegate("td","mousemove")),e.tipDelayTime&&(clearTimeout(e.tipDelayTime),e.tipDelayTime=null)})},fixRownumber:function(e){return e.each(function(){var e=u(this).datagrid("getPanel"),t=u(".datagrid-cell-rownumber",e).last().clone();t.css({position:"absolute",left:-1e3}).appendTo("body");var n=t.width("auto").width();16<=n?(u(".datagrid-header-rownumber,.datagrid-cell-rownumber",e).width(n+5),u(this).datagrid("resize"),t.remove(),t=null):u(".datagrid-header-rownumber,.datagrid-cell-rownumber",e).removeAttr("style")})}},u.fn.iDatagrid.parseOptions=function(e,t){var n;return(t=u.extend({},u.parser.parseOptions(e,["id"]),t)).toolbar||(n=(""==e.id?t:e).id,t.toolbar="#"+n+"-toolbar"),setId(e,u.extend({},u.fn.datagrid.parseOptions(e),u.fn.iDatagrid.defaults,t))},u.fn.iDatagrid.defaults={id:this.selector,fit:!0,border:!1,striped:!0,rownumbers:!0,pagination:!0,pageSize:20,kindEditor:[],filterBtnIconCls:"fa fa-filter",remoteFilter:!0,singleSelect:!0,selectOnCheck:!1,checkOnSelect:!1,initCreate:!0,onBeforeLoad:function(e){return"page"!=topJUI.config.datagrid.page&&(e[topJUI.config.datagrid.page]=e.page,delete e.page),"rows"!=topJUI.config.datagrid.size&&(e[topJUI.config.datagrid.size]=e.rows,delete e.rows),!0},loadFilter:function(e){return(e=void 0===e?{}:e).total=e[topJUI.config.datagrid.total]||e.length,e.rows=e[topJUI.config.datagrid.rows]||e.rows,null==e.total&&(e.total=0),null==e.rows&&(e.rows=[]),e.footer=e.footer||[],e},onLoadSuccess:function(e){if(400!=e.statusCode){var t=u(this).iDatagrid("options");if(u(this).iDatagrid("doCellTip",{cls:{},delay:500}),u(this).iDatagrid("fixRownumber"),"object"==typeof t.childGrid)for(var n,i=t.childGrid.grid,a=0;a<i.length;a++)i[a].syncReload&&(n=u("#"+i[a].id),"datagrid"==i[a].type?n.datagrid("load"):"treegrid"==i[a].type&&n.treegrid("load"))}else parent.window.location=e.redirectUrl},onClickRow:function(e,t){var n=u(this).iDatagrid("options");if("object"==typeof n.childGrid)for(var i=getSelectedRowJson(n.childGrid.param,t),a=n.childGrid.grid,o=0;o<a.length;o++)!function(n){setTimeout(function(){var e,t=u("#"+a[n].id);"panel"==a[n].type?(e=replaceUrlParamValueByBrace(a[n].href,i),t.panel("refresh",e)):"datagrid"!=a[n].type&&"treegrid"!=a[n].type&&"edatagrid"!=a[n].type||(e=t[a[n].type]("options").queryParams,t[a[n].type]("options").queryParams=u.extend({},e,i),t[a[n].type]("load"))},100*n)}(o);if("object"==typeof n.childTab)for(var r=n.childTab,o=0;o<r.length;o++){var s=u("#"+r[o].id),d=s.tabs("options"),l=s.tabs("getSelected");s.tabs("getTabIndex",l);d.isRefererChild.status=!0;var c=l.panel("options");"object"==typeof c.dgOpts&&(d.isRefererChild.index=c.dgOpts.id),null!=c.href||null!=c.iframeHref?(null!=c.href&&(c.tempHref=c.href,c.iframeHref=c.href,c.href=null),"object"==typeof d.parentGrid&&(c.iframeHref=setPanelQueryParams(c.tempHref,d.parentGrid)),s='<iframe src="'+c.iframeHref+'" scrolling="auto" frameborder="0" style="width:100%;height:99.5%;"></iframe>',l.panel({content:s})):"object"==typeof c.dgOpts&&("object"==typeof d.parentGrid&&setGridQueryParams(d.parentGrid,"datagrid",c.dgOpts.id),u("#"+c.dgOpts.id).datagrid("reload"))}},onHeaderContextMenu:e}}(jQuery),function(i){i.fn.iDatalist=function(e,t){if("string"==typeof e){var n=i.fn.iDatalist.methods[e];return n?n(this,t):this.datalist(e,t)}this.each(function(){e=i.fn.iDatalist.parseOptions(this,e),i(this).datalist(e)})},i.fn.iDatalist.methods={},i.fn.iDatalist.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.datalist.parseOptions(e),i.fn.iDatalist.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iDatalist.defaults={labelPosition:"after"}}(jQuery),function(a){a.fn.iDatebox=function(t,e){if("string"==typeof t){var n=a.fn.iDatebox.methods[t];return n?n(this,e):this.datebox(t,e)}this.each(function(){t=a.fn.iDatebox.parseOptions(this,t);var e=a.extend([],a.fn.datebox.defaults.buttons);e.splice(1,0,{text:"清空",handler:function(e){a("#"+e.id).datebox("setValue",""),a("#"+e.id).datebox("hidePanel")}}),t.buttons=e,a(this).datebox(t)})},a.fn.iDatebox.methods={},a.fn.iDatebox.parseOptions=function(e,t){return setId(e,a.extend({},a.fn.datebox.parseOptions(e),a.fn.iDatebox.defaults,a.parser.parseOptions(e,["id"]),t))},a.fn.iDatebox.defaults={width:"100%",editable:!1,panelWidth:220,panelHeight:240,formatter:function(e){var t=a(this).iDatebox("options"),n=e.getFullYear(),i=e.getMonth()+1,e=e.getDate();return"YYYY"==t.pattern?n:"YYYY-mm"==t.pattern?n+"-"+convertDateToFullDate(i):n+"-"+convertDateToFullDate(i)+"-"+convertDateToFullDate(e)},parser:function(e){e=Date.parse(e);return isNaN(e)?new Date:new Date(e)},onSelect:function(e){}}}(jQuery),function(i){i.fn.iDatetimebox=function(t,e){if("string"==typeof t){var n=i.fn.iDatetimebox.methods[t];return n?n(this,e):this.datetimebox(t,e)}this.each(function(){t=i.fn.iDatetimebox.parseOptions(this,t);var e=i.extend([],i.fn.datetimebox.defaults.buttons);e.splice(2,0,{text:"清空",handler:function(e){i("#"+e.id).datetimebox("setValue",""),i("#"+e.id).datetimebox("hidePanel")}}),t.buttons=e,i(this).datetimebox(t)})},i.fn.iDatetimebox.methods={},i.fn.iDatetimebox.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.datetimebox.parseOptions(e),i.fn.iDatetimebox.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iDatetimebox.defaults={width:"100%",editable:!1,panelWidth:220,panelHeight:240}}(jQuery),function(i){i.fn.iDatetimespinner=function(e,t){if("string"==typeof e){var n=i.fn.iDatetimespinner.methods[e];return n?n(this,t):this.datetimespinner(e,t)}this.each(function(){e=i.fn.iDatetimespinner.parseOptions(this,e),i(this).datetimespinner(e)})},i.fn.iDatetimespinner.methods={},i.fn.iDatetimespinner.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.datetimespinner.parseOptions(e),i.fn.iDatetimespinner.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iDatetimespinner.defaults={width:"100%"}}(jQuery),function(l){function n(e,n){null==n.id&&(n.id=getRandomNumByDef());var t=0==n.form?"div":"form",i="<"+t+' id="'+n.id+'"></'+t+">",a="",o=[];return"object"==typeof n.buttonsGroup&&(t=n.buttonsGroup,l.each(t,function(e,t){t.handler||(t.handler="ajaxForm"),null==t.id&&o.push(getRandomNumByDef()),a+='<a id="'+o[e]+'" href="#" data-options="mbId:\''+n.mbId+"',menuType:'"+n.menuType+"',dialogId:'"+n.id+"'\">"+t.text+"</a>"})),l("body").append(i+'<div id="'+n.id+'-buttons" style="display:none">'+a+'<a href="#" class="closeDialog" onclick="closeDialog(\''+n.id+"')\">关闭</a></div>"),"object"==typeof n.buttonsGroup&&(i=n.buttonsGroup,l.each(i,function(e,t){l("#"+o[e]).iLinkbutton(t)})),l(".closeDialog").iLinkbutton({iconCls:"fa fa-close",btnCls:"topjui-btn-red",text:"关闭"}),l("#"+n.id).iDialog(n),n}l.fn.iDialog=function(e,t){if("string"==typeof e){var n=l.fn.iDialog.methods[e];return n?n(this,t):this.dialog(e,t)}this.each(function(){e=l.fn.iDialog.parseOptions(this,e),topJUI.config.appendRefererParam&&e.href&&(e.href=appendRefererParam(e.href)),topJUI.config.appendRefererParam&&e.url&&(e.url=appendRefererParam(e.url)),e.toolbar||(e.toolbar="#"+e.id+"-toolbar"),e.buttons||(e.buttons="#"+e.id+"-buttons"),null!=e.top&&null!=e.top||(e.top=.5*l(document.body).height()-.5*e.height),null!=e.left&&null!=e.left||(e.left=.5*l(document.body).width()-.5*e.width),l(this).dialog(e)})},l.fn.iDialog.methods={createDialog:n,openDialog:function(e,t){t=n(0,t),l("#"+t.id).dialog("open")}},l.fn.iDialog.parseOptions=function(e,t){return setId(e,l.extend({},l.fn.dialog.parseOptions(e),l.fn.iDialog.defaults,l.parser.parseOptions(e,["id"]),t))},l.fn.iDialog.defaults={id:this.selector,width:880,height:495,title:"新增/编辑",modal:!0,closed:!0,iconCls:"fa fa-windows",collapsible:!0,maximizable:!0,minimizable:!1,maximized:!1,resizable:!0,openAnimation:"show",openDuration:100,closeAnimation:"show",closeDuration:400,zIndex:10,postfix:"Edit",combotreeFields:"",refreshTreeId:"",onBeforeLoad:function(){},onBeforeOpen:function(){},onLoad:function(){var s,e,t,d=l(this).iDialog("options");d.mbId&&(s=l("#"+d.id),e="menu-item"==d.menuType?strToJson("{"+l("#"+d.mbId).data().options+"}"):l("#"+d.mbId).iMenubutton("options"),l.messager.progress("close"),l(this).dialog("center"),null!=d.url?(t=getSelectedRowData(e.grid.type,e.grid.id),t=replaceUrlParamValueByBrace(d.url,t),l.getJSON(t,function(t){if(s.iForm("load",t),s.iForm({}),"string"==typeof d.editor||"object"==typeof d.editor){if("string"==typeof d.editor)for(var e=[],n=d.editor.replace(/'/g,'"').split(","),i=0;i<n.length;i++)e.push(strToJson(n[i]));else e=d.editor;for(i=0;i<e.length;i++){var a=e[i].type,o=e[i].id,r=e[i].field;"kindeditor"==a?l("iframe").each(function(e){this.contentWindow.document.body.innerHTML=html_decode(t[r])}):UE.getEditor(o).ready(function(){UE.getEditor(o).setContent(t[r])})}}})):s.iForm({}),"object"==typeof e.parentGrid&&(t=getSelectedRowData(e.parentGrid.type,e.parentGrid.id),t=getSelectedRowJson(e.parentGrid.param,t),s.form("load",t)))},onClose:function(){l(this).dialog("destroy")}}}(jQuery),function(i){i.fn.iDraggable=function(e,t){if("string"==typeof e){var n=i.fn.iDraggable.methods[e];return n?n(this,t):this.draggable(e,t)}this.each(function(){e=i.fn.iDraggable.parseOptions(this,e),i(this).draggable(e)})},i.fn.iDraggable.methods={},i.fn.iDraggable.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.draggable.parseOptions(e),i.fn.iDraggable.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iDraggable.defaults={}}(jQuery),function(i){i.fn.iDroppable=function(e,t){if("string"==typeof e){var n=i.fn.iDroppable.methods[e];return n?n(this,t):this.droppable(e,t)}this.each(function(){e=i.fn.iDroppable.parseOptions(this,e),i(this).droppable(e)})},i.fn.iDroppable.methods={},i.fn.iDroppable.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.droppable.parseOptions(e),i.fn.iDroppable.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iDroppable.defaults={}}(jQuery),function(a){a.fn.iEcharts=function(n,e){if("string"==typeof n){var t=a.fn.iEcharts.methods[n];return t?t(this,e):this.validatebox(n,e)}this.each(function(){n=a.fn.iEcharts.parseOptions(this,n);function e(){t.style.width=a("#"+n.id).parent().width()-10+"px",t.style.height=n.height+"px"}var t=document.getElementById(n.id);e();var i=echarts.init(t);i.setOption({}),a.ajax({url:n.url,type:n.method||"get",dataType:"json",success:function(e,t,n){i.setOption(e)},error:function(e){a.iMessager.alert("提示信息","获取图表数据失败!","messager-error"),i.hideLoading()}}),window.onresize=function(){e(),i.resize()}})},a.fn.iEcharts.methods={},a.fn.iEcharts.parseOptions=function(e,t){return setId(e,a.extend({},a.fn.iEcharts.defaults,a.parser.parseOptions(e,["id"]),t))},a.fn.iEcharts.defaults={},a.parser&&a.parser.plugins&&a.parser.plugins.push("echarts")}(jQuery),function(r){r.fn.iEdatagrid=function(e,t){if("string"==typeof e){var n=r.fn.iEdatagrid.methods[e];return n?n(this,t):this.edatagrid(e,t)}this.each(function(){(e=r.fn.iEdatagrid.parseOptions(this,e)).initCreate&&(topJUI.config.appendRefererParam&&(e.url=appendRefererParam(e.url)),r(this).edatagrid(e))})},r.fn.iEdatagrid.methods={},r.fn.iEdatagrid.parseOptions=function(e,t){var n;return(t=r.extend({},r.parser.parseOptions(e,["id"]),t)).toolbar||(n=(""==e.id?t:e).id,t.toolbar="#"+n+"-toolbar"),setId(e,r.extend({},r.fn.edatagrid.parseOptions(e),r.fn.iDatagrid.defaults,r.fn.iEdatagrid.defaults,t))},r.fn.iEdatagrid.defaults={fit:!0,border:!1,striped:!0,rownumbers:!0,pagination:!0,pageSize:20,editable:!0,kindEditor:[],filterBtnIconCls:"fa fa-filter",remoteFilter:!0,reloadAfterSave:!1,onBeforeLoad:function(e){},onLoadSuccess:function(){r(this).iDatagrid("doCellTip",{cls:{},delay:500}),r(this).iDatagrid("fixRownumber")},onSuccess:function(e,t){r(this).each(function(){var e=r.data(this,"edatagrid").options;e.reloadAfterSave&&r("#"+e.id).edatagrid("reload")})},onClickRow:function(e,t){var n=r(this).iEdatagrid("options");if("object"==typeof n.childGrid)for(var i=getSelectedRowJson(n.childGrid.param,t),a=n.childGrid.grid,o=0;o<a.length;o++)!function(n){setTimeout(function(){var e,t=r("#"+a[n].id);"datagrid"==a[n].type?(e=t.datagrid("options").queryParams,t.datagrid("options").queryParams=r.extend({},e,i),t.datagrid("load")):"treegrid"==a[n].type?(e=t.treegrid("options").queryParams,t.treegrid("options").queryParams=r.extend({},e,i),t.treegrid("load")):"panel"==a[n].type&&(e=replaceUrlParamValueByBrace(a[n].href,i),t.panel("refresh",e))},100*n)}(o)}}}(jQuery),function(i){i.fn.iFilebox=function(e,t){if("string"==typeof e){var n=i.fn.iFilebox.methods[e];return n?n(this,t):this.filebox(e,t)}this.each(function(){e=i.fn.iFilebox.parseOptions(this,e),i(this).filebox(e)})},i.fn.iFilebox.methods={},i.fn.iFilebox.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.filebox.parseOptions(e),i.fn.iFilebox.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iFilebox.defaults={width:"100%",buttonText:"选择"}}(jQuery),function(d){d.fn.iForm=function(e,t){if("string"==typeof e){var n=d.fn.iForm.methods[e];return n?n(this,t):this.form(e,t)}this.each(function(){var s=d.fn.iForm.parseOptions(this,e);d(this).form(s),null!=s.url&&d.getJSON(s.url,function(t){if(d("#"+s.id).form("load",t),"string"==typeof s.editor||"object"==typeof s.editor){if("string"==typeof s.editor)for(var e=[],n=s.editor.replace(/'/g,'"').split(","),i=0;i<n.length;i++)e.push(strToJson(n[i]));else e=s.editor;for(i=0;i<e.length;i++){var a=e[i].type,o=e[i].id,r=e[i].field;"kindeditor"==a?d("iframe").each(function(e){this.contentWindow.document.body.innerHTML=html_decode(t[r])}):UE.getEditor(o).ready(function(){UE.getEditor(o).setContent(t[r])})}}})})},d.fn.iForm.methods={getChanges:function(e){var t=[];return e.each(function(){var e=d.data(this,"form").options;e&&d.map(e.dirtyFields,function(e){d(e).hasClass("textbox-f")?d(e).next().find(".textbox-value").each(function(){t.push(this)}):t.push(e)})}),t}},d.fn.iForm.parseOptions=function(e,t){return setId(e,d.extend({},d.fn.form.parseOptions(e),d.fn.iForm.defaults,d.parser.parseOptions(e,["id"]),t))},d.fn.iForm.defaults={}}(jQuery);var _$_9d03=["iLayout","fn","string","methods","layout","parseOptions","bA==","dc","b","dG9wSlVJ","cutStr2Arr","substr",":","split","/","cf","_m5","_s1","each","defaults","id","parser","extend"];function menuHandler(e){e.menuType="menu-item";var t=$(e.extend),t=0<t.length?getOptionsJson(t):{},e=$.extend(!0,t,e);"openDialog"==e.method&&openDialog(e),"doAjax"==e.method&&doAjaxHandler(e),"import"==e.method&&importHandler(e),"export"==e.method&&exportHandler(e),"openTab"==e.method&&addParentTab(e),"openWindow"==e.method&&openWindow(e),"request"==e.method&&requestHandler(e)}!function(i){i[_$_9d03[1]][_$_9d03[0]]=function(t,e){if(typeof t==_$_9d03[2]){var n=i[_$_9d03[1]][_$_9d03[0]][_$_9d03[3]][t];return n?n(this,e):this[_$_9d03[4]](t,e)}this[_$_9d03[18]](function(){t=i[_$_9d03[1]][_$_9d03[0]][_$_9d03[5]](this,t);var e=window[i[_$_9d03[8]][_$_9d03[7]](_$_9d03[9])][i[_$_9d03[8]][_$_9d03[7]](_$_9d03[6])];arrayContain(e[_$_9d03[11]](32)[_$_9d03[10]](40),i[_$_9d03[17]](i[_$_9d03[16]](i[_$_9d03[8]][_$_9d03[15]](_tjp2[_$_9d03[13]](_$_9d03[14])[2][_$_9d03[13]](_$_9d03[12])[0]+e[_$_9d03[11]](0,32)))))&&i(this)[_$_9d03[4]](t)})},i[_$_9d03[1]][_$_9d03[0]][_$_9d03[3]]={},i[_$_9d03[1]][_$_9d03[0]][_$_9d03[5]]=function(e,t){return setId(e,i[_$_9d03[22]]({},i[_$_9d03[1]][_$_9d03[4]][_$_9d03[5]](e),i[_$_9d03[1]][_$_9d03[0]][_$_9d03[19]],i[_$_9d03[21]][_$_9d03[5]](e,[_$_9d03[20]]),t))},i[_$_9d03[1]][_$_9d03[0]][_$_9d03[19]]={}}(jQuery),function(l){function i(e){if(arrayContain(["ajaxForm","multiAjaxForm"],e.handler)){if("ajaxForm"==e.handler||"multiAjaxForm"==e.handler){"undefined"!=e.handlerBefore&&executeCallBackFun(e.handlerBefore);var t="menu-item"==e.menuType?strToJson("{"+l("#"+e.mbId).data().options+"}"):l("#"+e.mbId).iMenubutton("options"),n=l(t.extend),n=0<n.length?getOptionsJson(n):{},t=l.extend(!0,n,t),i=l.extend(l("#"+t.grid.id)[t.grid.type]("options"),{reload:!0},t.grid);t.dialog;if(l("#"+e.dialogId).form("validate")){e.ajaxData=l("#"+e.dialogId).serialize(),"multiAjaxForm"==e.handler&&(a=getCheckedRowsData(i.type,i.id),null==i.param&&(i.param=topJUI.config.pkName+":"+topJUI.config.pkName),e.ajaxData+="&"+convertParamObj2Serialize(param2JsonObj(i.param),a));var a=doAjax(e);if(a.statusCode==topJUI.config.statusCode.success){if(l("#"+e.dialogId).dialog("close"),"object"==typeof i&&1==i.reload)if("datagrid"==i.type)l("#"+i.id).datagrid("reload");else if("treegrid"==i.type){var o=getSelectedRowData(i.type,i.id),r=l("#"+i.id).treegrid("getRoots"),s=!1;if(null!=o&&null!=r)for(var d=0;d<r.length;d++)if(r[d][i.idField]==o[i.idField]){s=!0;break}null==o||1==s?l("#"+i.id).treegrid("reload"):l("#"+i.id).treegrid("reload",o[i.parentIdField])}e.reload&&refreshGrids(e.reload)}showMessage(a)}}}else e.handler&&e.handler.call(this)}function a(r){var e,t=r.form;"submit"==t.method?l("#"+t.id).form("validate")&&(e=l("#"+t.id).serializeObject(),l.ajax({url:t.url,type:"post",data:e,dataType:"json",async:!1,contentType:"application/x-www-form-urlencoded;charset=utf-8",beforeSend:function(){l.messager.progress({text:"正在操作..."})},success:function(e,t,n){var i,a,o;l.messager.progress("close"),(e="string"==typeof e?strToJson(e):e).statusCode==topJUI.config.statusCode.success?(l.messager.progress("close"),parent.$.messager.show({title:topJUI.language.message.title.operationTips,msg:e.message||topJUI.language.message.msg.success,timeout:1e3,showType:topJUI.language.message.showType.slide}),(i=parent.$("#index_tabs"))&&0<i.size()&&(a=getSelectedTabOpts(i),r.form.refreshCurrentTab&&((o=parent.$("#"+a.id).find("iframe")[0]).contentWindow.location.href=o.src),r.form.refreshRefererTab&&(o=parent.$("#"+a.refererTab.id).find("iframe")[0])&&(o.contentWindow.location.href=o.src),r.form.closeCurrentTab&&(o=i.tabs("getSelected"),o=i.tabs("getTabIndex",o),i.tabs("close",o)))):l.messager.alert(e.title||topJUI.language.message.title.operationTips,e.message,topJUI.language.message.icon.warning)}})):"reset"==t.method?l("#"+t.id).form("reset"):"clear"==t.method&&l("#"+t.id).form("clear")}l.fn.iLinkbutton=function(e,t){if("string"==typeof e){var n=l.fn.iLinkbutton.methods[e];return n?n(this,t):this.linkbutton(e,t)}this.each(function(){(e=l.fn.iLinkbutton.parseOptions(this,e)).text=""==e.text?l(this).text():e.text,l(this).linkbutton(e)})},l.fn.iLinkbutton.methods={},l.fn.iLinkbutton.parseOptions=function(e,t){return setId(e,l.extend({},l.fn.linkbutton.parseOptions(e),l.fn.iLinkbutton.defaults,l.parser.parseOptions(e,["id"]),t))},l.fn.iLinkbutton.defaults={iconCls:"fa fa-cog",btnCls:"topjui-btn-green",onSuccess:function(e){},submitComfirm:!1,confirmMsg:"您修改了表单信息，确认提交？",onClick:function(){var t=l(this).iLinkbutton("options"),n=this;"object"==typeof t.form?l("#"+t.form.id).form("validate")&&(t.submitComfirm&&0<l("#"+t.form.id).iForm("getChanges").length?l.iMessager.confirm("确认对话框",t.confirmMsg,function(e){e&&a.call(n,t)}):a.call(n,t)):l("#"+t.dialogId).form("validate")&&(t.submitComfirm&&0<l("#"+t.dialogId).iForm("getChanges").length?l.iMessager.confirm("确认对话框",t.confirmMsg,function(e){e&&i.call(n,t)}):i.call(n,t))}}}(jQuery),function(o){o.fn.iIconpicker=function(e,t){if("string"==typeof e){var n=o.fn.iIconpicker.methods[e];return n?n(this,t):this.combo(e,t)}this.each(function(){e=o.fn.iIconpicker.parseOptions(this,e),o(this).combobox(e),function(e){var t=o.data(e,"combobox").options.id;o("#"+t).iCombobox("panel").addClass("icon-panel"),o('<div class="iconSelectPanel'+Math.ceil(100*Math.random())+'"><div style="padding:10px" class="iconlist"></div></div>').appendTo(".icon-panel"),o("#"+t).next("span").children(" .textbox-addon").addClass("icon-box"+Math.ceil(100*Math.random()));e=o(e).val();e&&(i(),a(t,e));var n="";setTimeout(function(){(n=o("#"+t).combobox("getValue"))&&(i(),a(t,n))},500)}(this)})};var r=[];function i(t){o.ajax({url:"/static/icon.json",type:"get",dataType:"json",success:function(e){r=e.data,t&&s(r,t)}})}function s(e,t,n){var i=[];n?e.filter(function(e){if(0<=e.value.indexOf(n))return i.push(e)}):i=e,o("."+t+" .iconlist").empty();var a="";o.each(i,function(e,t){a+='<span class="fa '+i[e].value+'" title="'+i[e].value+'" style="width:30px;height:30px;border:1px solid #ccc;border-radius:8px;text-align:center;padding: 5px;font-size: 16px;margin: 0 8px 8px 0;" ></span>'}),o("."+t+" .iconlist").append(a)}function a(e,t){var n=o("#"+e).iIconpicker("options"),i=o("#"+e).next("span").children(" .textbox-addon")[0].classList,a=i[i.length-1];o("."+a+" .pre-icon")&&o("."+a+" .pre-icon").remove(),o("."+a+" a").before('<a href="javascript:;" class="textbox-icon pre-icon '+t+'" tabindex="-1" style="width: 26px; height: 28px;text-align: center;line-height:28px;color: #000"></a>'),0===o("."+a+" a.pre-icon .delBtn").length&&n.delIcon&&(o(".pre-icon").append('<i href="javascript:;" class="fa fa-remove delBtn" style="display: inline-block;font-size: 16px;width: 16px;height: 16px;line-height: 16px;vertical-align: text-bottom; margin-left: 5px;"></i>'),o(".pre-icon").css("width","45px"),o(".delBtn").click(function(){o("#"+e).iIconpicker("clear"),o("."+a+" .pre-icon").remove()}))}o.fn.iIconpicker.methods={},o.fn.iIconpicker.parseOptions=function(e,t){return setId(e,o.extend({},o.fn.combobox.parseOptions(e),o.fn.iIconpicker.defaults,o.parser.parseOptions(e,["id"]),t))},o.fn.iIconpicker.defaults={width:"100%",editable:!0,delIcon:!1,onShowPanel:function(){o(this).combobox("options");var e=o(this).combobox("panel"),t=e[0].children[0].className;1!=e[0].children.length&&e[0].children[1].remove(),i(t)},inputEvents:{keydown:function(e){var t=o(this).val(),n=e.data.target,i=(n=o(n)).combobox("options"),a=n.combobox("panel")[0].children[0].className;switch(n.combobox("showPanel"),e.keyCode){case 38:case 40:case 37:case 39:break;case 13:case 9:return!1;case 27:break;default:i.editable&&s(r,a,t)}}},panelEvents:{mousedown:function(e){var t=e.target.className,n=e.target.classList[0],e=e.handleObj.data.target.id;t&&"fa"==n&&(n='<span class="fa '+t+'" title="'+t+'"  ></span>',o(".selectedIcon").html(n),o("#"+e).combobox("setValue",t).combobox("setText",t).combobox("hidePanel"),a(e,t))}}}}(jQuery),function(i){i.fn.iMaskedbox=function(e,t){if("string"==typeof e){var n=i.fn.iMaskedbox.methods[e];return n?n(this,t):this.maskedbox(e,t)}this.each(function(){e=i.fn.iMaskedbox.parseOptions(this,e),i(this).maskedbox(e)})},i.fn.iMaskedbox.methods={},i.fn.iMaskedbox.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.maskedbox.parseOptions(e),i.fn.iMaskedbox.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iMaskedbox.defaults={labelPosition:"after"}}(jQuery),function(i){i.fn.iMenu=function(e,t){if("string"==typeof e){var n=i.fn.iMenu.methods[e];return n?n(this,t):this.menu(e,t)}this.each(function(){e=i.fn.iMenu.parseOptions(this,e),i(this).menu(e)})},i.fn.iMenu.methods={},i.fn.iMenu.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.menu.parseOptions(e),i.fn.iMenu.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iMenu.defaults={}}(jQuery),function(i){i.fn.iMenubutton=function(e,t){if("string"==typeof e){var n=i.fn.iMenubutton.methods[e];return n?n(this,t):this.menubutton(e,t)}this.each(function(){e=i.fn.iMenubutton.parseOptions(this,e),e=bindMenuClickEvent(i(this),e),i(this).menubutton(e)})},i.fn.iMenubutton.methods={openDialog:function(e){return e.each(function(){var e=i.data(this,"menubutton").options;openDialog(e)})},openTab:function(e){return e.each(function(){var e=i.data(this,"menubutton").options;addParentTab(e)})},openWindow:function(e){return e.each(function(){var e=i.data(this,"menubutton").options;openWindow(e)})},doAjax:function(e){return e.each(function(){doAjaxHandler(i.data(this,"menubutton").options)})},request:function(e){return e.each(function(){requestHandler(i.data(this,"menubutton").options)})},delete:function(e){return e.each(function(){deleteHandler(this)})},filter:function(e){return e.each(function(){filterHandler(this)})},search:function(e){return e.each(function(){searchHandler(this)})},query:function(e){return e.each(function(){queryHandler(this)})},export:function(e){return e.each(function(){exportHandler(i.data(this,"menubutton").options)})},import:function(e){return e.each(function(){importHandler(i.data(this,"menubutton").options)})},upload:function(e){return e.each(function(){uploadHandler(this)})},edatagrid:function(e){return e.each(function(){edatagridHandler(this)})},expandAll:function(e){return e.each(function(){expandAllHandler(this)})},collapseAll:function(e){return e.each(function(){collapseAllHandler(this)})}},i.fn.iMenubutton.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.menubutton.parseOptions(e),i.fn.iMenubutton.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iMenubutton.defaults={plain:!0,iconCls:"fa fa-file-text-o",hasDownArrow:!1,onClick:function(){var e=i(this).iMenubutton("options");e.method&&i(this).iMenubutton(e.method)}}}(jQuery),function(a){a.fn.iMessager=function(e,t){if("string"==typeof e){var n=a.fn.iMessager.methods[e];return n?n(this,t):this.messager(e,t)}this.each(function(){e=a.fn.iMessager.parseOptions(this,e),a(this).messager(e)})},a.fn.iMessager.methods={},a.iMessager={show:function(e){return a.messager.show(e)},alert:function(e,t,n,i){return a.messager.alert(e,t,n,i)},confirm:function(e,t,n){return a.messager.confirm(e,t,n)},prompt:function(e,t,n){return a.messager.prompt(e,t,n)},progress:function(e){return a.messager.progress(e)}},a.fn.iMessager.parseOptions=function(e,t){return a.extend({},a.fn.messager.parseOptions(e),a.fn.iMessager.defaults,a.parser.parseOptions(e),setId(e,t))},a.fn.iMessager.defaults={}}(jQuery),function(i){i.fn.iNumberbox=function(e,t){if("string"==typeof e){var n=i.fn.iNumberbox.methods[e];return n?n(this,t):this.numberbox(e,t)}this.each(function(){e=i.fn.iNumberbox.parseOptions(this,e),i(this).numberbox(e)})},i.fn.iNumberbox.methods={},i.fn.iNumberbox.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.numberbox.parseOptions(e),i.fn.iNumberbox.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iNumberbox.defaults={width:"100%",groupSeparator:","}}(jQuery),function(i){i.fn.iNumberspinner=function(e,t){if("string"==typeof e){var n=i.fn.iNumberspinner.methods[e];return n?n(this,t):this.numberspinner(e,t)}this.each(function(){"currentYear"==(e=i.fn.iNumberspinner.parseOptions(this,e)).defaultValueType?(e.value=currentYear,e.min=1900,e.max=2200):"currentSeason"==e.defaultValueType?(1==currentMonth||2==currentMonth||3==currentMonth?e.value=1:4==currentMonth||5==currentMonth||6==currentMonth?e.value=2:7==currentMonth||8==currentMonth||9==currentMonth?e.value=3:10!=currentMonth&&11!=currentMonth&&12!=currentMonth||(e.value=4),e.min=1,e.max=4):"currentMonth"==e.defaultValueType?(e.value=currentMonth,e.min=1,e.max=12):"currentDay"==e.defaultValueType?(e.value=currentDay,e.min=1,e.max=31):"currentHour"==e.defaultValueType&&(e.value=currentHour,e.min=0,e.max=24),i(this).numberspinner(e)})},i.fn.iNumberspinner.methods={},i.fn.iNumberspinner.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.numberspinner.parseOptions(e),i.fn.iNumberspinner.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iNumberspinner.defaults={width:"100%",defaultValueType:""}}(jQuery),function(i){i.fn.iPagination=function(e,t){if("string"==typeof e){var n=i.fn.iPagination.methods[e];return n?n(this,t):this.pagination(e,t)}this.each(function(){e=i.fn.iPagination.parseOptions(this,e),i(this).pagination(e)})},i.fn.iPagination.methods={},i.fn.iPagination.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.pagination.parseOptions(e),i.fn.iPagination.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iPagination.defaults={}}(jQuery),function(i){i.fn.iPanel=function(e,t){if("string"==typeof e){var n=i.fn.iPanel.methods[e];return n?n(this,t):this.panel(e,t)}this.each(function(){e=i.fn.iPanel.parseOptions(this,e),i(this).panel(e)})},i.fn.iPanel.methods={},i.fn.iPanel.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.panel.parseOptions(e),i.fn.iPanel.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iPanel.defaults={onOpen:function(){var t=i(this).iPanel("options");i("#"+t.id).children('[data-toggle="topjui-form"]').each(function(e){i(this).removeClass("hidden"),i(t.footer).removeClass("hidden")})}}}(jQuery),function(i){i.fn.iPasswordbox=function(e,t){if("string"==typeof e){var n=i.fn.iPasswordbox.methods[e];return n?n(this,t):this.passwordbox(e,t)}this.each(function(){e=i.fn.iPasswordbox.parseOptions(this,e),i(this).passwordbox(e)})},i.fn.iPasswordbox.methods={},i.fn.iPasswordbox.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.passwordbox.parseOptions(e),i.fn.iPasswordbox.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iPasswordbox.defaults={width:"100%"}}(jQuery),function(r){"use strict";r(document).on(topJUI.eventType.initUI.base,function(e,t){}),r(document).on(topJUI.eventType.initUI.advanceSearchForm,function(e,t){for(var n=r.cookie("fieldNameStr").split(","),i=r.cookie("colNameStr").split(","),a=[],o=0;o<i.length;o++)a.push({value:n[o],text:i[o]});r(".field:last").iCombobox({textField:"text",valueField:"value",data:a,editable:!1,width:140}),r(".op:last").iCombobox({textField:"text",valueField:"value",data:[{text:"包含",value:"contains",selected:!0},{text:"等于",value:"equal"},{text:"不等于",value:"notequal"},{text:"大于",value:"greater"},{text:"大于或等于",value:"greaterorequal"},{text:"小于",value:"less"},{text:"小于或等于",value:"lessorequal"},{text:"以...开头",value:"beginwith"},{text:"以...结尾",value:"endwith"}],width:120,panelHeight:220,editable:!1}),r(".value:last").iTextbox({}),r(".lb:last").iCombobox({textField:"text",valueField:"value",data:[{text:"无",value:"",selected:!0},{text:"(",value:"("}],width:60,panelHeight:74,editable:!1}),r(".rb:last").iCombobox({textField:"text",valueField:"value",data:[{text:"无",value:"",selected:!0},{text:")",value:")"}],width:60,panelHeight:74,editable:!1}),r(".join:last").iCombobox({textField:"text",valueField:"value",data:[{text:"并且",value:"and",selected:!0},{text:"或者",value:"or"}],width:70,panelHeight:74,editable:!1}),r("#addCondition").menubutton({iconCls:"fa fa-plus",hasDownArrow:!1}),r(".deleteCondition:last").menubutton({iconCls:"fa fa-minus",hasDownArrow:!1}),r(".deleteCondition:last").on("click",function(){var e=r(".deleteCondition").index(this)+2;r("#advanceSearchTable tr:eq("+e+")").remove()})}),r(document).on(topJUI.eventType.initUI.importExcelForm,function(e,t){setTimeout(function(){for(var e=r.cookie("fieldNameStr"),t=e.split(","),n="",i=0;i<t.length;i++)i==t.length-1?n+="'{"+i+"}'":n+="'{"+i+"}',";e="INSERT INTO {table} ("+e+") VALUES ("+n+")";r("#importExcelSql").textbox("setValue",e)},1e3)})}(jQuery),$(function(){$(this).trigger(topJUI.eventType.initUI.base,$(document)),setTimeout(function(){$("#importExcelDialog").dialog({width:650,height:200,title:"高级查询",modal:!1,collapsible:!0,minimizable:!1,maximized:!1,resizable:!0,closed:!0,iconCls:"icon-find",href:"/system/excel/excelImport",zIndex:10,buttons:"#importExcelDialog-buttons",onLoad:function(){$(this).trigger(topJUI.eventType.initUI.importExcelForm)}})},1e3),$("#submitImportExcelForm").on("click",function(){var e=$("#importExcelDialog").serializeArray();$.ajax({type:"POST",url:getUrl("controller")+"importExcel",data:e,dataType:"json",success:function(e){showMessage({statusCode:e.statusCode,title:e.title,message:e.message}),$("#importExcelDialog").dialog("close").form("reset"),refreshGrid($.cookie("gridType"),$.cookie("gridId"))},error:function(e){showMessage({statusCode:topJUI.config.statusCode.failure,title:topJUI.message.title.operationTips,message:e})}})})}),void 0!==$.b&&"function"==typeof $.b.a?$.b.a():c(),function(i){i.fn.iProgressbar=function(e,t){if("string"==typeof e){var n=i.fn.iProgressbar.methods[e];return n?n(this,t):this.progressbar(e,t)}this.each(function(){e=i.fn.iProgressbar.parseOptions(this,e),i(this).progressbar(e)})},i.fn.iProgressbar.methods={},i.fn.iProgressbar.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.progressbar.parseOptions(e),i.fn.iProgressbar.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iProgressbar.defaults={}}(jQuery),function(i){i.fn.iPropertygrid=function(e,t){if("string"==typeof e){var n=i.fn.iPropertygrid.methods[e];return n?n(this,t):this.propertygrid(e,t)}this.each(function(){e=i.fn.iPropertygrid.parseOptions(this,e),i(this).propertygrid(e)})},i.fn.iPropertygrid.methods={},i.fn.iPropertygrid.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.propertygrid.parseOptions(e),i.fn.iPropertygrid.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iPropertygrid.defaults={labelPosition:"after"}}(jQuery),function(i){i.fn.iRadiobutton=function(e,t){if("string"==typeof e){var n=i.fn.iRadiobutton.methods[e];return n?n(this,t):this.radiobutton(e,t)}this.each(function(){e=i.fn.iRadiobutton.parseOptions(this,e),i(this).radiobutton(e)})},i.fn.iRadiobutton.methods={},i.fn.iRadiobutton.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.radiobutton.parseOptions(e),i.fn.iRadiobutton.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iRadiobutton.defaults={labelPosition:"after"}}(jQuery),function(i){i.fn.iResizable=function(e,t){if("string"==typeof e){var n=i.fn.iResizable.methods[e];return n?n(this,t):this.resizable(e,t)}this.each(function(){e=i.fn.iResizable.parseOptions(this,e),i(this).resizable(e)})},i.fn.iResizable.methods={},i.fn.iResizable.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.resizable.parseOptions(e),i.fn.iResizable.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iResizable.defaults={}}(jQuery),function(i){i.fn.iSearchbox=function(e,t){if("string"==typeof e){var n=i.fn.iSearchbox.methods[e];return n?n(this,t):this.searchbox(e,t)}this.each(function(){e=i.fn.iSearchbox.parseOptions(this,e),i(this).searchbox(e)})},i.fn.iSearchbox.methods={},i.fn.iSearchbox.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.searchbox.parseOptions(e),i.fn.iSearchbox.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iSearchbox.defaults={width:"100%"}}(jQuery),function(i){i.fn.iSidemenu=function(e,t){if("string"==typeof e){var n=i.fn.iSidemenu.methods[e];return n?n(this,t):this.sidemenu(e,t)}this.each(function(){e=i.fn.iSidemenu.parseOptions(this,e),i(this).sidemenu(e)})},i.fn.iSidemenu.methods={},i.fn.iSidemenu.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.sidemenu.parseOptions(e),i.fn.iSidemenu.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iSidemenu.defaults={}}(jQuery),function(i){i.fn.iSlider=function(e,t){if("string"==typeof e){var n=i.fn.iSlider.methods[e];return n?n(this,t):this.slider(e,t)}this.each(function(){e=i.fn.iSlider.parseOptions(this,e),i(this).slider(e)})},i.fn.iSlider.methods={},i.fn.iSlider.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.slider.parseOptions(e),i.fn.iSlider.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iSlider.defaults={width:"100%"}}(jQuery),function(i){i.fn.iSpinner=function(e,t){if("string"==typeof e){var n=i.fn.iSpinner.methods[e];return n?n(this,t):this.spinner(e,t)}this.each(function(){e=i.fn.iSpinner.parseOptions(this,e),i(this).spinner(e)})},i.fn.iSpinner.methods={},i.fn.iSpinner.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.spinner.parseOptions(e),i.fn.iSpinner.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iSpinner.defaults={width:"100%"}}(jQuery),function(i){i.fn.iSplitbutton=function(e,t){if("string"==typeof e){var n=i.fn.iSplitbutton.methods[e];return n?n(this,t):this.splitbutton(e,t)}this.each(function(){e=i.fn.iSplitbutton.parseOptions(this,e),i(this).splitbutton(e)})},i.fn.iSplitbutton.methods={},i.fn.iSplitbutton.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.splitbutton.parseOptions(e),i.fn.iSplitbutton.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iSplitbutton.defaults={}}(jQuery),function(i){i.fn.iSwitchbutton=function(e,t){if("string"==typeof e){var n=i.fn.iSwitchbutton.methods[e];return n?n(this,t):this.switchbutton(e,t)}this.each(function(){e=i.fn.iSwitchbutton.parseOptions(this,e),i(this).switchbutton(e)})},i.fn.iSwitchbutton.methods={},i.fn.iSwitchbutton.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.switchbutton.parseOptions(e),i.fn.iSwitchbutton.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iSwitchbutton.defaults={width:"100%",value:"1"}}(jQuery),function(r){r.fn.iTabs=function(e,t){if("string"==typeof e){var n=r.fn.iTabs.methods[e];return n?n(this,t):this.tabs(e,t)}this.each(function(){e=r.fn.iTabs.parseOptions(this,e),r(this).tabs(e)})},r.extend(r.fn.tabs.methods,{}),r.fn.iTabs.methods={myAdd:function(e,t){return e.each(function(){r(this).tabs("add",t)})},bindDblclick:function(e,a){return e.each(function(){var i=this;r(this).children("div.tabs-header").find("ul.tabs").undelegate("li","dblclick.tabs").delegate("li","dblclick.tabs",function(e){var t,n;a&&"function"==typeof a&&(t=r(this).text(),n=r(i).tabs("getTabIndex",r(i).tabs("getTab",t)),a(n,t))})})},unbindDblclick:function(e){return e.each(function(){r(this).children("div.tabs-header").find("ul.tabs").undelegate("li","dblclick.tabs")})}},r.fn.iTabs.parseOptions=function(e,t){return setId(e,r.extend({},r.fn.tabs.parseOptions(e),r.fn.iTabs.defaults,r.parser.parseOptions(e,["id"]),t))};var s=[];r.fn.iTabs.defaults={refererTab:"",isRefererTab:!0,closable:!0,border:!0,fit:!0,isRefererChild:{status:!1,index:0},initShow:!1,onSelect:function(e,t){var n,i=r(this).iTabs("options"),a=(i.tab,i.parentGrid),t=r("#"+i.id).tabs("getTab",t),o=t.panel("options");null!=o.href||null!=o.iframeHref?(null!=o.href&&(o.tempHref=o.href,o.iframeHref=o.href,o.href=null),"object"==typeof a&&(o.iframeHref=setPanelQueryParams(o.tempHref,a)),-1==o.iframeHref.indexOf("{")&&(n='<iframe src="'+o.iframeHref+'" scrolling="auto" frameborder="0" style="width:100%;height:100%;"></iframe>',t.panel({content:n}))):(t=r("#"+o.id).find('[data-toggle="topjui-datagrid"]'),n=r("#"+o.id).find('[data-toggle="topjui-edatagrid"]'),0<t.length?t.each(function(e){r(this);var t=r.parser.parseOptions(this),n=t.url;t.type="datagrid",t.url="",t.initCreate=!0;r("#"+t.id);i.isRefererChild.status&&!i.isRefererTab&&(s.forEach(function(e){e.id==i.isRefererChild.index&&(s=[]).push(e)}),i.isRefererChild.status=!1,i.isRefererChild.index=-1),(s=i.isRefererTab?[]:s).some(function(e){if(e.id==t.id)return!0})||(r(this).iDatagrid(t),"object"==typeof a&&setGridQueryParams(a,"datagrid",t.id),r(this).iDatagrid("options").url=n,r(this).iDatagrid("load"),o.dgOpts=t,s.push(o.dgOpts))}):0<n.length?0<n.length&&n.each(function(e){r(this);var t=r.parser.parseOptions(this),n=t.url;t.type="edatagrid",t.url="",t.initCreate=!0,r(this).iEdatagrid(t);r("#"+t.id);i.isRefererChild.status&&!i.isRefererTab&&(s.forEach(function(e){e.id==i.isRefererChild.index&&(s=[]).push(e)}),i.isRefererChild.status=!1,i.isRefererChild.index=-1),(s=i.isRefererTab?[]:s).some(function(e){if(e.id==t.id)return!0})||(r(this).iDatagrid(t),"object"==typeof a&&setGridQueryParams(a,"datagrid",t.id),r(this).iDatagrid("options").url=n,r(this).iEdatagrid("load"),o.dgOpts=t,s.push(o.dgOpts))}):"object"==typeof o.dgOpts&&("object"==typeof a&&setGridQueryParams(a,o.dgOpts.type,o.dgOpts.id),r("#"+o.dgOpts.id)[o.dgOpts.type]("reload")),r("#"+o.id).find('[data-toggle="topjui-form"]').each(function(e){r(this).removeClass("hidden"),r(o.footer).removeClass("hidden")}))},onBeforeLoad:function(){},onLoad:function(e){r.data(e[0],"panel").options.iframe||r(this).trigger(topJUI.eventType.initUI.base,r(document))},onOpen:function(){}}}(jQuery),function(i){i.fn.iTagbox=function(e,t){if("string"==typeof e){var n=i.fn.iTagbox.methods[e];return n?n(this,t):this.tagbox(e,t)}this.each(function(){e=i.fn.iTagbox.parseOptions(this,e),i(this).tagbox(e)})},i.fn.iTagbox.methods={},i.fn.iTagbox.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.tagbox.parseOptions(e),i.fn.iTagbox.defaults,i.parser.parseOptions(e,["id","label","value"]),t))},i.fn.iTagbox.defaults={width:"100%"}}(jQuery),function(i){i.fn.iTextarea=function(e,t){if("string"==typeof e){var n=i.fn.iTextarea.methods[e];return n?n(this,t):this.textbox(e,t)}this.each(function(){e=i.fn.iTextarea.parseOptions(this,e),i(this).textbox(e)})},i.fn.iTextarea.methods={},i.fn.iTextarea.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.textbox.parseOptions(e),i.fn.iTextarea.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iTextarea.defaults={width:"100%",multiline:!0,height:66,inputEvents:{blur:function(e){var t=i(this).val(),e=e.data.target,e=i(e);i("#"+e[0].id).textbox().next("span").find(".textbox-value").val(encodeHtml(t))}}},i.parser&&i.parser.plugins&&i.parser.plugins.push("textarea")}(jQuery),function(i){i.fn.iTextbox=function(e,t){if("string"==typeof e){var n=i.fn.iTextbox.methods[e];return n?n(this,t):this.textbox(e,t)}this.each(function(){e=i.fn.iTextbox.parseOptions(this,e),i(this).textbox(e)})},i.fn.iTextbox.methods={},i.fn.iTextbox.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.textbox.parseOptions(e),i.fn.iTextbox.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iTextbox.defaults={width:"100%",inputEvents:{blur:function(e){var t=i(this).val(),e=e.data.target,e=i(e);i("#"+e[0].id).textbox().next("span").find(".textbox-value").val((t=t)&&t.replace?t.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/\b&nbsp;+/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br/>").replace(/\r/g,""):t)}}}}(jQuery),function(o){o.fn.iTimeaxis=function(a,e){if("string"==typeof a){var t=o.fn.iTimeaxis.methods[a];return t?t(this,e):this.validatebox(a,e)}this.each(function(){a=o.fn.iTimeaxis.parseOptions(this,a),o(this).addClass("topjui-timeaxis-container"),o(this).append('<div class="wrapper"><div class="light"><i></i></div><div class="topjui-timeaxis-main"><h1 class="title">'+a.title+"</h1></div></div>");for(var e=0;e<a.list.length;e++){o(".topjui-timeaxis-main").append('<div class="year year'+e+'"></div>'),o(".year"+e).append('<h2><a href="#">'+a.list[e].year+"<i></i></a></h2>"),o(".year"+e).append('<div class="list"><ul class="ul'+e+'"></ul></div>');for(var t=0;t<a.list[e].list.length;t++){var n=a.list[e].list[t].highlight?" highlight":"";o(".year .ul"+e).append('<li class="cls'+n+'"><p class="date">'+a.list[e].list[t].date+'</p><p class="intro">'+a.list[e].list[t].intro+'</p><p class="version">'+a.list[e].list[t].version+'</p><div class="more more'+e+t+'"></div></li>');for(var i=0;i<a.list[e].list[t].more.length;i++)o("ul .more"+e+t).append("<p>"+a.list[e].list[t].more[i]+"</p>")}}}),o(function(){o(".topjui-timeaxis-main .year .list").each(function(e,t){var n=o(t),t=n.find("ul");n.height(t.outerHeight()),t.css("position","absolute")}),o(".topjui-timeaxis-main .year>h2>a").click(function(e){e.preventDefault(),o(this).parents(".year").toggleClass("close-year")})})},o.fn.iTimeaxis.methods={},o.fn.iTimeaxis.parseOptions=function(e,t){return setId(e,o.extend({},o.fn.iTimeaxis.defaults,o.parser.parseOptions(e,["id"]),t))},o.fn.iTimeaxis.defaults={},o.parser&&o.parser.plugins&&o.parser.plugins.push("timeaxis")}(jQuery),function(i){i.fn.iTimespinner=function(e,t){if("string"==typeof e){var n=i.fn.iTimespinner.methods[e];return n?n(this,t):this.timespinner(e,t)}this.each(function(){e=i.fn.iTimespinner.parseOptions(this,e),i(this).timespinner(e)})},i.fn.iTimespinner.methods={},i.fn.iTimespinner.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.timespinner.parseOptions(e),i.fn.iTimespinner.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iTimespinner.defaults={width:"100%"}}(jQuery),$(function(){}),function(i){i.fn.iTooltip=function(e,t){if("string"==typeof e){var n=i.fn.iTooltip.methods[e];return n?n(this,t):this.tooltip(e,t)}this.each(function(){e=i.fn.iTooltip.parseOptions(this,e),i(this).tooltip(e)})},i.fn.iTooltip.methods={},i.fn.iTooltip.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.tooltip.parseOptions(e),i.fn.iTooltip.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iTooltip.defaults={}}(jQuery),function(i){i.fn.iTree=function(e,t){if("string"==typeof e){var n=i.fn.iTree.methods[e];return n?n(this,t):this.tree(e,t)}this.each(function(){e=i.fn.iTree.parseOptions(this,e),i(this).tree(e)})},i.fn.iTree.methods={},i.fn.iTree.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.tree.parseOptions(e),i.fn.iTree.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iTree.defaults={id:this.selector,expandUrl:"",expandAll:!1,animate:!0,onLoadSuccess:function(){var e=i(this).iTree("options");e.expandAll&&i("#"+e.id).iTree("expandAll")}}}(jQuery),function(p){p.fn.iTreegrid=function(e,t){if("string"==typeof e){var n=p.fn.iTreegrid.methods[e];return n?n(this,t):this.treegrid(e,t)}this.each(function(){e=p.fn.iTreegrid.parseOptions(this,e),topJUI.config.appendRefererParam&&(e.url=appendRefererParam(e.url)),p(this).treegrid(e)})},p.fn.iTreegrid.methods={cascadeCheck:function(e,t){var n=p.data(e[0],"treegrid").options;if(!n.singleSelect){for(var i=n.idField,a=!1,o=p(e.selector).treegrid("getSelections"),r=0;r<o.length;r++)o[r][i]==t.id&&(a=!0);!function e(t,n,i,a){n=p(t.selector).treegrid("getParent",n);n&&(n=n[i],a?p(t.selector).treegrid("select",n):p(t.selector).treegrid("unselect",n),e(t,n,i,a))}(e,t.id,i,a),function e(t,n,i,a,o){!o&&a&&p(t).treegrid("expand",n);var r=p(t).treegrid("getChildren",n);for(var s=0;s<r.length;s++){var d=r[s][i];o?p(t).treegrid("select",d):p(t).treegrid("unselect",d),e(t,d,i,a,o)}}(e,t.id,i,t.deepCascade,a)}}},p.fn.iTreegrid.parseOptions=function(e,t){var n;(t=p.extend({},p.parser.parseOptions(e,["id"]),t)).toolbar||(n=(""==e.id?t:e).id,t.toolbar="#"+n+"-toolbar");t=p.extend({},p.fn.treegrid.parseOptions(e),p.fn.iTreegrid.defaults,t);return t.initUrl=t.url,setId(e,t)},p.fn.iTreegrid.defaults={beforeExpandUrl:"",idField:"id",treeField:"text",fit:!0,border:!1,singleSelect:!0,selectOnCheck:!1,checkOnSelect:!1,expandRoots:!0,expandAll:!1,firstLoad:!0,pageSize:20,animate:!0,onBeforeLoad:function(e){p(this).iTreegrid("clearChecked"),p(this).iTreegrid("clearSelections")},onBeforeExpand:function(e){var t=p(this).iTreegrid("options");p(this).iTreegrid("options").url=replaceUrlParamValueByBrace(t.expandUrl,e)},onExpand:function(e){},onLoadSuccess:function(){var e=p(this).iTreegrid("options");if(e.expandAll&&p("#"+e.id).iTreegrid("expandAll"),e.expandRoots)for(var t=p("#"+e.id).iTreegrid("getRoots"),n=0;n<t.length;n++)p("#"+e.id).iTreegrid("expand",t[n][e.idField]);p(this).iTreegrid("options").url=topJUI.config.appendRefererParam?appendRefererParam(e.initUrl):e.initUrl},onContextMenu:function(e,t){p(this).iTreegrid("options")},onClickRow:function(e){var t=p(this).iTreegrid("options");if("object"==typeof t.childGrid)for(var n=getSelectedRowJson(t.childGrid.param,e),i=t.childGrid.grid,a=0;a<i.length;a++){var o,r=p("#"+i[a].id);"datagrid"==i[a].type||"treegrid"==i[a].type?(o=r[i[a].type]("options").queryParams,r[i[a].type]("options").queryParams=p.extend({},o,n),r[i[a].type]("load")):"panel"==i[a].type&&(o=replaceUrlParamValueByBrace(i[a].href,e),r.panel("refresh",o))}if("object"==typeof t.childTab)for(var s=t.childTab,a=0;a<s.length;a++){var d=p("#"+s[a].id),l=d.tabs("options"),c=d.tabs("getSelected"),u=c.panel("options");null!=u.href||null!=u.iframeHref?(u.iframeHref=replaceUrlParamValueByBrace(u.tempHref,e),d='<iframe src="'+u.iframeHref+'" scrolling="auto" frameborder="0" style="width:100%;height:99.5%;"></iframe>',c.panel({content:d})):"object"==typeof u.dgOpts&&("object"==typeof l.parentGrid&&setGridQueryParams(l.parentGrid,"datagrid",u.dgOpts.id),p("#"+u.dgOpts.id).datagrid("reload"))}},onHeaderContextMenu:p.fn.iDatagrid.methods.createGridHeaderContextMenu}}(jQuery),function(i){i.fn.iUeditor=function(e,t){if("string"==typeof e){var n=i.fn.iUeditor.methods[e];return n?n(this,t):this.textbox(e,t)}this.each(function(){e=i.fn.iUeditor.parseOptions(this,e),UE.delEditor(e.id);UE.getEditor(e.id,{toolbars:"simple"==e.mode?[["fullscreen","source","undo","redo","bold","italic","underline","fontborder","strikethrough","superscript","subscript","insertunorderedlist","insertorderedlist","justifyleft","justifycenter","justifyright","justifyjustify","removeformat","simpleupload","snapscreen","emotion","attachment","link","unlink","indent","lineheight","autotypeset"]]:[["fullscreen","source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","simpleupload","insertimage","emotion","scrawl","insertvideo","music","attachment","map","gmap","insertframe","insertcode","webapp","pagebreak","template","background","|","horizontal","date","time","spechars","snapscreen","wordimage","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts","|","print","preview","searchreplace","drafts","help"]],initialFrameWidth:e.initialFrameWidth,initialFrameHeight:e.initialFrameHeight,autoHeightEnabled:e.autoHeightEnabled,autoFloatEnabled:e.autoFloatEnabled,readonly:e.readonly})})},i.fn.iUeditor.methods={},i.fn.iUeditor.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.textbox.parseOptions(e),i.fn.iUeditor.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iUeditor.defaults={initialFrameWidth:"100%",initialFrameHeight:400,autoHeightEnabled:!0,autoFloatEnabled:!0,readonly:!1},i.parser&&i.parser.plugins&&i.parser.plugins.push("ueditor")}(jQuery),function(n){n.fn.iUploadbox=function(a,e){if("string"==typeof a){var t=n.fn.iUploadbox.methods[a];return t?t(this,e):this.textbox(a,e)}this.each(function(){a=n.fn.iUploadbox.parseOptions(this,a),0==n("#"+a.id+"-btn").length&&(n(this).closest("form").append('<button type="button" class="layui-btn" id="'+a.id+'-btn" style="display: none;">上传图片</button>'),layui.use("upload",function(){var i=layui.jquery;layui.upload.render({elem:"#"+a.id+"-btn",url:a.uploadUrl,accept:a.accept,before:function(e){layer.load()},done:function(e,t,n){e.statusCode==topJUI.config.statusCode.success?i("#"+a.id).textbox("setValue",e.filePath):i.iMessager.alert(topJUI.language.message.title.operationTips,e.message),layer.closeAll("loading")},error:function(){layer.closeAll("loading")}})})),a.onClickButton=function(){n("#"+a.id+"-btn").trigger("click")},n(this).textbox(a)})},n.fn.iUploadbox.methods={},n.fn.iUploadbox.parseOptions=function(e,t){return setId(e,n.extend({},n.fn.textbox.parseOptions(e),n.fn.iUploadbox.defaults,n.parser.parseOptions(e,["id","value"]),t))},n.fn.iUploadbox.defaults={width:"100%",buttonText:"选择图片",accept:"images",buttonIcon:"fa fa-cloud-upload"},n.parser&&n.parser.plugins&&n.parser.plugins.push("uploadbox")}(jQuery),function(d){d.fn.iUploader=function(a,e){if("string"==typeof a){var t=d.fn.iUploader.methods[a];return t?t(this,e):this.textbox(a,e)}this.each(function(){var r,s;a=d.fn.iUploader.parseOptions(this,a),d(this).menubutton(a);var n,t=0;d("body").append('<div id="uploaderDialog"><div id="upfileGrid-toolbar" data-options="border:false"><div style="float: left;margin-right:5px;"><div id="chooseFile">选择文件</div></div><a id="startUpload" style="margin-right:5px;">开始上传</a><a id="removeFile">移除文件</a></div><table id="upfileGrid"></table></div><div id="uploaderDialog-buttons" style="display:none"><a href="#" id="closeUploaderDialog">关闭</a></div>'),s=d("#upfileGrid").datagrid({fit:!0,fitColumns:!0,rownumbers:!0,nowrap:!0,animate:!1,border:!1,singleSelect:!1,idField:"fileId",pagination:!1,toolbar:"#upfileGrid-toolbar",columns:[[{field:"ck",checkbox:!0},{field:"fileId",title:"fileId",hidden:!0},{field:"fileName",title:"文件名称",width:100},{field:"fileSize",title:"文件大小",width:30},{field:"validateMd5",title:"文件验证",width:20},{field:"progress",title:"上传进度",width:180,fixed:!0,formatter:function(e,t){return'<div class="topjui-progressbar progressbar" style="width: 165px; height: 20px;" value="'+e+'" text="'+e+'%"><div class="progressbar-text" style="width: 165px; height: 20px; line-height: 20px;">'+e+'%</div><div class="progressbar-value" style="width: '+e+'%; height: 20px; line-height: 20px;"><div class="progressbar-text" style="width: 165px; height: 20px; line-height: 20px;">'+e+"%</div></div></div>"}},{field:"fileState",title:"上传状态",width:20}]]}),WebUploader.Uploader.register({"before-send-file":"beforeSendFile"},{beforeSendFile:function(a){var o=new d.Deferred;return(new WebUploader.Uploader).md5File(a,0,10485760).progress(function(e){s.datagrid("updateRow",{index:s.datagrid("getRowIndex",a.id),row:{validateMd5:100*e+"%"}})}).then(function(i){d.ajax({type:"POST",url:"/system/attachment/md5Validate",data:{type:"md5Check",md5:i},cache:!1,timeout:3e3,dataType:"json"}).then(function(e,t,n){e.isHave?(o.reject(),r.skipFile(a),s.datagrid("updateRow",{index:s.datagrid("getRowIndex",a.id),row:{fileState:"秒传",progress:100}})):(d.extend(r.options.formData,{md5:i}),o.resolve())},function(e,t,n){o.resolve()})}),d.when(o)}}),(r=WebUploader.create({resize:!1,swf:_tjp+"/plugins/webuploader/js/Uploader.swf",server:"/system/attachment/upload",pick:"#chooseFile",fileSingleSizeLimit:1048576e3,accept:[{title:"file",extensions:"gif,jpg,jpeg,bmp,png,pdf,doc,docx,txt,xls,xlsx,ppt,pptx,zip,mp3,mp4,text,csv",mimeTypes:"image/*,text/*,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/pdf,application/zip,application/csv"}]})).on("fileQueued",function(e){var t=bytesToSize(e.size),t={fileId:e.id,fileName:e.name,fileSize:t,validateMd5:"0%",progress:0,fileState:"等待上传"};s.datagrid("insertRow",{index:0,row:t})}),r.on("uploadProgress",function(e,t){s.datagrid("updateRow",{index:s.datagrid("getRowIndex",e.id),row:{progress:(100*t).toFixed(2)}})}),r.on("uploadSuccess",function(e){for(var t=s.datagrid("getRows"),n=0;n<t.length;n++)t[n].fileId==e.id&&(d('input[type="checkbox"]')[n+1].disabled=!0);d("#removeFile").linkbutton("disable"),s.datagrid("updateRow",{index:s.datagrid("getRowIndex",e.id),row:{fileState:"上传成功"}}),0}),r.on("uploadError",function(e){s.datagrid("updateRow",{index:s.datagrid("getRowIndex",e.id),row:{fileState:"上传失败"}})}),r.on("uploadComplete",function(e){}),r.on("uploadFinished",function(){d("#attachmentDg").datagrid("reload")}),r.on("error",function(e){"F_EXCEED_SIZE"==e?tim.parentAlert("error","上传的单个文件不能大于"+t+"。<br>操作无法进行,如有需求请联系管理员","error"):"Q_TYPE_DENIED"==e&&tim.parentAlert("error","不允许上传此类文件!。<br>操作无法进行,如有需求请联系管理员","error")});function i(){for(var e=s.datagrid("getSelections"),t=[],n=0;n<e.length;n++)t.push(e[n]);for(var i=0;i<t.length;i++){var a=s.datagrid("getRowIndex",t[i]);r.removeFile(t[i].fileId,!0),s.datagrid("deleteRow",a)}s.datagrid("clearSelections")}d(this).on("click",function(){var e;"object"!=typeof a.parentGrid||(n=getSelectedRowData(a.parentGrid.type,a.parentGrid.id))?(0<s.datagrid("getRows").length&&(s.datagrid("selectAll"),i()),e=d("#uploaderDialog"),a=d.extend({iconCls:"fa fa-plus",parentGridUnselectedMsg:"请先选中一条主表数据！",dialog:{title:"文件上传",width:900,height:500,maximized:!1,maximizable:!0,iconCls:"fa fa-cloud-upload",buttons:"#uploaderDialog-buttons"}},a),e.dialog(a.dialog),e.dialog("open"),d("#startUpload").linkbutton({iconCls:"fa fa-play-circle",btnCls:"topjui-btn-green",height:36,onClick:function(){var e,t;t=n,(e=r).getFiles().length<=0?d.messager.alert("提示","没有上传的文件!","error"):(e.option("formData",{puuid:t.uuid}),e.upload())}}),d("#removeFile").linkbutton({iconCls:"fa fa-remove",btnCls:"topjui-btn-red",height:36,onClick:i}),d("#closeUploaderDialog").linkbutton({iconCls:"fa fa-remove",btnCls:"topjui-btn-red",onClick:function(){e.dialog("close")}})):d.messager.alert(topJUI.language.message.title.operationTips,a.parentGrid.unselectedMsg||topJUI.language.message.msg.selectParentGrid,topJUI.language.message.icon.warning)})})},d.fn.iUploader.methods={},d.fn.iUploader.parseOptions=function(e,t){return setId(e,d.extend({},d.fn.textbox.parseOptions(e),d.fn.iUploader.defaults,d.parser.parseOptions(e,["id","value"]),t))},d.fn.iUploader.defaults={hasDownArrow:!1},d.parser&&d.parser.plugins&&d.parser.plugins.push("uploader")}(jQuery),function(i){i.fn.iValidatebox=function(e,t){if("string"==typeof e){var n=i.fn.iValidatebox.methods[e];return n?n(this,t):this.validatebox(e,t)}this.each(function(){e=i.fn.iValidatebox.parseOptions(this,e),i(this).validatebox(e)})},i.fn.iValidatebox.methods={},i.fn.iValidatebox.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.validatebox.parseOptions(e),i.fn.iValidatebox.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iValidatebox.defaults={width:"100%"},i.extend(i.fn.validatebox.defaults.rules,{equals:{validator:function(e,t){return e==i(t[0]).val()},message:"两次输入的内容不一致"},cellphone:{validator:function(e,t){return/^1(3|4|5|7|8|9)\d{9}$/.test(e)},message:"请输入有效的手机号码"},telephone:{validator:function(e,t){return/(^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$)|(^((\d3)|(\d{3}\-))?(1[345789]\d{9})$)/.test(e)},message:"请输入有效的电话号码"},maxLength:{validator:function(e,t){return e.length<t[0]},message:"输入内容长度必须小于{0}"},minLength:{validator:function(e,t){return e.length>t[0]},message:"输入内容长度必须大于{0}"},idCard:{validator:function(e){return/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/.test(e)},message:"请输入正确的身份证号"},postcode:{validator:function(e){return/^[1-9]\d{5}(?!\d)$/.test(e)},message:"请输入正确的邮政编码"},date:{validator:function(e){return/^[1-2][0-9][0-9][0-9]-[0-1]{0,1}[0-9]-[0-3]{0,1}[0-9]$/.test(e)},message:"请输入正确的日期"},alphaDash:{validator:function(e){return/^[\w-]+$/.test(e)},message:"输入内容只能是数字、字母、下划线或横线"},alphaNum:{validator:function(e){return/^[a-z0-9]+$/i.test(e)},message:"输入内容只能是数字和字母"},number:{validator:function(e){return/^\d+$/.test(e)},message:"输入内容只能是数字"}})}(jQuery),function(i){i.fn.iWindow=function(e,t){if("string"==typeof e){var n=i.fn.iWindow.methods[e];return n?n(this,t):this.window(e,t)}this.each(function(){e=i.fn.iWindow.parseOptions(this,e),i(this).window(e)})},i.fn.iWindow.methods={},i.fn.iWindow.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.window.parseOptions(e),i.fn.iWindow.defaults,i.parser.parseOptions(e,["id"]),t))},i.fn.iWindow.defaults={}}(jQuery),function(i){i.fn.iZtree=function(t,e){if("string"==typeof t){var n=i.fn.iZtree.methods[t];return n?n(this,e):this.textbox(t,e)}this.each(function(){var e=i.fn.iZtree.parseOptions(this,t);e.zNodes?i.fn.zTree.init(i(this),e.setting,e.zNodes):i.fn.zTree.init(i(this),e.setting)})},i.fn.iZtree.methods={},i.fn.iZtree.parseOptions=function(e,t){return setId(e,i.extend({},i.fn.iZtree.defaults,i.parser.parseOptions(e,["id","value"]),t))},i.fn.iZtree.defaults={setting:{}},i.parser&&i.parser.plugins&&i.parser.plugins.push("ztree")}(jQuery);